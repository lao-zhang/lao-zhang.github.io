<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>老zhang Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="老zhang Blog">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="老zhang Blog">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="老zhang Blog">
  
    <link rel="alternate" href="/atom.xml" title="老zhang Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">老zhang Blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="https://lao-zhang.github.io">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-spring" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/01/10/spring/" class="article-date">
  <time datetime="2018-01-10T13:44:03.762Z" itemprop="datePublished">2018-01-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/01/10/spring/">Spring学习笔记</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <a id="more"></a>
<p>HelloApi：提供sayhello（）的空方法。</p>
<p>HelloImpl3：为对象设置参数以及完整的对象构造方法，重写HelloApi中的sayhello（）方法，为其补上具体的参数输出。</p>
<p>Cdin ：提供参数，将其以helloimpl3中的设定的形式包装起来，并且连接了helloimpl3中的方法。</p>
<p>testcdin：从cdin中获取参数，并且以helloimpl3中设定的方法进行输出。</p>
<p>构造器注入：含所有参数的构造方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> H（String message，<span class="keyword">int</span> index）&#123;</div><div class="line"><span class="keyword">this</span>.message=message;</div><div class="line"><span class="keyword">this</span>.index=index;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Setter注入:为所有参数分别设置set方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMessage</span><span class="params">(String message)</span></span>&#123;</div><div class="line">  <span class="keyword">this</span>.message=message;</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setIndex</span><span class="params">(<span class="keyword">int</span> index)</span></span>&#123;</div><div class="line">  <span class="keyword">this</span>.index=index;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>静态工厂构造：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> HelloApi <span class="title">newInstance</span><span class="params">(String message,<span class="keyword">int</span> index)</span></span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="keyword">new</span> HelloImpl3(message,index);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>实例工厂构造：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> HelloApi <span class="title">newInstance</span><span class="params">(String message,<span class="keyword">int</span> index)</span></span>&#123;</div><div class="line">  <span class="keyword">return</span> <span class="keyword">new</span> Helloimpl3(message,index);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>注入boolean参数</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"bean2"</span> <span class="attr">class</span>=<span class="string">"cn.javass.spring.chapter1.helloworld.BooleanTest"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"success"</span> <span class="attr">value</span>=<span class="string">"0"</span>/&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//bean类</span></div><div class="line"><span class="keyword">package</span> cn.javass.spring.chapter1.helloworld;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BooleanTest</span> </span>&#123;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">boolean</span> success;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isSuccess</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> success;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSuccess</span><span class="params">(<span class="keyword">boolean</span> success)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.success=success;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//test类  (对于boolean类的参数不能直接输出，可以通过if判断输出正确和错误间接体现参数值)（在spring中，boolean可以用“on/off”、"1/0"、“yes/no”表示）</span></div><div class="line"><span class="keyword">package</span> cn.javass.spring.chapter1.helloworld;</div><div class="line"></div><div class="line"><span class="keyword">import</span> org.junit.Test;</div><div class="line"><span class="keyword">import</span> org.springframework.beans.factory.BeanFactory;</div><div class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Bootest</span> </span>&#123;</div><div class="line">	<span class="meta">@Test</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> </span>&#123;</div><div class="line">		BeanFactory bf=<span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"/chapter1/boolean.xml"</span>);</div><div class="line">        BooleanTest bb=bf.getBean(<span class="string">"bean2"</span>,BooleanTest.class);</div><div class="line">        System.out.println(bb);</div><div class="line">        <span class="keyword">if</span>(bb.isSuccess())</div><div class="line">        	System.out.println(<span class="string">"正确！"</span>);</div><div class="line">        <span class="keyword">else</span></div><div class="line">        	System.out.println(<span class="string">"错误！"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>注入list型参数</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"values"</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">list</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>程迦<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>青豆<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>子衿<span class="tag">&lt;/<span class="name">value</span>&gt;</span></div><div class="line">   <span class="tag">&lt;/<span class="name">list</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//bean类</span></div><div class="line"><span class="keyword">package</span> cn.javass.spring.chapter1.helloworld;</div><div class="line"><span class="keyword">import</span> java.util.List;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ListTestBean</span> </span>&#123;</div><div class="line">	<span class="keyword">private</span> List&lt;String&gt; values;</div><div class="line">	<span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">getValues</span><span class="params">()</span></span>&#123;</div><div class="line">		<span class="keyword">return</span> values;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setValues</span><span class="params">(List&lt;String&gt; values)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.values=values ;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">//test类</span></div><div class="line"><span class="keyword">package</span> cn.javass.spring.chapter1.helloworld;</div><div class="line"><span class="keyword">import</span> org.junit.Test;</div><div class="line"><span class="keyword">import</span> org.springframework.beans.factory.BeanFactory;</div><div class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Listtest</span> </span>&#123;</div><div class="line">	<span class="meta">@Test</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testlist</span><span class="params">()</span> </span>&#123;</div><div class="line">		BeanFactory bf=<span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"/chapter1/list.xml"</span>);</div><div class="line">		ListTestBean lb=bf.getBean(<span class="string">"listBean"</span>,ListTestBean.class);</div><div class="line">		System.out.println(lb.getValues().size());</div><div class="line">		System.out.println(lb.getValues());</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>—————————————————————————————————————————</p>
<p>spring注解：</p>
<p>@component：该类会作为组件类，并告知Spring类为这个类创建bean。</p>
<p>@override：表重写，其一定的查错作用（检查方法名是否跟父类方法名相同）</p>
<p>@configuration：此类是一个配置类，该类应该在包含Spring应用上下文如何创建bean的细节</p>
<p>@ComponentScan：在spring中启动组建扫描，默认扫描带有此注解的包，（也可以设置扫描范围），扫描找出带有@conponent的类</p>
<p>@Autowired：为此注释标示的构造器（其实就是类的构造方法）进行实例化，并传入一个对应类型的bean（传递参数）</p>
<h5 id="自动配置实例"><a href="#自动配置实例" class="headerlink" title="自动配置实例"></a>自动配置实例</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//定义CD接口</span></div><div class="line"><span class="keyword">package</span> soundsystem;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">CompactDisc</span></span>&#123;</div><div class="line">  <span class="function"><span class="keyword">void</span> <span class="title">play</span><span class="params">()</span></span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//带有@conponent的接口实现类,重写接口中的方法</span></div><div class="line"><span class="keyword">package</span> soundsystem;</div><div class="line"><span class="meta">@Component</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SgtPeppers</span> <span class="keyword">implements</span> <span class="title">CompactDisc</span></span>&#123;</div><div class="line">  <span class="keyword">private</span> String title=<span class="string">""</span>;</div><div class="line">  <span class="keyword">private</span> String artist=<span class="string">""</span>;</div><div class="line">  </div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">play</span><span class="params">()</span></span>&#123;</div><div class="line">    System.out.println(<span class="string">" Playing "</span>+title+<span class="string">" by "</span>+artist);</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//组件扫描启动类</span></div><div class="line"><span class="keyword">package</span> suondsystem;</div><div class="line"></div><div class="line"><span class="meta">@Configuration</span></div><div class="line"><span class="meta">@ComponentScan</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CDPlayerConfig</span></span>&#123;</div><div class="line">  </div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//测试类，测试以上组件扫描配置是否成功</span></div><div class="line"><span class="meta">@RunWith</span>(SpringJUnit4ClassRunner.class)</div><div class="line"><span class="meta">@ContextConfiguration</span>(classes=CDPlayerConfig.class)</div><div class="line"><span class="keyword">package</span> CDPlayerTest&#123;</div><div class="line">  <span class="meta">@Autowired</span></div><div class="line">  <span class="keyword">private</span> CompactDisc cd;</div><div class="line">  </div><div class="line">  <span class="meta">@Test</span></div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">cdShouldNotBeNull</span><span class="params">()</span></span>&#123;</div><div class="line">    assertNotNull(cd);</div><div class="line">    cd.play();</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/01/10/spring/" data-id="cjefnd25x0004rt76htjp4ab4" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
    
</article>

  
    <article id="post-Java web项目" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/01/10/Java web项目/" class="article-date">
  <time datetime="2018-01-10T03:40:00.000Z" itemprop="datePublished">2018-01-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/01/10/Java web项目/">传统java web项目</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p> 经过系统的理论学习和实践，鄙人对于不依赖于框架的传统java web工程有了一定的认识与掌握，现在结合具体项目来对传统java web工程整个构建工程进行分析。</p>
        
          <p class="article-more-link">
            <a href="/2018/01/10/Java web项目/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/01/10/Java web项目/" data-id="cjefnd25i0001rt76ro9muctr" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
    
</article>

  
    <article id="post-Python" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/11/28/Python/" class="article-date">
  <time datetime="2017-11-27T16:00:00.000Z" itemprop="datePublished">2017-11-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/11/28/Python/">python笔记</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <a id="more"></a>
<h2 id="Python"><a href="#Python" class="headerlink" title="Python"></a>Python</h2><h3 id="1-basic"><a href="#1-basic" class="headerlink" title="1.basic"></a>1.basic</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">s2=68</div><div class="line">s1=82</div><div class="line">r=(s1-s2)/s2*100</div><div class="line">print(&apos;小明成绩增长百分点为：%.1f%%&apos;%r)</div></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">roommates=[<span class="string">'老张'</span>,<span class="string">'老王'</span>,<span class="string">'骚鸡'</span>,<span class="string">'龙哥'</span>,<span class="string">'老雷'</span>,<span class="string">'骚春'</span>]</div><div class="line">roommates</div><div class="line">len(roommates)</div><div class="line">roommates[<span class="number">0</span>]</div><div class="line">roommates[<span class="number">4</span>]</div><div class="line">roommates[<span class="number">-3</span>]</div><div class="line">roommates.append(<span class="string">'女鬼'</span>)</div><div class="line">roommates.insert(<span class="number">3</span>,<span class="string">'女鬼二号'</span>)</div><div class="line">roommates.pop()</div><div class="line">roommates.pop(<span class="number">3</span>)</div><div class="line">roommates[<span class="number">3</span>]=<span class="string">'骚龙'</span></div></pre></td></tr></table></figure>
<p>数据存储：</p>
<p>list，有序，元素可调节列表，符号为[ ]；</p>
<p>tuple，有序，元素不可调节列表（所有元素需要初始化，且之后不可变动），符号为( )，</p>
<p>​       只有一个元素（假设为1）的tuple也要写成（1，）；</p>
<p>dict，字典，key-value存储，查询速度快。（类似java-web的setAttribute）。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">d=&#123;<span class="string">'牧师'</span>:<span class="string">'dog'</span>,<span class="string">'猎人'</span>:<span class="string">'bear'</span>,<span class="string">'潜行者'</span>:<span class="string">'hornet'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>d</div><div class="line">&#123;<span class="string">'牧师'</span>: <span class="string">'dog'</span>, <span class="string">'猎人'</span>: <span class="string">'bear'</span>, <span class="string">'潜行者'</span>: <span class="string">'hornet'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>d[<span class="string">'德鲁伊'</span>]=<span class="string">'deer'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>d</div><div class="line">&#123;<span class="string">'德鲁伊'</span>: <span class="string">'deer'</span>, <span class="string">'牧师'</span>: <span class="string">'dog'</span>, <span class="string">'猎人'</span>: <span class="string">'bear'</span>, <span class="string">'潜行者'</span>: <span class="string">'hornet'</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>d[<span class="string">'牧师'</span>]</div><div class="line"><span class="string">'dog'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>d.get(<span class="string">'猎人'</span>)</div><div class="line"><span class="string">'bear'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>d.pop(<span class="string">'牧师'</span>)</div><div class="line"><span class="string">'dog'</span></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>d</div><div class="line">&#123;<span class="string">'德鲁伊'</span>: <span class="string">'deer'</span>, <span class="string">'猎人'</span>: <span class="string">'bear'</span>, <span class="string">'潜行者'</span>: <span class="string">'hornet'</span>&#125;</div></pre></td></tr></table></figure>
<p>Set,只存储一组key值，无序，自动过滤重复值，创建时需要一个list作为输入集合。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">s=set([<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">5</span>,<span class="number">3</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">7</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>])</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s</div><div class="line">&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>&#125;</div><div class="line"></div><div class="line"> s.add(<span class="number">8</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s</div><div class="line">&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s.remove(<span class="number">2</span>)</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s</div><div class="line">&#123;<span class="number">1</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>&#125;</div><div class="line"></div><div class="line">添加重复元素无效。</div><div class="line"></div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s1 = set([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s2 = set([<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>])</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s1 &amp; s2</div><div class="line">&#123;<span class="number">2</span>, <span class="number">3</span>&#125;</div><div class="line"><span class="meta">&gt;&gt;&gt; </span>s1 | s2</div><div class="line">&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;</div><div class="line"><span class="comment">#计算数学集合交并际是最骚的</span></div></pre></td></tr></table></figure>
<p>逻辑控制语句：</p>
<p>python里逻辑语句没有括号，而是采用了“：”和首行缩进，这点要注意。</p>
<p>if：else：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">age = <span class="number">20</span></div><div class="line"><span class="keyword">if</span> age &gt;= <span class="number">18</span>:</div><div class="line">    print(<span class="string">'your age is'</span>, age)</div><div class="line">    print(<span class="string">'adult'</span>)</div></pre></td></tr></table></figure>
<p>for…in…： </p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">names = [<span class="string">'Michael'</span>, <span class="string">'Bob'</span>, <span class="string">'Tracy'</span>]</div><div class="line"><span class="keyword">for</span> name <span class="keyword">in</span> names:</div><div class="line">    print(name)</div></pre></td></tr></table></figure>
<p>while:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">sum = 0</div><div class="line">n = 99</div><div class="line">while n &gt; 0:</div><div class="line">    sum = sum + n</div><div class="line">    n = n - 2</div><div class="line">print(sum)</div></pre></td></tr></table></figure>
<p>break;</p>
<p>continue;</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/11/28/Python/" data-id="cjefnd25r0002rt767j2oufb8" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
    
</article>

  
    <article id="post-你想当程序员么？" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/11/15/你想当程序员么？/" class="article-date">
  <time datetime="2017-11-14T16:00:00.000Z" itemprop="datePublished">2017-11-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/11/15/你想当程序员么？/">你想当程序员吗？</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>你想当程序员么？</p>
        
          <p class="article-more-link">
            <a href="/2017/11/15/你想当程序员么？/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/11/15/你想当程序员么？/" data-id="cjefnd26a0006rt76nm2ecwb7" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
    
</article>

  
    <article id="post-技术帖之贪心算法1" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/11/05/技术帖之贪心算法1/" class="article-date">
  <time datetime="2017-11-05T12:41:00.000Z" itemprop="datePublished">2017-11-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/11/05/技术帖之贪心算法1/">技术帖之贪心算法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>今天我们来更一篇技术帖。</p>
        
          <p class="article-more-link">
            <a href="/2017/11/05/技术帖之贪心算法1/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/11/05/技术帖之贪心算法1/" data-id="cjefnd26p0008rt76w07l6kg4" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
    
</article>

  
    <article id="post-Thinking in java" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/10/27/Thinking in java/" class="article-date">
  <time datetime="2017-10-26T16:00:00.000Z" itemprop="datePublished">2017-10-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/10/27/Thinking in java/">thinking in java</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <a id="more"></a>
<h3 id="第二章"><a href="#第二章" class="headerlink" title="第二章"></a>第二章</h3><p>7.编写一个程序，打印出从命令行获取的三个参数。为此，需要对代表命令行参数的String数组（main(String[] args)）建立索引。</p>
<p>对main中的String数组建立索引的说法我还是第一次听说。</p>
<p>作者给的程序是这样写的：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> ssss;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestFour</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		<span class="keyword">if</span>(args.length&lt;<span class="number">3</span>) &#123;</div><div class="line">			System.out.println(<span class="string">"Need 3 argyments"</span>);</div><div class="line">			System.exit(<span class="number">1</span>);</div><div class="line">		&#125;</div><div class="line">		System.out.println(args[<span class="number">0</span>]);<span class="comment">//这里是输出String型数组args（之前一直以为这个数组是个摆设）</span></div><div class="line">		System.out.println(args[<span class="number">1</span>]);</div><div class="line">		System.out.println(args[<span class="number">2</span>]);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>使用方法也出乎意料：</p>
<figure class="highlight dos"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function">Macintosh:<span class="title">src</span> <span class="title">zhangxuan</span>$ <span class="title">java</span> <span class="title">ssss.TestFour</span> <span class="title">a</span> <span class="title">b</span> <span class="title">c</span></span></div><div class="line"><span class="function"></span></div><div class="line"><span class="function">//输出结果为<span class="title">a</span> <span class="title">b</span> <span class="title">c</span></span></div></pre></td></tr></table></figure>
<p>对char型变量使用左移零位（s&lt;<0）或右移零位(s>&gt;0)操作可将其变为int型，数字为ascii码对应十进制数。</0）或右移零位(s></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/10/27/Thinking in java/" data-id="cjefnd2640005rt763afpvpox" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
    
</article>

  
    <article id="post-JAVA WEB（2）" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/08/10/JAVA WEB（2）/" class="article-date">
  <time datetime="2017-08-09T16:00:00.000Z" itemprop="datePublished">2017-08-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/08/10/JAVA WEB（2）/">java web(2)</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <a id="more"></a>
<h3 id="6-JavaBean组件"><a href="#6-JavaBean组件" class="headerlink" title="6.JavaBean组件"></a>6.JavaBean组件</h3><h4 id="JavaBean概念"><a href="#JavaBean概念" class="headerlink" title="JavaBean概念"></a>JavaBean概念</h4><p>用于封装数据和业务逻辑，以实现业务逻辑和显示逻辑的分离，通过使用JavaBean减少在JSP中脚本代码的使用，使得应用程序易于维护、系统具有更强的健壮性和灵活性。</p>
<!--more-->
<p>javaBean是用java语言描述的软件组织模型，实际上是一个java类。在编写jsp页面时，对于一些常用的功能，可以将它们的共用功能抽取出来，组织为javaBean。</p>
<p>javaBean必须为public类，必须有一个无参的public构造方法，属性的访问权限一般定义为private或protected，对于每个属性一般有两个方法——get和set方法。</p>
<h4 id="JavaBean使用范围"><a href="#JavaBean使用范围" class="headerlink" title="JavaBean使用范围"></a>JavaBean使用范围</h4><jsp:usebean id="" class="" scope="">

<p>使用scope属性来设置javaBean的使用范围。</p>
<p>拿计数器举例：</p>
<p>page：jb只在当前jsp页面有效，即打开指定jsp计数器+1，刷新无效。</p>
<p>request：jb在转发页面也有效，即在当前jsp页面计数器+1，在从当前jsp页跳转到的jsp页面也+1，刷新无效。</p>
<p>session：jb在当前用户打开的任何界面都有效，即反复打开调用计数器的jsp都+1，刷新+1；</p>
<p>application：jb在所有用户的界面都有效，即刷新+1，反复打开页面+1，使用其他浏览器打开+1；</p>
<h4 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h4><p>实现上述作用域为request的计数器</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> jb;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CountBean</span></span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> count=<span class="number">0</span>;</div><div class="line">  &#123;</div><div class="line">      </div><div class="line">  &#125;</div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getcount</span><span class="params">()</span></span></div><div class="line"><span class="function">  </span>&#123;</div><div class="line">    count++;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.count;</div><div class="line">  &#125;</div><div class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setcount</span><span class="params">(<span class="keyword">int</span> count)</span></span></div><div class="line"><span class="function">  </span>&#123;</div><div class="line">      <span class="keyword">this</span>.count=count;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"><span class="comment">//javaBean，计数器方法。</span></div></pre></td></tr></table></figure>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">&lt;%<span class="meta">@page</span> language=<span class="string">"java"</span> contectType=<span class="string">"text/html;charset=UTF-8"</span> pageEncoding=<span class="string">"UTF-8"</span> <span class="keyword">import</span>=<span class="string">"java.util.*"</span>%&gt;</div><div class="line">&lt;!DOCTYPE html&gt;</div><div class="line">&lt;html&gt;</div><div class="line">  &lt;head&gt;</div><div class="line">    &lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html;charset=UTF-8"</span>&gt;</div><div class="line">    &lt;title&gt;counter request&lt;/title&gt;</div><div class="line">  &lt;/head&gt;</div><div class="line">  &lt;body&gt;</div><div class="line">    &lt;jsp:useBean id=<span class="string">"counter"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"jb.CountBean"</span> scope=<span class="string">"request"</span>/&gt;</div><div class="line">    计算机的值：&lt;jsp:getProperty property=<span class="string">"count"</span> name=<span class="string">"counter"</span>/&gt;</div><div class="line">    &lt;jsp:forward page="getrequestcounter.jsp"&gt;&lt;/jsp:forword&gt;</div><div class="line">  &lt;/body&gt;</div><div class="line">&lt;/html&gt;</div><div class="line"></div><div class="line">********************</div><div class="line">&lt;jsp:useBean&gt; javaBean引用标签；</div><div class="line">&lt;jsp:getPeoperty&gt;获取javaBean中的参数值，相当于调用函数中的get方法；</div><div class="line">&lt;jsp:forward&gt;转发页面，当useBean标签的scope属性设置为request时，可以使用此标签将javaBean的内容转发到其他页面</div></pre></td></tr></table></figure>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">&lt;%<span class="meta">@page</span> language=<span class="string">"java"</span> contectType=<span class="string">"text/html;charset=utf-8"</span> pageEncoding=<span class="string">"UTF-8"</span> <span class="keyword">import</span>=<span class="string">"java.util.*"</span>%&gt;</div><div class="line">&lt;!DOCTYPE html&gt;</div><div class="line">&lt;html&gt;</div><div class="line">  &lt;head&gt;</div><div class="line">    &lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html;charset=utf-8"</span>&gt;</div><div class="line">    &lt;title&gt;跳转页面&lt;/title&gt;</div><div class="line">  &lt;/head&gt;</div><div class="line">  &lt;body&gt;</div><div class="line">    &lt;div align=<span class="string">"center"</span>&gt;</div><div class="line">    &lt;jsp:useBean id=<span class="string">"counter"</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">"jb.CountBean"</span> scope=<span class="string">"request"</span>/&gt;</div><div class="line">      计数器：&lt;jsp:getProperty property=<span class="string">"count"</span> name=<span class="string">"count"</span>/&gt;</div><div class="line">    &lt;/div&gt;</div><div class="line">  &lt;/body&gt;</div><div class="line">&lt;/html&gt;</div><div class="line"></div><div class="line">*************</div><div class="line">转发页面的&lt;jsp:useBean&gt;标签中scope属性也要设置为<span class="string">"request"</span></div></pre></td></tr></table></figure>
<p>运行结果：由初始页面到转发页面，调用了javaBean两次，故计数器显示为2；</p>
<p><img src="/Users/zhangxuan/Pictures/截图/计数器.png" style="zoom:50%"></p>
<h3 id="7-MVC设计模式"><a href="#7-MVC设计模式" class="headerlink" title="7.MVC设计模式"></a>7.MVC设计模式</h3><p>设计模式：设计模式是一套被人反复使用、多人知晓、经过分类编目的、代码设计经验的总结。编写程序使用设计模式是为了重用代码、让代码更容易为他人理解、保证代码可靠。设计模式使代码编制真正工程化，是软件工程的基石脉络。</p>
<p>MVC设计模式：用一种将设计流程控制、业务逻辑和数据显示分离的方法来编写程序，使得代码可复用、易维护。</p>
<h4 id="1-JSP-Model1"><a href="#1-JSP-Model1" class="headerlink" title="1.JSP Model1"></a>1.JSP Model1</h4><p>早期java web应用开发中，JSP文件即负责处理业务逻辑和控制程序的运行流程，还负责数据的显示。即用JSP文件独立自主的完成系统功能的所有任务。</p>
<p><img src="/Users/zhangxuan/Pictures/截图/JSP Model1.png" style="zoom:45%"></p>
<p>​                                                                         传统的JSP Model1</p>
<h4 id="2改进的JSP-Model1"><a href="#2改进的JSP-Model1" class="headerlink" title="2改进的JSP Model1"></a>2改进的JSP Model1</h4><p>改进的JSP Model1利用JSP页面与javaBean组件共同协作来完成系统功能的所有任务，JSP文件负责程序的流程控制逻辑和数据显示逻辑任务，javaBean负责处理业务逻辑任务。</p>
<p><img src="/Users/zhangxuan/Pictures/截图/JSP Model1 改.png" style="zoom:45%"></p>
<h4 id="3-JSP-Model2"><a href="#3-JSP-Model2" class="headerlink" title="3.JSP Model2"></a>3.JSP Model2</h4><p>JSP Model2 采用JSP页面、Servlet和JavaBean组件分工协作共同完成系统功能的所有任务。其中JSP负责数据显示逻辑任务，Servlet负责程序流程控制逻辑任务，JavaBean负责处理逻辑任务。JSP Model2就是采用MVC设计模式思想来设计的。</p>
<p><img src="/Users/zhangxuan/Pictures/截图/JSP Model 2.png" style="zoom:45%"></p>
<h4 id="4-MVC设计模式"><a href="#4-MVC设计模式" class="headerlink" title="4.MVC设计模式"></a>4.MVC设计模式</h4><p>模型（Model）：实现业务逻辑处理和数据库操作，另外还包括数据模型；</p>
<p>视图（View）：实现数据显示逻辑。负责与用户交互，即接受用户数据的输入，显示模型返回的数据。</p>
<p>控制器（Controller）：实现程序执行流程的控制，任务的分派。接受用户请求，调用模型完成请求的业务处理功能，并将                   处理结果返回给视图。</p>
<p><img src="/Users/zhangxuan/Pictures/截图/MVC.png" style="zoom:50%"></p>
<h3 id="8-EL表达式"><a href="#8-EL表达式" class="headerlink" title="8.EL表达式"></a>8.EL表达式</h3><p>在JSP页面中使用EL表达式可以获取并显示页面数据，并且可以简化对变量和对象的访问，减少JSP页面中对java代码的使用。</p>
<h4 id="1-EL访问数据"><a href="#1-EL访问数据" class="headerlink" title="1.EL访问数据"></a>1.EL访问数据</h4><h5 id="访问作用域变量"><a href="#访问作用域变量" class="headerlink" title="访问作用域变量"></a>访问作用域变量</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> el;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> javax.servlet.RequestDispatcher;</div><div class="line"><span class="keyword">import</span> javax.servlet.ServletException;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ScopeServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span></span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request,HttpServletResponse response)</span></span></div><div class="line"><span class="function">	<span class="keyword">throws</span> ServletException,IOException</span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		<span class="keyword">this</span>.doPost(request, response);</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request,HttpServletResponse response)</span></span></div><div class="line"><span class="function">	<span class="keyword">throws</span> ServletException,IOException</span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		String attr1=<span class="string">"hello,world!"</span>;</div><div class="line">		request.setAttribute(<span class="string">"attr1"</span>, attr1);</div><div class="line">		RequestDispatcher dispatcher;<span class="comment">//请求转发接口；</span></div><div class="line">		dispatcher=request.getRequestDispatcher(<span class="string">"/el/getVar.jsp"</span>);<span class="comment">//获取接受转发的页面</span></div><div class="line">		dispatcher.forward(request, response);<span class="comment">//转发</span></div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&lt;%@ page language=<span class="string">"java"</span> pageEncoding=<span class="string">"UTF-8"</span> <span class="keyword">import</span>=<span class="string">"java.util.*"</span>%&gt;</div><div class="line">&lt;!DOCTYPE html&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;title&gt;获取作用与对象的值&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">     $&#123; attr1 &#125;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div><div class="line"></div><div class="line"></div><div class="line"><span class="number">1</span>.此页面接受从ScopeServlet.java传送的request，使用el语句直接输出存储在request中的“attr1”参数的值;</div><div class="line"><span class="number">2</span>.el语句要注意：<span class="string">"$"</span>与<span class="string">"&#123;&#125;"</span>之间不能有空格；</div></pre></td></tr></table></figure>
<p>运行ScopeServlet.java后显示的是转发页面（JSP页面）的内容，但是显示的路径是在web.xml中设置的java类的路径。</p>
<h5 id="页面跳转的若干方法"><a href="#页面跳转的若干方法" class="headerlink" title="页面跳转的若干方法"></a><strong><em>页面跳转的若干方法</em></strong></h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">        RequestDispatcher dispatch;</div><div class="line">		dispatch=request.getRequestDispatcher(<span class="string">"/el/laozhang.jsp"</span>);</div><div class="line">		dispatch.forward(request, response);</div><div class="line"></div><div class="line">除了使用重定向来跳转到本地页面，还可以是网络界面。（我在想能不能通过提交request到百度来完成自动搜素）</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">response.setStatus(HttpServletResponse.SC_MOVED_PERMANENTLY);</div><div class="line">String newLocn = <span class="string">"http://lao_zhang.coding.me"</span>;</div><div class="line">response.setHeader(<span class="string">"Location"</span>,newLocn);</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">response.sendRedirect(<span class="string">"http://lao_zhang.coding.me"</span>);</div></pre></td></tr></table></figure>
<p>综上，第一种可以用来向目标页面发送request和response，第三种较为简便。</p>
<h5 id="访问JavaBean属性"><a href="#访问JavaBean属性" class="headerlink" title="访问JavaBean属性"></a>访问JavaBean属性</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> el;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"></div><div class="line"><span class="keyword">import</span> javax.servlet.RequestDispatcher;</div><div class="line"><span class="keyword">import</span> javax.servlet.ServletException;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Bookdispatch</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span></span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request,HttpServletResponse response)</span></span></div><div class="line"><span class="function">	<span class="keyword">throws</span> ServletException,IOException</span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		doPost(request,response);</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request,HttpServletResponse response)</span></span></div><div class="line"><span class="function">	<span class="keyword">throws</span> ServletException,IOException</span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		Book book=<span class="keyword">new</span> Book(<span class="string">"1001"</span>,<span class="string">"《丰乳肥臀》"</span>);</div><div class="line">		request.setAttribute(<span class="string">"Book"</span>, book);</div><div class="line">		RequestDispatcher dispatcher=request.getRequestDispatcher(<span class="string">"/el/getBean.jsp"</span>);</div><div class="line">		dispatcher.forward(request, response);</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="number">1</span>.依旧通过request转发Book对象；</div><div class="line"><span class="number">2</span>.Book对象具有isbn（编号）和name（名称）两项属性，Book类方法无非是Book本身的构造方法和两元素的get、set方法，这里就不放出代码了。</div></pre></td></tr></table></figure>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></div><div class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</div><div class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span>&gt;</div><div class="line">&lt;title&gt;获取图书信息&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">ISBN:$&#123;Book.isbn&#125;&lt;br&gt;</div><div class="line">书  名:$&#123;Book.name &#125;&lt;br&gt; </div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div><div class="line"></div><div class="line"><span class="number">1</span>.使用el语言，直接对存放在request中的Book对象中的isbn元素和name元素进行引用。</div></pre></td></tr></table></figure>
<h5 id="访问集合元素"><a href="#访问集合元素" class="headerlink" title="访问集合元素"></a>访问集合元素</h5><p>(只给出集合在class中定义的java语句和在jsp中的EL访问语句)</p>
<p>数组:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">   Book books[]=<span class="keyword">new</span> Book[<span class="number">4</span>];</div><div class="line">books[<span class="number">0</span>]=<span class="keyword">new</span> Book(<span class="string">"100"</span>,<span class="string">"《Harry Potty》"</span>);</div><div class="line">books[<span class="number">1</span>]=<span class="keyword">new</span> Book(<span class="string">"101"</span>,<span class="string">"《他知道风从哪个方向吹来》"</span>);</div><div class="line">books[<span class="number">2</span>]=<span class="keyword">new</span> Book(<span class="string">"102"</span>,<span class="string">"《文化苦旅》"</span>);</div><div class="line">books[<span class="number">3</span>]=<span class="keyword">new</span> Book(<span class="string">"103"</span>,<span class="string">"《史蒂芬·乔布斯传》"</span>);</div><div class="line">request.setAttribute(<span class="string">"books"</span>,books);</div></pre></td></tr></table></figure>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">&lt;table border=<span class="number">1</span>&gt;</div><div class="line">&lt;tr&gt;</div><div class="line">&lt;th&gt;ISBN&lt;/th&gt;</div><div class="line">&lt;th&gt;书  名&lt;/th&gt;</div><div class="line">&lt;/tr&gt;</div><div class="line">&lt;tr&gt;</div><div class="line">&lt;td&gt;$&#123;books[0].isbn&#125;&lt;/td&gt;</div><div class="line">&lt;td&gt;$&#123;books[0].name&#125;&lt;/td&gt;</div><div class="line">&lt;/tr&gt;</div><div class="line">&lt;tr&gt;</div><div class="line">&lt;td&gt;$&#123;books[1].isbn&#125;&lt;/td&gt;</div><div class="line">&lt;td&gt;$&#123;books[1].name&#125;&lt;/td&gt;</div><div class="line">&lt;/tr&gt;</div><div class="line">&lt;tr&gt;</div><div class="line">&lt;td&gt;$&#123;books[2].isbn&#125;&lt;/td&gt;</div><div class="line">&lt;td&gt;$&#123;books[2].name&#125;&lt;/td&gt;</div><div class="line">&lt;/tr&gt;</div><div class="line">&lt;tr&gt;</div><div class="line">&lt;td&gt;$&#123;books[3].isbn&#125;&lt;/td&gt;</div><div class="line">&lt;td&gt;$&#123;books[3].name&#125;&lt;/td&gt;</div><div class="line">&lt;/tr&gt;</div><div class="line">&lt;/table&gt;</div><div class="line"></div><div class="line"><span class="number">1</span>.本例中使用的是对象数组；</div><div class="line"><span class="number">2</span>.EL表达式访问为：$&#123;数组名[数组下标].元素名&#125;；</div></pre></td></tr></table></figure>
<p>List：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">List department=<span class="keyword">new</span> ArrayList();</div><div class="line">	       department.add(<span class="string">"计算机系"</span>);</div><div class="line">	       department.add(<span class="string">"软件工程系"</span>);</div><div class="line">	       department.add(<span class="string">"电子系"</span>);</div><div class="line">	       request.setAttribute(<span class="string">"department"</span>, department);</div></pre></td></tr></table></figure>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&lt;h3&gt;系别&lt;/h3&gt;</div><div class="line">$&#123;department[<span class="number">0</span>]&#125;&lt;br&gt;</div><div class="line">$&#123;department[<span class="number">1</span>]&#125;&lt;br&gt;</div><div class="line">$&#123;department[<span class="number">2</span>]&#125;</div><div class="line"></div><div class="line"><span class="number">1</span>.本例使用的是一个基本的List;</div><div class="line"><span class="number">2</span>.EL表达式访问为：$&#123;List名[list下标]&#125;,下标从小到大依次访问的是由先到后添加的元素;</div></pre></td></tr></table></figure>
<p>Map:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Map phone=<span class="keyword">new</span> HashMap();</div><div class="line">	phone.put(<span class="string">"home"</span>, <span class="string">"12334-434243"</span>);</div><div class="line">	phone.put(<span class="string">"tel"</span>, <span class="string">"243245647767"</span>);</div><div class="line">	phone.put(<span class="string">"office"</span>, <span class="string">"1435-4141315"</span>);</div><div class="line">	request.setAttribute(<span class="string">"phone"</span>, phone);</div></pre></td></tr></table></figure>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;h3&gt;</div><div class="line">home: $&#123;phone.home&#125;&lt;br&gt;</div><div class="line">tel: $&#123;phone[<span class="string">"tel"</span>] &#125;&lt;br&gt;</div><div class="line">office: $&#123;phone.office&#125;&lt;br&gt;</div><div class="line">&lt;/h3&gt;</div><div class="line"></div><div class="line"><span class="number">1</span>.本例使用的是一个基本的Map；</div><div class="line"><span class="number">2</span>.EL表达式访问为：$&#123;Map名.元素名&#125;或$&#123;Map名[<span class="string">"元素名"</span>]&#125;;</div></pre></td></tr></table></figure>
<h4 id="2-EL内置对象"><a href="#2-EL内置对象" class="headerlink" title="2.EL内置对象"></a>2.EL内置对象</h4><h5 id="1-pageContext"><a href="#1-pageContext" class="headerlink" title="1.pageContext"></a>1.pageContext</h5><p>pageContext对象可以取得与用户请求或服务器相关的信息。它用于访问JSP内置对象，如请求、响应、会话、输出、servletContext等。</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">$&#123;pageContext.request.method&#125;&lt;br&gt;</div><div class="line">$&#123;pageContext.response.characterEncoding&#125;&lt;br&gt;</div><div class="line">$&#123;pageContext.servletContext.contextPath&#125;&lt;br&gt;</div><div class="line">$&#123;pageContext.session.id&#125;</div><div class="line"></div><div class="line"><span class="number">1</span>.由上至下分别是：请求方式、响应的编码方式、上下文路径、session的ID</div></pre></td></tr></table></figure>
<p>result：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">GET</div><div class="line">UTF-8</div><div class="line">/upup</div><div class="line">1D193A2F8E30B76FA5DA4E6D30F61A0B</div></pre></td></tr></table></figure>
<h5 id="2-作用范围相关的内置对象"><a href="#2-作用范围相关的内置对象" class="headerlink" title="2.作用范围相关的内置对象"></a>2.作用范围相关的内置对象</h5><p>使用pageScope、requestScope、sessionScope、applicationScope来读取其作用范围内的值，跟JSP内置对象（可以设置值）搭配使用更佳哦。</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">&lt;!-- 使用JSP内置对象设置属性值--&gt;</div><div class="line">&lt;%</div><div class="line">request.setAttribute(<span class="string">"her"</span>,<span class="string">"王阿姨"</span>);</div><div class="line">session.setAttribute(<span class="string">"her"</span>,<span class="string">"张嘉萍"</span>);</div><div class="line">pageContext.setAttribute(<span class="string">"her"</span>, <span class="string">"陈研妍"</span>);</div><div class="line">application.setAttribute(<span class="string">"her"</span>, <span class="string">"廖若男"</span>);</div><div class="line">%&gt;</div><div class="line"></div><div class="line">&lt;!-- 使用EL内置对象读取属性值 --&gt;</div><div class="line">page：$&#123;pageScope.her&#125;&lt;br&gt;</div><div class="line">request: $&#123;requestScope.her &#125;&lt;br&gt;</div><div class="line">session: $&#123;sessionScope.her &#125;&lt;br&gt;</div><div class="line">application: $&#123;applicationScope.her &#125;&lt;br&gt;</div><div class="line"></div><div class="line"><span class="number">1</span>.很方便；</div></pre></td></tr></table></figure>
<p>result:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">page：陈研妍</div><div class="line">request: 王阿姨</div><div class="line">session: 张嘉萍</div><div class="line">application: 廖若男</div></pre></td></tr></table></figure>
<h5 id="3-与请求参数相关的内置对象"><a href="#3-与请求参数相关的内置对象" class="headerlink" title="3.与请求参数相关的内置对象"></a>3.与请求参数相关的内置对象</h5><p>param：获取传递过来的单值参数的值，相当于请求对象的getParameter( )方法；</p>
<p>paramValues：获取传递过来的多值参数的值，相当于请求对象的getParameterValues( )方法；</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"param.jsp"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></div><div class="line">用户名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"name"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">密    码：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"password"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">兴    趣：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"ins"</span> <span class="attr">value</span>=<span class="string">"sport"</span>&gt;</span>运动</div><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"ins"</span> <span class="attr">value</span>=<span class="string">"music"</span>&gt;</span>音乐</div><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"ins"</span> <span class="attr">value</span>=<span class="string">"draw"</span>&gt;</span>绘画</div><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"ins"</span> <span class="attr">value</span>=<span class="string">"programing"</span>&gt;</span>编程<span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"提交"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"reset"</span> <span class="attr">value</span>=<span class="string">"重置"</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></div><div class="line"></div><div class="line"></div><div class="line">1.name和password都只有一个值，用param方法读取；</div><div class="line">2.ins为多值（可能），用paramValues方法读取,如果用param方法读取，默认为第一个值（ins[0]）;</div></pre></td></tr></table></figure>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&lt;body&gt;</div><div class="line">&lt;%request.setCharacterEncoding(<span class="string">"UTF-8"</span>);%&gt;</div><div class="line">用户名：$&#123;param.name &#125;&lt;br&gt;</div><div class="line">密    码：$&#123;param.password &#125;&lt;br&gt;</div><div class="line">兴    趣：$&#123;paramValues.ins[<span class="number">0</span>] &#125;</div><div class="line">               $&#123;paramValues.ins[<span class="number">1</span>] &#125;</div><div class="line">               $&#123;paramValues.ins[<span class="number">2</span>] &#125;</div><div class="line">               $&#123;paramValues.ins[<span class="number">3</span>] &#125;</div><div class="line">&lt;/body&gt;</div></pre></td></tr></table></figure>
<p>Result:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">用户名：老张</div><div class="line">密 码：123</div><div class="line">兴 趣：sport music draw programing</div></pre></td></tr></table></figure>
<h5 id="4-与请求头相关的内置对象"><a href="#4-与请求头相关的内置对象" class="headerlink" title="4.与请求头相关的内置对象"></a>4.与请求头相关的内置对象</h5><figure class="highlight jsp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">主机名：$&#123;header.host&#125;&lt;br&gt;</div><div class="line">用户浏览器信息：$&#123;header[<span class="string">"User-Agent"</span>] &#125;&lt;br&gt;</div><div class="line">浏览器可接受的MIME类型：$&#123;header.Accept&#125;</div></pre></td></tr></table></figure>
<p>Result:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">主机名：localhost:8080</div><div class="line">用户浏览器信息：Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13) AppleWebKit/604.1.38 (KHTML, like Gecko) Safari/522.0</div><div class="line">浏览器可接受的MIME类型：text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8</div></pre></td></tr></table></figure>
<h5 id="5-cookie内置对象"><a href="#5-cookie内置对象" class="headerlink" title="5.cookie内置对象"></a>5.cookie内置对象</h5><p>1.使用html表单提交用户名信息；（代码略去）</p>
<p>2.使用java创建cookie并将用户名信息上次登录日期写入；(代码略去)</p>
<p>3.在JSP页面使用EL语句输出</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;h2&gt;从Cookie读取登录名和上次登录时间&lt;/h2&gt;</div><div class="line">用户名：$&#123;cookie.name.value &#125;&lt;br&gt;</div><div class="line">上次登录时间：$&#123;cookie.lastCall.value &#125;&lt;br&gt;</div><div class="line"></div><div class="line"><span class="number">1</span>.语句形式为：$&#123;cookie.元素名.value&#125;</div></pre></td></tr></table></figure>
<p>Result：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">从Cookie读取登录名和上次登录时间</div><div class="line"></div><div class="line">用户名：laozhang</div><div class="line">上次登录时间：Sat/Oct/21/21:54:35/CST/2017</div></pre></td></tr></table></figure>
<p>PS:每次使用cooki存储信息时都要注意两点：</p>
<p>1.cookie内不能读取空格（这点多限制与时间信息，使用Date（）方法创建的时间信息会产生空格，这时需要使用string.replaceAll()方法将其中的空格替换掉）；</p>
<p>2.cookie默认不能读取中文，需要在写入和读取时额外加上编码设置语句（一版设置为“utf-8”）,但是EL语句读取时我暂时还不知道应该如何设置编码方式。</p>
<h5 id="6-与初始化参数相关的内置对象"><a href="#6-与初始化参数相关的内置对象" class="headerlink" title="6.与初始化参数相关的内置对象"></a>6.与初始化参数相关的内置对象</h5><p>initParam用户获取web.xml文件中配置的初始化参数。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">param-name</span>&gt;</span>username<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">param-value</span>&gt;</span>system<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">param-name</span>&gt;</span>password<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">param-value</span>&gt;</span>tiger<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;body&gt;</div><div class="line">用户名：$&#123;initParam.username&#125;&lt;br&gt;</div><div class="line">密    码：$&#123;initParam.password&#125;</div><div class="line">&lt;/body&gt;</div></pre></td></tr></table></figure>
<p>Result:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">用户名：system</div><div class="line">密 码：tiger</div></pre></td></tr></table></figure>
<h4 id="3-EL运算符"><a href="#3-EL运算符" class="headerlink" title="3.EL运算符"></a>3.EL运算符</h4><p>EL表达式中，算术运算符、关系运算符、逻辑运算符和条件运算符都和java语句规则相同，不过其也有专有的写法（英文单词），这里不赘述，日后若要使用查阅资料即可。</p>
<p>另，${empty expression}，empty运算符可用来判断expression是否为空，空则输出true，非空则输出false。</p>
<h4 id="4在页面中禁止使用EL表达式"><a href="#4在页面中禁止使用EL表达式" class="headerlink" title="4在页面中禁止使用EL表达式"></a>4在页面中禁止使用EL表达式</h4><p>在JSP页面中可以禁止使用EL表达式，而在JSP页面中输出形如%{expr}的表达式。</p>
<h5 id="1-在当前页面禁用EL表达式"><a href="#1-在当前页面禁用EL表达式" class="headerlink" title="1.在当前页面禁用EL表达式"></a>1.在当前页面禁用EL表达式</h5><p>&lt;%@page isELIgonrd=”true | false”%&gt;  ，选用true（禁用）或false（不禁用）即可；</p>
<h5 id="2-在多个页面禁用"><a href="#2-在多个页面禁用" class="headerlink" title="2.在多个页面禁用"></a>2.在多个页面禁用</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&lt;? xml version="1.0" encoding="UTF-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">version</span>=<span class="string">"2.5"</span></span></div><div class="line"><span class="tag">         <span class="attr">xmlns</span>=<span class="string">"http://java.sun.com/xml/ns/javaee"</span></span></div><div class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></div><div class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://java.sun.com/xml/ns/javaee</span></span></div><div class="line"><span class="tag"><span class="string">         http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">jsp-config</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">jsp-property-group</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/files/*.jsp<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">el-ignored</span>&gt;</span>true<span class="tag">&lt;/<span class="name">el-ignored</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">jsp-property-group</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">jsp-config</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></div></pre></td></tr></table></figure>
<p>通过上述配置，禁用/files目录中所有的JSP页面使用EL表达式。</p>
<h5 id="3-在当前web应用中的所有JSP页面中使用EL表达式"><a href="#3-在当前web应用中的所有JSP页面中使用EL表达式" class="headerlink" title="3.在当前web应用中的所有JSP页面中使用EL表达式"></a>3.在当前web应用中的所有JSP页面中使用EL表达式</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;? xml version="1.0" encoding="UTF-8"?&gt;</div><div class="line"><span class="meta">&lt;!DOCTYPE web-app</span></div><div class="line"><span class="meta">    PUBLIC "-//sun Microsystems,Inc.//DTD Web Application 2.3//EN"</span></div><div class="line"><span class="meta">    "http://java.sun.com/dtd/web-app_2_3.dtd"&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">web-app</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></div></pre></td></tr></table></figure>
<p>在web.xml中定义web-app的版本号为2.3，这样所有的JSP都无法使用EL表达式，因为EL表达式从2.4版本开始支持。</p>
<h3 id="9-JSP标签"><a href="#9-JSP标签" class="headerlink" title="9.JSP标签"></a>9.JSP标签</h3><p>JSP标签的引用可以有效的消除JSP页面中的java代码，实现java代码的重要。在JSP页面编辑中，界面显示和程序代码通常是由美工和程序员共同完成的，如果在JSP页面含有大量的java代码，一般情况下会影响美工的界面设计工作。在大中型项目开发中使用JSP标签，有利于团队合作开发，方便后期维护和修改，使得项目更加规范和美观。</p>
<h4 id="1-自定义标签"><a href="#1-自定义标签" class="headerlink" title="1.自定义标签"></a>1.自定义标签</h4><h5 id="开发步骤"><a href="#开发步骤" class="headerlink" title="开发步骤"></a>开发步骤</h5><p>（1）编写实现了SimpleTag接口的标签处理类，将JSP中的java代码转移到标签处理类中。在实际编程中，标签处理类通常继承SimpleTagSupport，然后去覆盖该类中的doTag（）方法，实现标签逻辑。</p>
<p>（2）编写标签描述符（*.tld）文件，在tld文件中把标签处理器类型描述成一个标签，并把tld文件放置在WebContent-&gt;WEB-INF下。</p>
<p>（3）在JSP文件的page属性中设置对tld的引用，然后在页面主体中使用。</p>
<h5 id="实例-1"><a href="#实例-1" class="headerlink" title="实例"></a>实例</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> JSPbq;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> java.io.StringWriter;</div><div class="line"><span class="keyword">import</span> javax.servlet.jsp.JspException;</div><div class="line"><span class="keyword">import</span> javax.servlet.jsp.tagext.JspFragment;</div><div class="line"><span class="keyword">import</span> javax.servlet.jsp.tagext.SimpleTagSupport;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MysimpleTag4</span>  <span class="keyword">extends</span> <span class="title">SimpleTagSupport</span></span>&#123;<span class="comment">//通过SimpleTagSupport接口实现；</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doTag</span><span class="params">()</span> <span class="keyword">throws</span> JspException,IOException <span class="comment">//创建doTag（）方法；</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		JspFragment jf=<span class="keyword">this</span>.getJspBody();</div><div class="line">      <span class="comment">//获取JSP页面</span></div><div class="line">		StringWriter sw=<span class="keyword">new</span> StringWriter();</div><div class="line">		jf.invoke(sw);</div><div class="line">      <span class="comment">//将标签内容写到sw</span></div><div class="line">		String str=sw.toString();</div><div class="line">      <span class="comment">//将标签内容读取到字符串</span></div><div class="line">		str=str.toUpperCase();</div><div class="line">      <span class="comment">//将字符串转为大写</span></div><div class="line">		<span class="keyword">this</span>.getJspContext().getOut().write(str);</div><div class="line">      <span class="comment">//将修改后的字符串，写到浏览器</span></div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">taglib</span> <span class="attr">xmlns</span>=<span class="string">"http://java.sun.com/xml/ns/j2ee"</span></span></div><div class="line"><span class="tag">    <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></div><div class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-jsptaglibrary_2_0.xsd"</span></span></div><div class="line"><span class="tag">    <span class="attr">version</span>=<span class="string">"2.0"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">tlib-version</span>&gt;</span>1.0<span class="tag">&lt;/<span class="name">tlib-version</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">short-name</span>&gt;</span>imut<span class="tag">&lt;/<span class="name">short-name</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">uri</span>&gt;</span>http://www.imut.edu.cn<span class="tag">&lt;/<span class="name">uri</span>&gt;</span></div><div class="line"> <span class="tag">&lt;<span class="name">tag</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>myTag4<span class="tag">&lt;/<span class="name">name</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">tag-class</span>&gt;</span>JSPbq.MysimpleTag4<span class="tag">&lt;/<span class="name">tag-class</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">body-content</span>&gt;</span>scriptless<span class="tag">&lt;/<span class="name">body-content</span>&gt;</span></div><div class="line"> <span class="tag">&lt;/<span class="name">tag</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">taglib</span>&gt;</span></div><div class="line"></div><div class="line">1.tld文件本质上是xml文件,一般要有xml文件描述和版本信息；</div><div class="line">2.<span class="tag">&lt;<span class="name">taglib</span>&gt;</span>是根目录，<span class="tag">&lt;<span class="name">tlib-version</span>&gt;</span>是tld文件版本，这两个标签必不可少；</div><div class="line">3.在<span class="tag">&lt;<span class="name">taglib</span>&gt;</span>根目录下可以新开无数个<span class="tag">&lt;<span class="name">tag</span>&gt;</span>目录，用来存放创建的自定义的标签的name、先关联的class路径等信息。</div></pre></td></tr></table></figure>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></div><div class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</div><div class="line">&lt;%<span class="meta">@taglib</span> uri=<span class="string">"http://www.imut.edu.cn"</span> prefix=<span class="string">"imut"</span>%&gt;</div><div class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span>&gt;</div><div class="line">&lt;title&gt;修改标签体&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">      &lt;imut:myTag4&gt;</div><div class="line">         This my JSP page.&lt;br&gt;</div><div class="line">      &lt;/imut:myTag4&gt;</div><div class="line"></div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div><div class="line"></div><div class="line"><span class="number">1</span>.在taglib标签内设置引用自定义标签，输入对应的uri（自定义的tld文件路径）和prefix(为了易于引用所起的别名)；</div><div class="line"><span class="number">2</span>.在JSp页面中使用&lt;prefix值:name值&gt;即可引用自定义标签，本例中是&lt;imut:mtTag4&gt;</div></pre></td></tr></table></figure>
<h5 id="实例二"><a href="#实例二" class="headerlink" title="实例二"></a>实例二</h5><p>通过自定义标签输出list、map、数组；</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> JSPbq;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> java.lang.reflect.Array;</div><div class="line"><span class="keyword">import</span> java.util.ArrayList;</div><div class="line"><span class="keyword">import</span> java.util.Collection;</div><div class="line"><span class="keyword">import</span> java.util.Iterator;</div><div class="line"><span class="keyword">import</span> java.util.Map;</div><div class="line"><span class="keyword">import</span> javax.servlet.jsp.JspException;</div><div class="line"><span class="keyword">import</span> javax.servlet.jsp.tagext.SimpleTagSupport;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ForEach</span> <span class="keyword">extends</span> <span class="title">SimpleTagSupport</span></span>&#123;</div><div class="line">	<span class="keyword">private</span> Object items;</div><div class="line">	<span class="keyword">private</span> String var;</div><div class="line">	<span class="keyword">private</span> Collection collection;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setItems</span><span class="params">(Object items)</span><span class="comment">//Object对象items的set方法；此外将得到的items对象（不论为何种对象）转化为集合型（Collection），转型的目的是为了便于在JSP中进行输出;</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		<span class="keyword">this</span>.items=items;</div><div class="line">		<span class="keyword">if</span>(items <span class="keyword">instanceof</span> Collection)<span class="comment">//将set和list型转为collection型（因为Set和List都是基于其父接口Collection的，所以这里只需进行“instanceof Collection”判断）</span></div><div class="line">		&#123;</div><div class="line">			collection=(Collection)items;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">if</span>(items <span class="keyword">instanceof</span> Map)<span class="comment">//将Map型进行转型；</span></div><div class="line">		&#123;</div><div class="line">			Map map=(Map) items;</div><div class="line">			collection=map.entrySet();<span class="comment">//map有专用的返回collection对象的方法，无需使用强制转换；</span></div><div class="line">		&#125;</div><div class="line">		<span class="keyword">if</span>(items.getClass().isArray())<span class="comment">//将数组进行转型</span></div><div class="line">		&#123;</div><div class="line">			<span class="keyword">this</span>.collection=<span class="keyword">new</span> ArrayList();</div><div class="line">			<span class="keyword">int</span> len=Array.getLength(items);</div><div class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;len;i++)</div><div class="line">			&#123;</div><div class="line">				Object obj=Array.get(items, i);<span class="comment">//获取数组items中下标为i的元素；（事实上此方法可以用来实现可能为数组类型的对象的迭代（搭配是否为数组的判断语句来使用））</span></div><div class="line">				collection.add(obj);<span class="comment">//将获取元素加入collection中（其为ArrayList（）型）,分析到这里我感觉简单概括为“统一转为collection便于输出”有些太笼统了，实际上只要能够使用Iterator接口进行遍历的类型都符合此例的要求，如此一来迫切需要转型的对象也就只有Map型和Array型了。</span></div><div class="line">			&#125;</div><div class="line">		</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setVar</span><span class="params">(String var)</span><span class="comment">//var的set方法；</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		<span class="keyword">this</span>.var=var;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doTag</span><span class="params">()</span> <span class="keyword">throws</span> JspException,IOException<span class="comment">//doTag（）方法；</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		Iterator iter=<span class="keyword">this</span>.collection.iterator();<span class="comment">//创建基于Iterator接口的遍历对象；</span></div><div class="line">		<span class="keyword">while</span>(iter.hasNext())</div><div class="line">		&#123;</div><div class="line">			Object obj=iter.next();</div><div class="line">			<span class="keyword">this</span>.getJspContext().setAttribute(var, obj);<span class="comment">//将遍历取出的元素放入pageContext中；</span></div><div class="line">			<span class="keyword">this</span>.getJspBody().invoke(<span class="keyword">null</span>);<span class="comment">//执行标签体；</span></div><div class="line">		&#125;</div><div class="line">		</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div></pre></td><td class="code"><pre><div class="line">&lt;%<span class="meta">@page</span> language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></div><div class="line">    pageEncoding=<span class="string">"UTF-8"</span> <span class="keyword">import</span>=<span class="string">"java.util.*"</span>%&gt;</div><div class="line">&lt;%<span class="meta">@taglib</span> uri=<span class="string">"http://www.imut.edu.cn"</span> prefix=<span class="string">"imut"</span>%&gt;</div><div class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span>&gt;</div><div class="line">&lt;title&gt;实现JSTL中的ForEach功能&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">&lt;% </div><div class="line">List list=<span class="keyword">new</span> ArrayList();</div><div class="line">list.add(<span class="string">"《Harry Potter》"</span>);</div><div class="line">list.add(<span class="string">"《连城诀》"</span>);</div><div class="line">list.add(<span class="string">"《无情剑客有情剑》"</span>);</div><div class="line">list.add(<span class="string">"《碧血洗银枪》"</span>);</div><div class="line">request.setAttribute(<span class="string">"list"</span>,list);<span class="comment">//创建并赋值一个list对象，并写到request中（我猜写入request是为便于标签的引用，下面类似）</span></div><div class="line">%&gt;</div><div class="line">  <span class="comment">//标签向ForEach.java传递参数，就本句而言，将上面写入request的“list”对象传递给this.items，var变量存放的字符串传递给this.var（待会儿作为对象名使用），接着就按照ForEach.java所写的流程运作：items对象转型为collection型对象，遍历，将元素以var（也就是bookName）为名写入pageContext。回到jsp页面，在自定义标签中输出名为bookName的对象的值即可。（因为在java方法中是一边遍历一边提取元素一边写入标签，所以元素输出不是一次性完成的）</span></div><div class="line">&lt;imut:ForEach var=<span class="string">"bookName"</span> items=<span class="string">"$&#123;list&#125;"</span>&gt;</div><div class="line">        $&#123;bookName&#125;&lt;br&gt;</div><div class="line">&lt;/imut:ForEach&gt;</div><div class="line">&lt;br&gt;</div><div class="line">&lt;br&gt;</div><div class="line">&lt;%</div><div class="line">Map map=<span class="keyword">new</span> HashMap();</div><div class="line">map.put(<span class="string">"《Harry Potty》"</span>, <span class="number">50</span>);</div><div class="line">map.put(<span class="string">"《连城诀》"</span>, <span class="number">60</span>);</div><div class="line">map.put(<span class="string">"《无情剑客有情剑》"</span>,<span class="number">70</span>);</div><div class="line">map.put(<span class="string">"《碧血洗银枪》"</span>,<span class="number">80</span>);</div><div class="line">request.setAttribute(<span class="string">"map1"</span>,map);</div><div class="line">%&gt;</div><div class="line">&lt;imut:ForEach var=<span class="string">"entry"</span> items=<span class="string">"$&#123;map1&#125;"</span>&gt;</div><div class="line">     $&#123;entry.key&#125;---$&#123;entry.value&#125;&lt;br&gt;</div><div class="line">&lt;/imut:ForEach&gt;</div><div class="line">&lt;br&gt;</div><div class="line">&lt;br&gt;</div><div class="line">&lt;%</div><div class="line">Integer[]num=&#123;<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">9</span>&#125;;</div><div class="line">request.setAttribute(<span class="string">"num"</span>,num);</div><div class="line">%&gt;</div><div class="line">&lt;imut:ForEach var=<span class="string">"i1"</span> items=<span class="string">"$&#123;num&#125;"</span>&gt;</div><div class="line">        $&#123;i1&#125;&lt;br&gt;</div><div class="line">&lt;/imut:ForEach&gt;</div><div class="line">&lt;br&gt;</div><div class="line">&lt;br&gt;</div><div class="line">&lt;%</div><div class="line"><span class="keyword">int</span> []arr=&#123;<span class="number">2</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">8</span>,<span class="number">10</span>&#125;;</div><div class="line">request.setAttribute(<span class="string">"arr"</span>,arr);</div><div class="line">%&gt;</div><div class="line">&lt;imut:ForEach var=<span class="string">"i"</span> items=<span class="string">"$&#123;arr&#125;"</span>&gt;</div><div class="line">     $&#123;i&#125;&lt;br&gt;</div><div class="line">&lt;/imut:ForEach&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure>
<p><img src="/Users/zhangxuan/Pictures/截图/自定义标签.png" style="zoom:50%"></p>
<h4 id="2-JSTL核心标签库"><a href="#2-JSTL核心标签库" class="headerlink" title="2.JSTL核心标签库"></a>2.JSTL核心标签库</h4><p>c系列标签；</p>
<h5 id="1-表达式标签"><a href="#1-表达式标签" class="headerlink" title="1.表达式标签"></a>1.表达式标签</h5><p>c:out. 用来输出数据对象的内容。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></div><div class="line">    pageEncoding=<span class="string">"UTF-8"</span> <span class="keyword">import</span>=<span class="string">"java.util.*"</span>%&gt;</div><div class="line">&lt;%<span class="meta">@taglib</span> uri=<span class="string">"http://java.sun.com/jsp/jstl/core"</span> prefix=<span class="string">"c"</span>%&gt;</div><div class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span>&gt;</div><div class="line">&lt;title&gt;Insert title here&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">&lt;% pageContext.setAttribute(<span class="string">"school"</span>,<span class="string">"JiangNanUniversity"</span>);%&gt;</div><div class="line">&lt;% request.setAttribute(<span class="string">"text"</span>,<span class="string">"hello,world!"</span>); %&gt;</div><div class="line">&lt;%session.setAttribute(<span class="string">"want"</span>,<span class="string">"girls and money"</span>);%&gt;</div><div class="line">&lt;c:out value=<span class="string">"$&#123;want&#125;"</span>/&gt;&lt;br&gt;  <span class="comment">//输出对象中存放的值</span></div><div class="line">&lt;c:out value=<span class="string">"information  project college"</span>/&gt;&lt;br&gt;  <span class="comment">//输出指定值</span></div><div class="line">&lt;c:out value=<span class="string">"$&#123; school&#125;"</span> <span class="keyword">default</span>=<span class="string">"sorry,the value you find is null"</span>/&gt;&lt;br&gt; <span class="comment">//输出值为空则输出提示信息</span></div><div class="line">&lt;c:out value="$&#123;school&#125;"&gt;no value that you find&lt;/c:out&gt;//输出值为空则输出提示信息</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure>
<p>c:set  :用于设置作用域变量或者对象属性值。</p>
<p>c:remove ：用于从作用域中删除变量。</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></div><div class="line">    pageEncoding=<span class="string">"UTF-8"</span> <span class="keyword">import</span>=<span class="string">"JSPbq.SimpleBean"</span>%&gt;</div><div class="line">&lt;%<span class="meta">@taglib</span> uri=<span class="string">"http://java.sun.com/jsp/jstl/core"</span> prefix=<span class="string">"c"</span>%&gt;</div><div class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span>&gt;</div><div class="line">&lt;title&gt;c:set and c:remove&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">&lt;c:set var=<span class="string">"website"</span> value=<span class="string">"www.imut.edu.cn"</span> scope=<span class="string">"request"</span>/&gt;<span class="comment">//新建一个变量并赋值，限定作用域为request。</span></div><div class="line">输出变量值:$&#123;requestScope.website&#125;&lt;br&gt;<span class="comment">//使用el表达式输出上面新建变量的值</span></div><div class="line">&lt;%</div><div class="line">SimpleBean bean=<span class="keyword">new</span> SimpleBean();%&gt;</div><div class="line"><span class="comment">//SimpleBean是一个具有private属性info的class（其java代码是SimpleBean本身的无参构造方法和info属性的get、set方法，代码省略）</span></div><div class="line">&lt;h1&gt;&lt;%=bean.getinfo()%&gt;&lt;/h1&gt;//这里尝试输出调用getinfo方法输出info变量的值，结果自然为“null”</div><div class="line">&lt;%</div><div class="line">request.setAttribute(<span class="string">"simple"</span>,bean);<span class="comment">//bean对象赋给request中simple对象</span></div><div class="line">%&gt;</div><div class="line">&lt;c:set value=<span class="string">"I like JiangNanUniversity"</span> target=<span class="string">"$&#123;simple &#125;"</span> property=<span class="string">"info"</span>/&gt;</div><div class="line">  <span class="comment">//使用set标签赋值给simple对象的info属性。</span></div><div class="line">输出JavaBean对象属性info的值：$&#123;requestScope.simple.info&#125;&lt;br&gt;</div><div class="line">&lt;c:remove var=<span class="string">"simple"</span>/&gt; <span class="comment">//remove语句删除simple对象</span></div><div class="line">remove后,info：$&#123;simple.info&#125;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div><div class="line"></div><div class="line"><span class="number">1</span>.第一个赋值是set语句赋值给变量</div><div class="line"><span class="number">2</span>.第二个赋值是set语句赋值给对象（对象的属性值）</div></pre></td></tr></table></figure>
<p>c:catch.  :处理产生错误的异常情况，并将信息保存起来（可使用输出语句输出异常信息）</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></div><div class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</div><div class="line"> &lt;%<span class="meta">@taglib</span> uri=<span class="string">"http://java.sun.com/jsp/jstl/core"</span> prefix=<span class="string">"c"</span> %&gt;</div><div class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span>&gt;</div><div class="line">&lt;title&gt;Insert title here&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">&lt;c:<span class="keyword">catch</span> var=<span class="string">"error"</span>&gt;<span class="comment">//捕捉位于catch标签内的异常，并存放在error变量中</span></div><div class="line">   &lt;%<span class="keyword">int</span> i=<span class="number">5</span>/<span class="number">0</span>; %&gt;</div><div class="line">&lt;/c:catch&gt;</div><div class="line">error is:$&#123;error&#125;    <span class="comment">//利用el语句输出异常信息；</span></div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure>
<h5 id="2-流程控制标签"><a href="#2-流程控制标签" class="headerlink" title="2.流程控制标签"></a>2.流程控制标签</h5><p>c:if    判断为真，则执行标签内的语句；</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></div><div class="line">    pageEncoding=<span class="string">"UTF-8"</span> <span class="keyword">import</span>=<span class="string">"java.util.*"</span> %&gt;</div><div class="line">&lt;%<span class="meta">@taglib</span> uri=<span class="string">"http://java.sun.com/jsp/jstl/core"</span> prefix=<span class="string">"c"</span> %&gt;</div><div class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span>&gt;</div><div class="line">&lt;title&gt;c:if&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">&lt;c:set var=<span class="string">"username"</span> value=<span class="string">"imut"</span> scope=<span class="string">"page"</span>/&gt;<span class="comment">//给变量“username”赋值“imut”</span></div><div class="line">&lt;c:<span class="keyword">if</span> test=<span class="string">"$&#123;username=='imut' &#125;"</span> var=<span class="string">"result"</span> scope=<span class="string">"page"</span>&gt; 判断username的值是否为“imut”</div><div class="line">条件为真时,条件结果为：$&#123;result&#125;&lt;br&gt;</div><div class="line">                      变量的值为：$&#123;username&#125;&lt;br&gt;</div><div class="line">&lt;/c:if&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure>
<p>c:choose  、c:when 、c:otherwise   情况更多时候的判断</p>
<p>结构为：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;c:choose&gt;</div><div class="line">  &lt;c:when test=""&gt;&lt;/c:when&gt;</div><div class="line">  &lt;c:when test=""&gt;&lt;/c:when&gt;</div><div class="line">  &lt;c:otherwise&gt;   &lt;/c:otherwise&gt;</div><div class="line">&lt;/c:choose&gt;</div></pre></td></tr></table></figure>
<p>作用跟if-else一样：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span>()&#123;&#125;</div><div class="line"><span class="keyword">else</span> <span class="keyword">if</span>()&#123;&#125;</div><div class="line"><span class="keyword">else</span> <span class="keyword">if</span>()&#123;&#125;</div><div class="line"><span class="keyword">else</span> &#123;&#125;</div></pre></td></tr></table></figure>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line">&lt;!DOCTYPE html&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta charset=<span class="string">"UTF-8"</span>&gt;</div><div class="line">&lt;title&gt;put choose value&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">&lt;form action=<span class="string">"ChooseJSP.jsp"</span>  method=<span class="string">"post"</span>&gt;</div><div class="line">please input your score:&lt;input type=<span class="string">"text"</span> name=<span class="string">"num"</span>&gt;&lt;br&gt;</div><div class="line">&lt;input type=<span class="string">"submit"</span> value=<span class="string">"submit"</span>&gt;</div><div class="line">&lt;/form&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></div><div class="line">    pageEncoding=<span class="string">"UTF-8"</span> <span class="keyword">import</span>=<span class="string">"java.util.*"</span>%&gt;</div><div class="line">&lt;%<span class="meta">@taglib</span> uri=<span class="string">"http://java.sun.com/jsp/jstl/core"</span> prefix=<span class="string">"c"</span> %&gt;</div><div class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span>&gt;</div><div class="line">&lt;title&gt;Insert title here&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">&lt;%</div><div class="line"><span class="keyword">int</span> sum=<span class="number">0</span>;</div><div class="line">String num=(String)request.getParameter(<span class="string">"num"</span>); <span class="comment">//读取从html页面表单提交的参数要用getParameter而非getAttribute</span></div><div class="line"><span class="keyword">if</span>(num!=<span class="keyword">null</span>)</div><div class="line">&#123;</div><div class="line">sum=Integer.parseInt(num);</div><div class="line">&#125;</div><div class="line"><span class="keyword">else</span> sum=<span class="number">80</span>;</div><div class="line">%&gt;</div><div class="line"></div><div class="line">&lt;c:set var=<span class="string">"score"</span> value=<span class="string">"&lt;%=sum%&gt;"</span>/&gt;</div><div class="line">&lt;c:choose&gt;</div><div class="line">     &lt;c:when test="$&#123;score&gt;=90&#125;"&gt;你的成绩为优秀&lt;/c:when&gt;</div><div class="line">     &lt;c:when test="$&#123;score&gt;=75 &amp;&amp; score&lt;90&#125;"&gt;你的成绩为良好&lt;/c:when&gt;</div><div class="line">     &lt;c:when test="$&#123;score&lt;75 &amp;&amp; score&gt;=60&#125;"&gt;你的成绩为及格&lt;/c:when&gt;</div><div class="line">     &lt;c:otherwise&gt;你没有通过考试&lt;/c:otherwise&gt;</div><div class="line">&lt;/c:choose&gt;</div><div class="line">成绩为：&lt;%=sum%&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div><div class="line"></div><div class="line"><span class="number">1</span>.写了一个html页面，键入数字，然后提交到jsp页面</div><div class="line"><span class="number">2</span>.使用&lt;c:choose&gt;标签来对数字进行判断并输出对应结果</div></pre></td></tr></table></figure>
<h5 id="3-循环标签"><a href="#3-循环标签" class="headerlink" title="3.循环标签"></a>3.循环标签</h5><p>c:forEach    用于循环控制，可以遍历变量和集合中的元素。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></div><div class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</div><div class="line">&lt;%<span class="meta">@taglib</span> uri=<span class="string">"http://java.sun.com/jsp/jstl/core"</span> prefix=<span class="string">"c"</span> %&gt;</div><div class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span>&gt;</div><div class="line">&lt;title&gt;循环&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">&lt;table border=<span class="string">"1"</span>&gt;</div><div class="line">&lt;tr&gt;</div><div class="line">&lt;td&gt;x的值&lt;/td&gt;</div><div class="line">&lt;td&gt;varStatus.index&lt;/td&gt;</div><div class="line">&lt;td&gt;varStatus.count&lt;/td&gt;</div><div class="line">&lt;td&gt;varStatus.first&lt;/td&gt;</div><div class="line">&lt;td&gt;varStatus.last&lt;/td&gt;</div><div class="line">&lt;/tr&gt;</div><div class="line">&lt;c:forEach var=<span class="string">"x"</span> varStatus=<span class="string">"status"</span> begin=<span class="string">"0"</span> end=<span class="string">"9"</span> step=<span class="string">"3"</span>&gt;</div><div class="line">  <span class="comment">//设定循环变量为x，此次循环名为status，从0开始循环到9结束，变量一次增加3（相当于i+=3）</span></div><div class="line">&lt;tr&gt;</div><div class="line">     &lt;td&gt;$&#123;x &#125;&lt;/td&gt;</div><div class="line">     &lt;td&gt;$&#123;status.index &#125;&lt;/td&gt;     //当前循环的值</div><div class="line">     &lt;td&gt;$&#123;status.count &#125;&lt;/td&gt;     //当前循环次数</div><div class="line">     &lt;td&gt;$&#123;status.first&#125;&lt;/td&gt;      //当前是否为第一次循环（true|false）</div><div class="line">     &lt;td&gt;$&#123;status.last &#125;&lt;/td&gt;      //当前是否为最后一次循环（true|false）</div><div class="line">&lt;/tr&gt;</div><div class="line">&lt;/c:forEach&gt;</div><div class="line">&lt;/table&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure>
<p>运行结果：</p>
<p><img src="/Users/zhangxuan/Pictures/截图/循环1.png" style="zoom:50%"></p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> JSPbq;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</div><div class="line">	<span class="keyword">private</span> String username;</div><div class="line">	<span class="keyword">private</span> String password;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">()</span> </span>&#123;	</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getUsername</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> username;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setUsername</span><span class="params">(String username)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.username = username;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getPassword</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> password;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPassword</span><span class="params">(String password)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.password = password;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></div><div class="line">    pageEncoding=<span class="string">"UTF-8"</span> <span class="keyword">import</span>=<span class="string">"JSPbq.User,java.util.*"</span>%&gt;</div><div class="line">&lt;%<span class="meta">@taglib</span> uri=<span class="string">"http://java.sun.com/jsp/jstl/core"</span> prefix=<span class="string">"c"</span>%&gt;</div><div class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span>&gt;</div><div class="line">&lt;title&gt;循环2&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">&lt;%</div><div class="line">List users=<span class="keyword">new</span> ArrayList();</div><div class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)&#123;</div><div class="line">	User user=<span class="keyword">new</span> User();</div><div class="line">	user.setUsername(<span class="string">"user"</span>+i);</div><div class="line">	user.setPassword(<span class="string">"pass"</span>+i);</div><div class="line">	users.add(user);       <span class="comment">//循环定义user对象并写入List</span></div><div class="line">&#125;</div><div class="line">session.setAttribute(<span class="string">"users"</span>, users);   <span class="comment">//将List对象写入session</span></div><div class="line">%&gt;</div><div class="line">&lt;c:forEach items=<span class="string">"$&#123;users&#125;"</span> var=<span class="string">"user"</span>&gt;  <span class="comment">//遍历输出集合元素</span></div><div class="line">      用户名：$&#123;user.username &#125;----密码：$&#123;user.password&#125;&lt;br&gt;</div><div class="line">&lt;/c:forEach&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure>
<p>运行结果：</p>
<p><img src="/Users/zhangxuan/Pictures/截图/循环2.png" style="zoom:50%"></p>
<p>c:fortokens.  用于浏览字符串中的成员，可以指定一个或者多个分隔符。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></div><div class="line">    pageEncoding=<span class="string">"UTF-8"</span> <span class="keyword">import</span>=<span class="string">"java.util.*"</span>%&gt;</div><div class="line">&lt;%<span class="meta">@taglib</span> uri=<span class="string">"http://java.sun.com/jsp/jstl/core"</span> prefix=<span class="string">"c"</span>%&gt;</div><div class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span>&gt;</div><div class="line">&lt;title&gt;循环&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">&lt;c:set var=<span class="string">"user"</span> value=<span class="string">"username=zhangsan;password=123"</span>/&gt; <span class="comment">//给变量user赋值</span></div><div class="line">&lt;c:forTokens items=<span class="string">"$&#123;user &#125;"</span> delims=<span class="string">";"</span> var=<span class="string">"infos"</span>&gt;  <span class="comment">//输出user值，以“；”为分隔，将其中分隔的片段赋给变量infos</span></div><div class="line">     &lt;c:forTokens items=<span class="string">"$&#123;infos&#125;"</span> delims=<span class="string">"="</span> var=<span class="string">"info"</span>&gt;  <span class="comment">//输出infos值，以“=”为分隔。</span></div><div class="line">             $&#123;info&#125;&lt;br&gt;</div><div class="line">     &lt;/c:forTokens&gt;</div><div class="line">&lt;/c:forTokens&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure>
<p>运行结果：</p>
<p>username<br>zhangsan<br>password<br>123</p>
<h5 id="4-url相关标签"><a href="#4-url相关标签" class="headerlink" title="4.url相关标签"></a>4.url相关标签</h5><p><c:param>.  用于将参数传递给所包含的文件，主要用在<c:import>、<c:url>、<c:redirect>标签中指定请求参数。</c:redirect></c:url></c:import></c:param></p>
<p>C:import  用于将静态或动态文件包含到jsp页面中</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></div><div class="line">    pageEncoding=<span class="string">"UTF-8"</span> <span class="keyword">import</span>=<span class="string">"java.util.*"</span>%&gt;</div><div class="line">  &lt;%<span class="meta">@taglib</span> uri=<span class="string">"http://java.sun.com/jsp/jstl/core"</span> prefix=<span class="string">"c"</span>%&gt;</div><div class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span>&gt;</div><div class="line">&lt;title&gt;c：import&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">&lt;c:<span class="keyword">import</span>  url=<span class="string">"https://lao-zhang.github.io"</span> charEncoding=<span class="string">"utf-8"</span>/&gt;  <span class="comment">//可引用网站（动态文件）</span></div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure>
<p>C:redirect :用于将客户端请求从一个jsp页面重定向到其他页面</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></div><div class="line">    pageEncoding=<span class="string">"UTF-8"</span> <span class="keyword">import</span>=<span class="string">"java.util.*"</span>%&gt;</div><div class="line">    &lt;%<span class="meta">@taglib</span> uri=<span class="string">"http://java.sun.com/jsp/jstl/core"</span> prefix=<span class="string">"c"</span>%&gt;</div><div class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span>&gt;</div><div class="line">&lt;title&gt;重定向&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">&lt;c:redirect url=<span class="string">"redirect2.jsp"</span>&gt;     <span class="comment">//重定向到redirect2.jsp页面 并使用&lt;c:param&gt;标签发送参数</span></div><div class="line">     &lt;c:param name=<span class="string">"username"</span> value=<span class="string">"zhangsan"</span>/&gt;</div><div class="line">     &lt;c:param name=<span class="string">"age"</span> value=<span class="string">"20"</span>/&gt;</div><div class="line">&lt;/c:redirect&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></div><div class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</div><div class="line">    &lt;%<span class="meta">@taglib</span> uri=<span class="string">"http://java.sun.com/jsp/jstl/core"</span> prefix=<span class="string">"c"</span>%&gt;</div><div class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span>&gt;</div><div class="line">&lt;title&gt;重定向2&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">此页面为重定向之后的页面&lt;br&gt;         </div><div class="line">您的姓名：$&#123;param.username&#125;&lt;br&gt;        <span class="comment">//使用el语句输出从转发源获取的参数</span></div><div class="line">您的年龄：$&#123;param.age&#125;&lt;br&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure>
<p>c:url : 用于生成一个URL</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></div><div class="line">    pageEncoding=<span class="string">"UTF-8"</span> <span class="keyword">import</span>=<span class="string">"java.util.*"</span>%&gt;</div><div class="line">&lt;%<span class="meta">@taglib</span> uri=<span class="string">"http://java.sun.com/jsp/jstl/core"</span> prefix=<span class="string">"c"</span>%&gt;</div><div class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span>&gt;</div><div class="line">&lt;title&gt;Insert title here&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line"></div><div class="line">&lt;a href=<span class="string">"&lt;c:url  value="</span>https:<span class="comment">//lao-zhang.github.io"/&gt; "&gt;</span></div><div class="line">laozhang blog&lt;/a&gt;           //搭配&lt;a href&gt;标签使用</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure>
</jsp:usebean>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/08/10/JAVA WEB（2）/" data-id="cjefnd2580000rt76gpwercyh" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
    
</article>

  
    <article id="post-Java Web" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/08/05/Java Web/" class="article-date">
  <time datetime="2017-08-04T16:00:00.000Z" itemprop="datePublished">2017-08-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/08/05/Java Web/">java web(1)</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <a id="more"></a>
<p>Java Web</p>
<p>（写在前面：javaSE的学习接近尾声的时候，需要来点新鲜货了，学习java web正是时候。话不多说，学就完事儿了。）</p>
<h3 id="1-环境配置"><a href="#1-环境配置" class="headerlink" title="1.环境配置"></a>1.环境配置</h3><p>1」.下载安装tomcat（以前还没发现这是汤姆猫），配置环境变量。</p>
<p>2」.下载tomcat集成插件（针对eclipse），包含到其库内。</p>
<p>3」.将tomcat集成到eclipse中，创建tomcat服务器。</p>
<h3 id="2-Servlet基础"><a href="#2-Servlet基础" class="headerlink" title="2.Servlet基础"></a>2.Servlet基础</h3><h5 id="（1）编写第一个Servlet程序"><a href="#（1）编写第一个Servlet程序" class="headerlink" title="（1）编写第一个Servlet程序"></a>（1）编写第一个Servlet程序</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> weekend;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> java.io.PrintWriter;</div><div class="line"><span class="keyword">import</span> javax.servlet.ServletException;</div><div class="line"><span class="keyword">import</span> javax.servlet.annotation.WebInitParam;</div><div class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FirstServlet</span>  <span class="keyword">extends</span> <span class="title">HttpServlet</span></span>&#123;</div><div class="line">  <span class="comment">//继承自HttpServlet类</span></div><div class="line">	<span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req,HttpServletResponse resq)</span></span></div><div class="line"><span class="function">	<span class="keyword">throws</span> ServletException,IOException</span></div><div class="line"><span class="function">  <span class="comment">//doGet方法，定义FirstServlet类的操作内容，使用了Servlet和IO接口；</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		resq.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</div><div class="line">      <span class="comment">//设置响应的文本类型和编码方式；</span></div><div class="line">		PrintWriter out=resq.getWriter();</div><div class="line">      <span class="comment">//通过输出流向客户端浏览器作出响应；</span></div><div class="line">		out.println(<span class="string">"&lt;HTML&gt;&lt;HEAD&gt;&lt;TITLE&gt;hello world&lt;/TITLE&gt;&lt;/HEAD&gt;"</span>);</div><div class="line">		out.println(<span class="string">"&lt;font size=5 color=red&gt;hello,world!!!"</span>);</div><div class="line">		out.println(<span class="string">"&lt;/font&gt;&lt;/BODY&gt;&lt;/HTML&gt;"</span>);</div><div class="line">      <span class="comment">//输出内容用Html方式写成（这样写还真是麻烦）；</span></div><div class="line">		out.close();</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req,HttpServletResponse resp)</span></span></div><div class="line"><span class="function">	<span class="keyword">throws</span> ServletException,IOException</span></div><div class="line"><span class="function">      <span class="comment">//doPost，调用上面的doGet方法；</span></span></div><div class="line"><span class="function">    </span>&#123;</div><div class="line">		doGet(req,resp);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>光靠上面代码并不能正常运行起来，这时候需要在工程中的web.xml文件中进行配置，否则会出现404错误。（这个配置有点类似导航的作用，帮助服务器找到要运行的代码，还真的显得有些笨笨的）</p>
<p>配置内容如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></div><div class="line">     <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>first<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></div><div class="line">  <span class="comment">&lt;!--servlet的名字，随便取，没有什么实际意义--&gt;</span></div><div class="line">     <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>weekend.FirstServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></div><div class="line">  <span class="comment">&lt;!--Servlet类的全名：包名+类名，起关键作用--&gt;</span></div><div class="line">   <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></div><div class="line">       <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>first<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></div><div class="line">     <span class="comment">&lt;!--依旧是servlet的名字，跟上面一致即可--&gt;</span></div><div class="line">       <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/firstServlet<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></div><div class="line">     <span class="comment">&lt;!--配置一个访问路径，重要--&gt;</span></div><div class="line">   <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></div></pre></td></tr></table></figure>
<p>如果每写一个Servlet都要打开web.xml进行配置的话的确有些麻烦（哦，有自动配置的方法），现在诞生了另一种办法：在类的开头进行标注（起到跟xml配置相同的作用，胜在便捷）。</p>
<p>当然我暂时还没掌握标注，明天再说吧。</p>
<p>#####（2）Servlet生命周期</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> weekend;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> java.io.PrintWriter;</div><div class="line"></div><div class="line"><span class="keyword">import</span> javax.servlet.ServletConfig;</div><div class="line"><span class="keyword">import</span> javax.servlet.ServletException;</div><div class="line"><span class="keyword">import</span> javax.servlet.ServletRequest;</div><div class="line"><span class="keyword">import</span> javax.servlet.ServletResponse;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LifeServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span></span></div><div class="line"><span class="class"></span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request,HttpServletResponse respone)</span> </span></div><div class="line"><span class="function">			<span class="keyword">throws</span> ServletException,IOException</span></div><div class="line"><span class="function">   <span class="comment">//响应客户端发来的GET方式请求；</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		respone.setContentType(<span class="string">"text.html;charset=UTF-8"</span>);</div><div class="line">		PrintWriter out=respone.getWriter();</div><div class="line">		out.println(<span class="string">"&lt;font size=4 color=green&gt;doGet()..."</span>);</div><div class="line">		System.out.println(<span class="string">"doGet()..."</span>);</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPast</span><span class="params">(HttpServletRequest request,HttpServletResponse response)</span></span></div><div class="line"><span class="function">	<span class="keyword">throws</span> ServletException,IOException</span></div><div class="line"><span class="function">	<span class="comment">//响应客户端发来的POST方式请求；</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		response.setContentType(<span class="string">"text.html;charset=UTF-8"</span>);</div><div class="line">		PrintWriter out=response.getWriter();</div><div class="line">		out.println(<span class="string">"&lt;font size=5 color=red&gt;doPastt()...&lt;br&gt;"</span>);</div><div class="line">		System.out.println(<span class="string">"doPast()..."</span>);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(HttpServletRequest arg0,HttpServletResponse arg1)</span></span></div><div class="line"><span class="function">	<span class="keyword">throws</span> ServletException,IOException</span></div><div class="line"><span class="function">	<span class="comment">//服务1</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		arg1.setContentType(<span class="string">"text.html;charset=UTF-8"</span>);</div><div class="line">		PrintWriter out=arg1.getWriter();</div><div class="line">		out.println(<span class="string">"&lt;font size=6 color=blue&gt;service(HS,HS)...&lt;br&gt;"</span>);</div><div class="line">		System.out.println(<span class="string">"service(HS,HS)..."</span>);</div><div class="line">		<span class="keyword">super</span>.service(arg0, arg1);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(ServletRequest arg0,ServletResponse arg1)</span></span></div><div class="line"><span class="function">	<span class="keyword">throws</span> ServletException,IOException</span></div><div class="line"><span class="function">	<span class="comment">//服务2</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		arg1.setContentType(<span class="string">"text.html;charset=UTF-8"</span>);</div><div class="line">		PrintWriter out=arg1.getWriter();</div><div class="line">		out.println(<span class="string">"&lt;font size=7 color=yellow&gt;service(S,S)...&lt;br&gt;"</span>);</div><div class="line">		</div><div class="line">		System.out.println(<span class="string">"servlce(S,S)..."</span>);</div><div class="line">		<span class="keyword">super</span>.service(arg0, arg1);</div><div class="line">	&#125;</div><div class="line">	<span class="comment">//释放资源</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		System.out.println(<span class="string">"destory()..."</span>);</div><div class="line">		<span class="keyword">super</span>.destroy();</div><div class="line">	&#125;</div><div class="line"><span class="comment">//Servlet实例化之后调用init方法来进行初始化（这里初始化的对象没有定义）</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> <span class="keyword">throws</span> ServletException</span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		System.out.println(<span class="string">"init()..."</span>);</div><div class="line">	&#125;</div><div class="line">	<span class="comment">//对整个Servlet服务器初始化</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(ServletConfig config)</span><span class="keyword">throws</span> ServletException</span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		System.out.println(<span class="string">"init(ServletConfig)..."</span>);</div><div class="line">		<span class="keyword">super</span>.init(config);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>上面代码是通过输出语句来观察Servlet的生命周期（执行了什么方法，就在缓冲区输出）。</p>
<p>初次运行输出：</p>
<p><img src="/Users/zhangxuan/Pictures/截图/屏幕快照 2017-09-22 下午8.50.59.png" alt="屏幕快照 2017-09-22 下午8.50.59"></p>
<p>点击刷新按钮后（增加后三行）：<img src="/Users/zhangxuan/Pictures/截图/屏幕快照 2017-09-22 下午8.53.06.png" alt="屏幕快照 2017-09-22 下午8.53.06"></p>
<p>由此看出，Servlet运行后，先执行整个服务器初始化的命令，再执行其他初始化命令，再执行相关的服务和doGet方法，当点击刷新按钮后，只会重复执行服务和doGet方法，初始化命令是不会重复执行的。这里存在一个问题：停止服务器之后并没有输出停止信息（destory()…），可能我的停止方法有问题？</p>
<h5 id="（3）Servlet获取初始化参数值（从web-xml文件中）"><a href="#（3）Servlet获取初始化参数值（从web-xml文件中）" class="headerlink" title="（3）Servlet获取初始化参数值（从web.xml文件中）"></a>（3）Servlet获取初始化参数值（从web.xml文件中）</h5><p>Web.xml文件内容（只选取与本例相关的内容）：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"> <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>laozhang<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></div><div class="line">   //servlet的名字</div><div class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>weekend.oneth<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></div><div class="line">   //servlet类的路径（包+类名）</div><div class="line">      <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></div><div class="line">        //第一个参数值：name，值为：老zhang；</div><div class="line">          <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>name<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>老zhang<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></div><div class="line">        //第二个参数值：password，值为：lz123；</div><div class="line">          <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>password<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>lz123<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>laozhang<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></div><div class="line">    //servlet的名字，与上面保持一致</div><div class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/getInitParamServlet<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></div><div class="line">    //servlet的虚拟路径（有点类似网站，可以随便写）</div><div class="line">//本例中运行时显示的路径为：http://localhost:8080/webtry/getInitParamServlet</div><div class="line">即通过本地的8080端口访问webtry项目内路径为getInitParamServlet（正是我们所设置的路径）的内容</div><div class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> weekend;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> java.io.PrintWriter;</div><div class="line"><span class="keyword">import</span> javax.servlet.ServletException;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">oneth</span>  <span class="keyword">extends</span> <span class="title">HttpServlet</span></span>&#123;</div><div class="line">	<span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req,HttpServletResponse resp)</span></span></div><div class="line"><span class="function">	<span class="keyword">throws</span> ServletException,IOException</span></div><div class="line"><span class="function">    <span class="comment">//又是熟悉的doGet方法</span></span></div><div class="line"><span class="function">    </span>&#123;</div><div class="line">		String name=<span class="keyword">this</span>.getInitParameter(<span class="string">"name"</span>);</div><div class="line">      <span class="comment">//从web文件中获取参数“name”的信息</span></div><div class="line">		String password=<span class="keyword">this</span>.getInitParameter(<span class="string">"password"</span>);</div><div class="line">      <span class="comment">//从web文件中获取参数“password”的信息</span></div><div class="line">		String servletName=<span class="keyword">this</span>.getServletName();</div><div class="line">      <span class="comment">//从web文件中获取当前servlet的名</span></div><div class="line">		resp.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</div><div class="line">      <span class="comment">//定义页面输出方式和编码</span></div><div class="line">		PrintWriter out=resp.getWriter();</div><div class="line">      <span class="comment">//定义输出方法</span></div><div class="line">		out.println(<span class="string">"&lt;HTML&gt;&lt;HEAD&gt;&lt;TITLE&gt;hello world&lt;/TITLE&gt;&lt;/HEAD&gt;"</span>);</div><div class="line">		out.println(<span class="string">"&lt;font size=5 color=red&gt;ServletName="</span>+servletName+<span class="string">"&lt;/font&gt;&lt;br&gt;"</span>);</div><div class="line">		out.println(<span class="string">"&lt;font szie=5 color=blue&gt;name="</span>+name+<span class="string">"      password="</span>+password+<span class="string">"&lt;/font&gt;"</span>);</div><div class="line">		out.println(<span class="string">"&lt;/BODY&gt;&lt;/HTML&gt;"</span>);</div><div class="line">		out.close();</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req,HttpServletResponse resp)</span></span></div><div class="line"><span class="function">	<span class="keyword">throws</span> ServletException,IOException</span></div><div class="line"><span class="function">    <span class="comment">//又是熟悉的doPast方法</span></span></div><div class="line"><span class="function">    </span>&#123;</div><div class="line">		doGet(req,resp);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="（4）Servlet从表单获取信息"><a href="#（4）Servlet从表单获取信息" class="headerlink" title="（4）Servlet从表单获取信息"></a>（4）Servlet从表单获取信息</h5><p>（我没有想到这个问题浪费了一个下午的时间… …当一开始我使用跟书中例子一样的Html 4.0版本的语言来编写网页部分的时候，提交表单后无论如何调试，读取到的信息都是null，就在我无路可走之时，我参照网上类似案例（Servlet获取表单信息）改为使用我更熟悉的Html 5来编写网页部分，于是按下提交按钮之后，一切顺利。我到现在还不敢确定说是html4.0的锅，等哪天我闲的蛋疼的时候再去探索吧。）</p>
<h6 id="网页部分"><a href="#网页部分" class="headerlink" title="网页部分"></a>网页部分</h6><p>（一个简易而基本的网页，不难理解）</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>用户注册页面<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">	</div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"keywords"</span> <span class="attr">content</span>=<span class="string">"keyword1,keyword2,keyword3"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"description"</span> <span class="attr">content</span>=<span class="string">"this is my page"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"content-type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=UTF-8"</span>&gt;</span></div><div class="line">    </div><div class="line">    <span class="comment">&lt;!--&lt;link rel="stylesheet" type="text/css" href="./styles.css"&gt;--&gt;</span></div><div class="line"></div><div class="line"></div><div class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">  </div><div class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/webtry/RegServlet"</span>  <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></div><div class="line">  <span class="comment">&lt;!--form的核心属性：action，定义了按下提交按钮之后的行为，本例中是设置为java文件的路径，提交方式定为post，从而将表单中的信息提交到java文件中--&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">h1</span>&gt;</span>用户登陆<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">h2</span>&gt;</span>请填写注册信息<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></div><div class="line">	姓名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"userName"</span> &gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">	密码：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"userPassword"</span>  <span class="attr">id</span>=<span class="string">"pwd"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">	确认密码：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"again_userPassword"</span>  <span class="attr">id</span>=<span class="string">"again_pwd"</span> &gt;</span>(PS:如果两次密码匹配不正确，提交后重新注册)<span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">	性别：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"sex"</span> <span class="attr">value</span>=<span class="string">"男"</span>&gt;</span>男</div><div class="line">			  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"sex"</span> <span class="attr">value</span>=<span class="string">"女"</span>&gt;</span>女<span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">	出身日期：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"age"</span> &gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line"></div><div class="line">	  电子邮箱：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"email"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">	  地址：<span class="tag">&lt;<span class="name">select</span> <span class="attr">name</span>=<span class="string">"sheng"</span>&gt;</span></div><div class="line">		  			<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"广东"</span>&gt;</span>广东<span class="tag">&lt;/<span class="name">option</span>&gt;</span></div><div class="line">		  			<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"广西"</span>&gt;</span>广西<span class="tag">&lt;/<span class="name">option</span>&gt;</span></div><div class="line">		  			<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"云南"</span>&gt;</span>云南<span class="tag">&lt;/<span class="name">option</span>&gt;</span></div><div class="line">		  			<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"其他"</span>&gt;</span>其他<span class="tag">&lt;/<span class="name">option</span>&gt;</span></div><div class="line">	  			<span class="tag">&lt;/<span class="name">select</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">      爱好：<span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">"0"</span> <span class="attr">style</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;<span class="name">tr</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"feature"</span> <span class="attr">value</span>=<span class="string">"运动"</span>&gt;</span>运动<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">tr</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"feature"</span> <span class="attr">value</span>=<span class="string">"音乐"</span>&gt;</span>音乐<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">tr</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"feature"</span> <span class="attr">value</span>=<span class="string">"绘画"</span>&gt;</span>绘画<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">table</span>&gt;</span></div><div class="line">      自我简介:<span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">cols</span>=<span class="string">"30"</span> <span class="attr">rows</span>=<span class="string">"5"</span> <span class="attr">name</span>=<span class="string">"author"</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">	  	<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"提交"</span>&gt;</span></div><div class="line">	  	</div><div class="line">				<span class="tag">&lt;/<span class="name">form</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<h6 id="java部分"><a href="#java部分" class="headerlink" title="java部分"></a>java部分</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> weekend;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.io.FileOutputStream;</div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> java.io.PrintWriter;</div><div class="line"><span class="keyword">import</span> javax.servlet.RequestDispatcher;</div><div class="line"><span class="keyword">import</span> javax.servlet.ServletException;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</div><div class="line"><span class="keyword">import</span> javax.swing.text.html.HTMLDocument.HTMLReader.FormAction;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RegServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</div><div class="line">  <span class="comment">//先定义人民群众喜闻乐见的doGet方法（这让我想起了线程里的run（）方法）</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span></div><div class="line"><span class="function">			<span class="keyword">throws</span> ServletException, IOException </span>&#123;</div><div class="line">		<span class="comment">//设置编码，但该函数在get方法中不适用，要自己对每个字符串转换</span></div><div class="line">		request.setCharacterEncoding(<span class="string">"utf-8"</span>);</div><div class="line">		response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</div><div class="line">      <span class="comment">//设置页面样式和数据编码（重中之重）</span></div><div class="line">      </div><div class="line">      <span class="comment">//根据表单中提交的信息初始化若干字符串与其对应</span></div><div class="line">      <span class="comment">//爱好一栏（多选）需要使用字符串数组来读取</span></div><div class="line">		String name = request.getParameter(<span class="string">"userName"</span>);</div><div class="line">		String userName = <span class="keyword">new</span> String(name.getBytes(<span class="string">"ISO-8859-1"</span>),<span class="string">"utf-8"</span>);</div><div class="line">		String password = request.getParameter(<span class="string">"userPassword"</span>);</div><div class="line">		 String againPassword = request.getParameter(<span class="string">"again_userPassword"</span>);</div><div class="line">		 String sex = request.getParameter(<span class="string">"sex"</span>);</div><div class="line">		 String age = request.getParameter(<span class="string">"age"</span>);</div><div class="line">		 String email = request.getParameter(<span class="string">"email"</span>);</div><div class="line">		 String sheng = request.getParameter(<span class="string">"sheng"</span>);</div><div class="line">		 String [] feature=request.getParameterValues(<span class="string">"feature"</span>);</div><div class="line">		String author=request.getParameter(<span class="string">"author"</span>);</div><div class="line">		 PrintWriter out=response.getWriter();</div><div class="line">		 <span class="comment">//判断两次密码是否相符</span></div><div class="line">		<span class="keyword">if</span>(!password.equals(againPassword))&#123;</div><div class="line">			System.out.println(<span class="string">"两次密码不匹配，请重新输入"</span>);</div><div class="line">			response.getWriter().append(<span class="string">"两次密码不匹配，请重新输入"</span>);</div><div class="line">			response.sendRedirect(<span class="string">"/webtry/findout.html"</span>);		<span class="comment">//重定向到登陆页面</span></div><div class="line">			<span class="keyword">return</span>;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">else</span></div><div class="line">          </div><div class="line">          <span class="comment">//以Html页面的方式输出信息；</span></div><div class="line">		&#123;</div><div class="line">			out.println(<span class="string">"&lt;html&gt;"</span>);</div><div class="line">			out.println(<span class="string">"&lt;head&gt;&lt;title&gt;RegServlet&lt;/title&gt;&lt;/head&gt;"</span>);</div><div class="line">			out.println(<span class="string">"&lt;body&gt;&lt;h1&gt;个人详细信息如下：&lt;/h1	&gt;"</span>);</div><div class="line">			out.println(<span class="string">"&lt;h4 &gt;"</span>);</div><div class="line">			out.println(<span class="string">"姓名："</span>+name+<span class="string">"&lt;br&gt;"</span>);</div><div class="line">			out.println(<span class="string">"密码："</span>+password+<span class="string">"&lt;br&gt;"</span>);</div><div class="line">			out.println(<span class="string">"性别："</span>+sex+<span class="string">"&lt;br&gt;"</span>);</div><div class="line">			out.println(<span class="string">"年龄："</span>+age+<span class="string">"&lt;br&gt;"</span>);</div><div class="line">			out.println(<span class="string">"email："</span>+email+<span class="string">"&lt;br&gt;"</span>);</div><div class="line">			out.println(<span class="string">"地址："</span>+sheng+<span class="string">"&lt;br&gt;"</span>);</div><div class="line">			out.println(<span class="string">"爱好："</span>);</div><div class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;feature.length;i++)</div><div class="line">			&#123;</div><div class="line">				out.println(feature[i]);</div><div class="line">				<span class="keyword">if</span>(i&lt;feature.length-<span class="number">1</span>)</div><div class="line">					out.print(<span class="string">"、"</span>);</div><div class="line">			&#125;</div><div class="line">			out.println(<span class="string">"&lt;br&gt;"</span>);</div><div class="line">			out.println(<span class="string">"个人简介："</span>+author+<span class="string">"&lt;br&gt;"</span>);</div><div class="line">			out.println(<span class="string">"&lt;/h4&gt;&lt;/body&gt;&lt;/html&gt;"</span>); </div><div class="line">			out.close();</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">  <span class="comment">//喜闻乐见的doPost方法</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span></div><div class="line"><span class="function">			<span class="keyword">throws</span> ServletException, IOException </span>&#123;</div><div class="line">		doGet(request,response);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>运行截图：</p>
<p><img src="/Users/zhangxuan/Pictures/截图/屏幕快照 2017-09-25 下午4.03.16.png" alt="屏幕快照 2017-09-25 下午4.03.16"></p>
<p><img src="/Users/zhangxuan/Pictures/截图/屏幕快照 2017-09-25 下午4.03.37.png" alt="屏幕快照 2017-09-25 下午4.03.37"></p>
<p>目前的web.xml文件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="attr">xmlns</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee"</span> <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd"</span> <span class="attr">id</span>=<span class="string">"WebApp_ID"</span> <span class="attr">version</span>=<span class="string">"3.1"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>webtry<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">welcome-file-list</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>index.html<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>index.htm<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>index.jsp<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>default.html<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>default.htm<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>default.jsp<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">welcome-file-list</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>registerSevlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>weekend.RegServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>registerServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/registerServlet<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></div></pre></td></tr></table></figure>
<h5 id="（5）从URL读取参数"><a href="#（5）从URL读取参数" class="headerlink" title="（5）从URL读取参数"></a>（5）从URL读取参数</h5><p>（印刷错误真滴把我坑惨了）</p>
<p>妈的，不想多说，我怀疑自己借了假书</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> leguan;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> java.io.PrintWriter;</div><div class="line"></div><div class="line"><span class="keyword">import</span> javax.servlet.ServletException;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</div><div class="line"><span class="comment">//本例最主要是没有定义doPost方法，而是使用doGet方法从URL中获取参数。</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">URL</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span></span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request,HttpServletResponse response)</span></span></div><div class="line"><span class="function">	<span class="keyword">throws</span> ServletException,IOException</span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</div><div class="line">		String name=request.getParameter(<span class="string">"name"</span>);	</div><div class="line">		String password=request.getParameter(<span class="string">"password"</span>);</div><div class="line">		PrintWriter out=response.getWriter();</div><div class="line">		out.println(<span class="string">"name:"</span>+name);</div><div class="line">	     out.println(<span class="string">"password:"</span>+password);</div><div class="line">	     out.flush();</div><div class="line">	     out.close();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>运行网页后在地址<a href="http://localhost:8080/upup/URL" target="_blank" rel="external">http://localhost:8080/upup/URL</a>  后加上?name=zhangsan&amp;password=zs123，则可完成参数传递。</p>
<p>运行结果：name:zhangsan password:zs123</p>
<h3 id="3-状态管理与作用域对象"><a href="#3-状态管理与作用域对象" class="headerlink" title="3.状态管理与作用域对象"></a>3.状态管理与作用域对象</h3><h4 id="状态管理"><a href="#状态管理" class="headerlink" title="状态管理"></a>状态管理</h4><h5 id="（1）cookie"><a href="#（1）cookie" class="headerlink" title="（1）cookie"></a>（1）cookie</h5><p>通过网页输入信息，由java语句写入cooike后再读取并显示出来；</p>
<p>网页：</p>
<p>(一个简易的用来提交用户名的表单)</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>input.html<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"keywords"</span> <span class="attr">content</span>=<span class="string">"ketword1,keyword2,keyword3"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"description"</span> <span class="attr">content</span>=<span class="string">"this is my page"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"content-type"</span> <span class="attr">content</span>=<span class="string">"text/html;charset=UTF-8"</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/upup/C1"</span>  <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">table</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">td</span> <span class="attr">align</span>=<span class="string">'center'</span>&gt;</span>用户名：<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"username"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">td</span> <span class="attr">align</span>=<span class="string">'center'</span> <span class="attr">colspan</span>=<span class="string">'2'</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"提交"</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"reset"</span> <span class="attr">value</span>=<span class="string">"重置"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">table</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>java：</p>
<p><1.>「接收网页上信息并写入cookie」</1.></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> leguan;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> java.io.PrintWriter;</div><div class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</div><div class="line"><span class="keyword">import</span> java.util.Date;</div><div class="line"><span class="keyword">import</span> javax.servlet.ServletException;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.Cookie;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">public</span>  <span class="class"><span class="keyword">class</span> <span class="title">cookie1</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span></span></div><div class="line"><span class="class">	</span>&#123;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request,HttpServletResponse response)</span></span></div><div class="line"><span class="function">				<span class="keyword">throws</span> ServletException,IOException</span>&#123;</div><div class="line">			response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</div><div class="line">			String username=request.getParameter(<span class="string">"username"</span>);</div><div class="line">			PrintWriter out=response.getWriter();</div><div class="line">			String responseContent=<span class="keyword">null</span>;</div><div class="line">			<span class="keyword">if</span>(username!=<span class="keyword">null</span>&amp;&amp;!username.equals(<span class="string">""</span>))</div><div class="line">			<span class="comment">//用户名不为空（null和空字符串两种情况）</span></div><div class="line">			&#123;</div><div class="line">				Cookie c1=<span class="keyword">new</span> Cookie(<span class="string">"username"</span>,URLEncoder.encode(username,<span class="string">"UTF-8"</span>));</div><div class="line">				Date date=<span class="keyword">new</span> Date();  </div><div class="line">				<span class="comment">//如果以此种方式定义日期并写入cookie（会产生空格）将导致变量传递错误，因为tomcat9版本不兼容此种格式。</span></div><div class="line">			    SimpleDateFormat dtf=<span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy年MM月dd日 hh:mm:ss"</span>);</div><div class="line">				<span class="comment">//使用此语句对日期信息进行格式变换；</span></div><div class="line">				String time=dtf.format(date).replaceAll(<span class="string">" "</span>, <span class="string">""</span>);<span class="comment">//去掉字符串中的空格；</span></div><div class="line">				Cookie c2=<span class="keyword">new</span> Cookie(<span class="string">"lastCall"</span>,URLEncoder.encode(time,<span class="string">"UTF-8"</span>));</div><div class="line">				<span class="comment">//变换后再写入cookie就ok了；</span></div><div class="line">				c1.setMaxAge(<span class="number">60</span>*<span class="number">60</span>*<span class="number">24</span>*<span class="number">30</span>);</div><div class="line">				c2.setMaxAge(<span class="number">60</span>*<span class="number">60</span>*<span class="number">24</span>*<span class="number">30</span>);</div><div class="line">				<span class="comment">//设置两cookie的存活周期（以秒为单位，本例中是30天）</span></div><div class="line">				response.addCookie(c1);</div><div class="line">				response.addCookie(c2);</div><div class="line">				<span class="comment">//所有设置完成后添加cookie</span></div><div class="line">				responseContent=<span class="string">"本次登陆的用户名和时间已经成功写入Cookie.&lt;br&gt;&lt;a href='/upup/C2'&gt;读取Cooike信息&lt;/a&gt;"</span>;</div><div class="line">				<span class="comment">//设置写入完成信息，并提供显示cookie信息的链接以供查看（用户名存在时）</span></div><div class="line">			&#125;</div><div class="line">			<span class="keyword">else</span></div><div class="line">			&#123;</div><div class="line">				responseContent=<span class="string">"用户名为空，请重新输入.&lt;br&gt;&lt;a href='/upup/input.html'&gt;重新输入&lt;/a&gt;"</span>;</div><div class="line">                <span class="comment">//设置重新输入提示信息，并提供输入用户名页面的链接以供重新输入（用户名不存在时）</span></div><div class="line">				&#125;</div><div class="line">			out.println(<span class="string">"&lt;html&gt;&lt;body&gt;&lt;h2&gt;&lt;font color=red&gt;"</span>+responseContent+<span class="string">"&lt;/h2&gt;&lt;/body&gt;&lt;/html&gt;"</span>);</div><div class="line">			<span class="comment">//在当前页面输出上面设置的提示信息；</span></div><div class="line">			out.flush();<span class="comment">//将位于缓冲区的数据立刻发送</span></div><div class="line">			out.close();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>小贴士：</p>
<p><code>SimpleDateFormat</code> 是一个以国别敏感的方式格式化和分析数据的具体类。 它允许格式化 (date -&gt; text)、语法分析 (text -&gt; date)和标准化。</p>
<p>SimpleDateFormat<code>允许以为日期-时间格式化选择任何用户指定的方式启动。 但是，希望用</code>DateFormat<code>中的</code>getTimeInstance<code>、</code>getDateInstance<code>或</code>getDateTimeInstance<code>创建一个日期-时间格式化程序。 每个类方法返回一个以缺省格式化方式初始化的日期／时间格式化程序。 可以根据需要用</code>applyPattern` 方法修改格式化方式。 </p>
<p><2.>「读取cookie中信息并输出」</2.></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> leguan;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> java.io.PrintWriter;</div><div class="line"></div><div class="line"><span class="keyword">import</span> javax.servlet.ServletException;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.Cookie;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">cookie2</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span></span></div><div class="line"><span class="class">	</span>&#123;</div><div class="line">		<span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req,HttpServletResponse resp)</span></span></div><div class="line"><span class="function">		<span class="keyword">throws</span> ServletException,IOException</span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			doPost(req,resp);</div><div class="line">		&#125;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request,HttpServletResponse response)</span></span></div><div class="line"><span class="function">		<span class="keyword">throws</span> ServletException,IOException</span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			response.setContentType(<span class="string">"text/html;charset=GBK"</span>);</div><div class="line">			PrintWriter out=response.getWriter();</div><div class="line">			out.println(<span class="string">"&lt;html&gt;&lt;head&gt;A servlet&lt;/head&gt;&lt;body&gt;&lt;h2&gt;"</span></div><div class="line">					+ <span class="string">"从Cookie中读取的用户名和上次登录时间&lt;/h2&gt;"</span>);</div><div class="line">			Cookie[]cookies=request.getCookies();</div><div class="line">			<span class="comment">//读取cookie信息到cookie型数组；</span></div><div class="line">			Cookie cookie=<span class="keyword">null</span>;</div><div class="line">			<span class="comment">//定义一个cookie型空变量用于传递数据；</span></div><div class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;cookies.length;i++)</div><div class="line">			<span class="comment">//遍历cookie数组</span></div><div class="line">			&#123;</div><div class="line">				cookie=cookies[i];</div><div class="line">				<span class="keyword">if</span>(cookie.getName().equals(<span class="string">"username"</span>))</div><div class="line">				<span class="comment">//输出用户名</span></div><div class="line">				&#123;</div><div class="line">					String put=URLDecoder.decode(cookie.getValue(), <span class="string">"UTF-8"</span>);</div><div class="line">					out.println(<span class="string">"用户名："</span>+put+<span class="string">"&lt;br&gt;"</span>);</div><div class="line">				&#125;</div><div class="line">				<span class="keyword">if</span>(cookie.getName().equals(<span class="string">"lastCall"</span>))</div><div class="line">				<span class="comment">//输出上次登录日期</span></div><div class="line">				&#123;</div><div class="line">					String put=URLDecoder.decode(cookie.getValue(), <span class="string">"UTF-8"</span>);</div><div class="line">					out.println(<span class="string">"上次登录时间："</span>+put+<span class="string">"&lt;br&gt;"</span>);</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">			out.println(<span class="string">"&lt;/body&gt;&lt;/html&gt;"</span>);</div><div class="line">			out.flush();<span class="comment">//刷新，立即把位于缓冲区的数据发送出去；</span></div><div class="line">			out.close();</div><div class="line">&#125;</div><div class="line">	&#125;</div></pre></td></tr></table></figure>
<p.这里有一个问题，用户名输入为汉字时无法正确读取，有可能是编码问题；>

<p>（上面这个问题已经解决，的确是编码问题：cookie默认支持的编码方式是ASCII码，不能对中文进行编码和解码，此时在写入和读取cookie信息时加上编码设定语句就行了）</p>
<p>写入：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Cookie cookie = <span class="keyword">new</span> Cookie(name,URLEncoder.encode(value, <span class="string">"UTF-8"</span>));</div></pre></td></tr></table></figure>
<p>读取：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">String value = URLDecoder.decode(cookie.getValue(), <span class="string">"UTF-8"</span>);</div></pre></td></tr></table></figure>
<h5 id="2-session"><a href="#2-session" class="headerlink" title="(2)session"></a>(2)session</h5><p>演示Session会话的使用。</p>
<p>网页部分：登陆界面——必须使用数据库表usertbl中已存在的name和password进行登录；</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>login.html<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"keywords"</span> <span class="attr">content</span>=<span class="string">"keyword1,keyword2,keyword3"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"description"</span> <span class="attr">content</span>=<span class="string">"this is my page"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"content-type"</span> <span class="attr">content</span>=<span class="string">"text/html;charset=utf-8"</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/upup/login"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></div><div class="line">      //将表单提交到LoginServlet.java</div><div class="line">        用户名:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"name"</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">        密码:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"password"</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"登录"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"reset"</span> <span class="attr">value</span>=<span class="string">"清空"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>java 部分：</p>
<p><1>数据传输：</1></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> leguan;</div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> java.sql.Connection;</div><div class="line"><span class="keyword">import</span> java.sql.DriverManager;</div><div class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</div><div class="line"><span class="keyword">import</span> java.sql.ResultSet;</div><div class="line"><span class="keyword">import</span> javax.servlet.ServletException;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</div><div class="line"><span class="keyword">import</span> org.apache.tomcat.dbcp.dbcp2.ConnectionFactory;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginServlet</span>  <span class="keyword">extends</span> <span class="title">HttpServlet</span></span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request,HttpServletResponse response)</span></span></div><div class="line"><span class="function">	<span class="keyword">throws</span> ServletException,IOException</span>&#123;</div><div class="line">		request.setCharacterEncoding(<span class="string">"UTF-8"</span>);</div><div class="line">		response.setCharacterEncoding(<span class="string">"UTF-8"</span>);</div><div class="line">		response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</div><div class="line">		String name=request.getParameter(<span class="string">"name"</span>);</div><div class="line">		String password=request.getParameter(<span class="string">"password"</span>);</div><div class="line">		HttpSession session=request.getSession();</div><div class="line">      <span class="comment">//初始化Session</span></div><div class="line">		PreparedStatement pstmt=<span class="keyword">null</span>;</div><div class="line">      <span class="comment">//PreparedStatement：继承于Statement的接口对象，由于预编译过，其执行速度较快，一般需要多次执行的sql经常创建为此对象（简单来说进行sql语言操作）；</span></div><div class="line">		ResultSet rs=<span class="keyword">null</span>;</div><div class="line">      <span class="comment">//ResultSet：数据中查询结果返回的一种对象，可以说结果集是一个存储查询结果的对象，但是结果集并不仅仅具有存储的功能，他同时还具有操纵数据的功能，可能完成对数据的更新等.</span></div><div class="line">		Connection conn=<span class="keyword">null</span>;</div><div class="line">      <span class="comment">//Connection：基本的接口集合，用来进行数据的连接（本例中进行mysql数据库的连接）；</span></div><div class="line">		<span class="keyword">try</span> &#123;</div><div class="line">			String sql=<span class="string">"select * from usertbl where name=?and password=?"</span>;</div><div class="line">          <span class="comment">//以name和password为限制条件再表usertbl中进行查询的sql语句；</span></div><div class="line">			conn=ConnectionFactory.getConnection();</div><div class="line">          <span class="comment">//实例化Connection类，对mysql进行连接访问；</span></div><div class="line">          <span class="comment">//所有的数据库操作都赋给pstmt（PreparedStatement的实例）；</span></div><div class="line">			pstmt=conn.prepareStatement(sql);</div><div class="line">          <span class="comment">//执行上面定义的sql语句；</span></div><div class="line">			pstmt.setString(<span class="number">1</span>,name);</div><div class="line">          <span class="comment">//将name值赋给sql语句中第一个问号；</span></div><div class="line">			pstmt.setString(<span class="number">2</span>, password);</div><div class="line">          <span class="comment">//将password值赋给sql语句中第二个问号；</span></div><div class="line">			rs=pstmt.executeQuery();</div><div class="line">          <span class="comment">//将获取结果返回到rs中（ResultSet的实例）；</span></div><div class="line">          </div><div class="line">			<span class="keyword">if</span>(rs.next())</div><div class="line">              <span class="comment">//如果rs中有数据</span></div><div class="line">			&#123;</div><div class="line">				session.setAttribute(<span class="string">"name"</span>, name);</div><div class="line">              <span class="comment">//将name保存到session中；</span></div><div class="line">				request.getRequestDispatcher(<span class="string">"index"</span>).forward(request, response);</div><div class="line">              <span class="comment">//跳转到index路径（指向IndexServlet.java，用来显示session信息）;</span></div><div class="line">			&#125;</div><div class="line">			<span class="keyword">else</span></div><div class="line">              <span class="comment">//如果rs没有数据</span></div><div class="line">			&#123;</div><div class="line">				request.getRequestDispatcher(<span class="string">"/login.html"</span>).forward(request, response);</div><div class="line">              <span class="comment">//跳转到login.html页面（重新输入name和password）；</span></div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">catch</span>(Exception e)</div><div class="line">		&#123;</div><div class="line">			e.printStackTrace();</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">finally</span> &#123;</div><div class="line">          <span class="comment">//数据传递完成之后，关闭用于数据传输的若干接口；</span></div><div class="line">			ResourceClose.close(rs,pstmt,conn);</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">static</span>  <span class="class"><span class="keyword">class</span> <span class="title">ConnectionFactory</span></span>&#123;</div><div class="line">      <span class="comment">//用来连接mysql数据库；</span></div><div class="line">		<span class="keyword">private</span> <span class="keyword">static</span> String driver=<span class="string">"com.mysql.jdbc.Driver"</span>;</div><div class="line">		<span class="keyword">private</span> <span class="keyword">static</span> String url=<span class="string">"jdbc:mysql://localhost:3306/MacOS?useUnicode=true&amp;characterEncoding=UTF-8"</span>;</div><div class="line">		<span class="keyword">private</span> <span class="keyword">static</span> String userName=<span class="string">"root"</span>;</div><div class="line">		<span class="keyword">private</span> <span class="keyword">static</span> String password=<span class="string">"zx1583707135"</span>;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">static</span>  Connection <span class="title">getConnection</span><span class="params">()</span></span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			<span class="keyword">try</span> &#123;</div><div class="line">				Class.forName(driver);</div><div class="line">				<span class="keyword">return</span> DriverManager.getConnection(url,userName,password);</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">catch</span>(Exception e)</div><div class="line">			&#123;</div><div class="line">				e.printStackTrace();</div><div class="line">				<span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><2>数据展示（主页面）</2></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> leguan;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> java.io.PrintWriter;</div><div class="line"></div><div class="line"><span class="keyword">import</span> javax.servlet.ServletException;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IndexServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span></span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request,HttpServletResponse response)</span></span></div><div class="line"><span class="function">	<span class="keyword">throws</span> ServletException,IOException</span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		doPost(request,response);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request,HttpServletResponse response)</span></span></div><div class="line"><span class="function">	<span class="keyword">throws</span> ServletException,IOException</span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		HttpSession session=request.getSession();</div><div class="line">      <span class="comment">//实例化session对象用以接收从LoginServlet.java传递过来的Session信息；</span></div><div class="line">		response.setContentType(<span class="string">"text/html;charset=gb2312"</span>);</div><div class="line">		PrintWriter out=response.getWriter();</div><div class="line">      <span class="comment">//输出信息；</span></div><div class="line">		out.println(<span class="string">"&lt;html&gt;&lt;body&gt;&lt;h3&gt;"</span>);</div><div class="line">		out.println(<span class="string">"Session ID:"</span>+session.getId()+<span class="string">"&lt;br&gt;"</span>);</div><div class="line">      <span class="comment">//获取session的ID；</span></div><div class="line">		out.println(<span class="string">"Session Attribute:"</span>+session.getAttribute(<span class="string">"name"</span>)+<span class="string">"&lt;br&gt;"</span>);</div><div class="line">      <span class="comment">//获取session中name值</span></div><div class="line">		out.println(<span class="string">"Session timeout:"</span>+session.getMaxInactiveInterval()+<span class="string">"s"</span>+<span class="string">"&lt;br&gt;"</span>);</div><div class="line">      <span class="comment">//获取session默认的过期时间(本例中为1800s)</span></div><div class="line">		session.setMaxInactiveInterval(<span class="number">300</span>);</div><div class="line">      <span class="comment">//设置当前session的过期时间为300秒；</span></div><div class="line">		out.println(<span class="string">"Session timeout:"</span>+session.getMaxInactiveInterval()+<span class="string">"s"</span>+<span class="string">"&lt;br&gt;"</span>);</div><div class="line">      <span class="comment">//再次获取session的过期时间（此时为300s）</span></div><div class="line">      <span class="comment">//下面给出链接用以访问view1和view2两个session</span></div><div class="line">		out.println(<span class="string">"&lt;a href=\"view1\"&gt;view1&lt;/a&gt;&lt;br&gt;"</span>);</div><div class="line">		out.println(<span class="string">"&lt;a href=\"view2\"&gt;view2&lt;/a&gt;&lt;br&gt;"</span>);</div><div class="line">		out.println(<span class="string">"&lt;/h3&gt;&lt;/body&gt;&lt;/html&gt;"</span>);</div><div class="line">		out.close();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>数据展示（子页面）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> leguan;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> java.io.PrintWriter;</div><div class="line"></div><div class="line"><span class="keyword">import</span> javax.servlet.ServletException;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">View1Servlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span></span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request,HttpServletResponse response)</span></span></div><div class="line"><span class="function">	<span class="keyword">throws</span> ServletException,IOException</span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		doPost(request,response);</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request,HttpServletResponse response)</span></span></div><div class="line"><span class="function">	<span class="keyword">throws</span> ServletException,IOException</span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		HttpSession session=request.getSession();</div><div class="line">      <span class="comment">//获取从IndexServlet.java传来的session</span></div><div class="line">		response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</div><div class="line">		PrintWriter out=response.getWriter();</div><div class="line">      <span class="comment">//输出信息；</span></div><div class="line">		out.println(<span class="string">"&lt;html&gt;&lt;body&gt;&lt;h3&gt;"</span>);</div><div class="line">		out.println(<span class="string">"This is view1... ...&lt;br&gt;"</span>);</div><div class="line">		out.println(<span class="string">"session ID:"</span>+session.getId()+<span class="string">"&lt;br&gt;"</span>);</div><div class="line">		out.println(<span class="string">"Session Attribute:"</span>+session.getAttribute(<span class="string">"name"</span>)+<span class="string">"&lt;br&gt;"</span>);</div><div class="line">		out.println(<span class="string">"&lt;/h3&gt;&lt;/body&gt;&lt;/html&gt;"</span>);</div><div class="line">		out.close();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">*********************************************************************************************</div><div class="line"><span class="comment">//跟上面一样，这里就不赘述了；</span></div><div class="line"><span class="keyword">package</span> leguan;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> java.io.PrintWriter;</div><div class="line"></div><div class="line"><span class="keyword">import</span> javax.servlet.ServletException;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">View2Servlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span></span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request,HttpServletResponse response)</span></span></div><div class="line"><span class="function">	<span class="keyword">throws</span> ServletException,IOException</span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		doPost(request,response);</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request,HttpServletResponse response)</span></span></div><div class="line"><span class="function">	<span class="keyword">throws</span> ServletException,IOException</span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		HttpSession session=request.getSession();</div><div class="line">		response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</div><div class="line">		PrintWriter out=response.getWriter();</div><div class="line">		out.println(<span class="string">"&lt;html&gt;&lt;body&gt;&lt;h3&gt;"</span>);</div><div class="line">		out.println(<span class="string">"This is view1... ...&lt;br&gt;"</span>);</div><div class="line">		out.println(<span class="string">"session ID:"</span>+session.getId()+<span class="string">"&lt;br&gt;"</span>);</div><div class="line">		out.println(<span class="string">"Session Attribute:"</span>+session.getAttribute(<span class="string">"name"</span>)+<span class="string">"&lt;br&gt;"</span>);</div><div class="line">		out.println(<span class="string">"&lt;/h3&gt;&lt;/body&gt;&lt;/html&gt;"</span>);</div><div class="line">		out.close();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>运行结果：（name：zhangsan  password：zs123）</p>
<p><img src="/Users/zhangxuan/Pictures/截图/屏幕快照 2017-09-30 上午10.58.28.png" alt="屏幕快照 2017-09-30 上午10.58.28"></p>
<p><img src="/Users/zhangxuan/Pictures/截图/屏幕快照 2017-09-30 上午10.58.39.png" alt="屏幕快照 2017-09-30 上午10.58.39"></p>
<p><img src="/Users/zhangxuan/Pictures/截图/屏幕快照 2017-09-30 上午10.58.48.png" alt="屏幕快照 2017-09-30 上午10.58.48"></p>
<p><img src="/Users/zhangxuan/Pictures/截图/屏幕快照 2017-09-30 上午11.05.04.png" alt="屏幕快照 2017-09-30 上午11.05.04"></p>
<p>####作用域对象</p>
<h5 id="ServletContext"><a href="#ServletContext" class="headerlink" title="ServletContext"></a>ServletContext</h5><p>在web创建时启动，停止时销毁，保存的信息存在范围为整个web应用。ServletContext对象对于一个web应用来说是唯一的，一般存放一些Web应用中所有用户都要使用，并且在整个Web应用运行过程中一直要使用的数据。</p>
<p>实例：</p>
<p>利用ServletContext实现统计页面被访问次数。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> leguan;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> java.io.PrintWriter;</div><div class="line"></div><div class="line"><span class="keyword">import</span> javax.servlet.ServletException;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CountServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span></span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request,HttpServletResponse response)</span></span></div><div class="line"><span class="function">	<span class="keyword">throws</span> ServletException,IOException</span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		doPost(request,response);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request,HttpServletResponse response)</span></span></div><div class="line"><span class="function">	<span class="keyword">throws</span> ServletException,IOException</span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</div><div class="line">		Integer count=(Integer)<span class="keyword">this</span>.getServletContext().getAttribute(<span class="string">"count"</span>);</div><div class="line">      <span class="comment">//从当前的ServletContext中获取count对象的值；</span></div><div class="line">		<span class="keyword">if</span>(count==<span class="keyword">null</span>)</div><div class="line">       <span class="comment">//访问次数为零则显示一次；</span></div><div class="line">		&#123;</div><div class="line">			count=<span class="number">1</span>;</div><div class="line">			<span class="keyword">this</span>.getServletContext().setAttribute(<span class="string">"count"</span>, count);</div><div class="line">		&#125;</div><div class="line">      <span class="comment">//访问次数不为零则+1；</span></div><div class="line">		<span class="keyword">else</span> &#123;</div><div class="line">			count=count+<span class="number">1</span>;</div><div class="line">			<span class="keyword">this</span>.getServletContext().setAttribute(<span class="string">"count"</span>, count);</div><div class="line">		&#125;</div><div class="line">		PrintWriter out=response.getWriter();</div><div class="line">		out.println(<span class="string">"&lt;! DOCTYPE html&gt;"</span>);</div><div class="line">		out.println(<span class="string">"&lt;html&gt;"</span>);</div><div class="line">		out.println(<span class="string">"&lt;head&gt;&lt;title&gt;A servlet&lt;/title&gt;&lt;/head&gt;"</span>);</div><div class="line">		out.println(<span class="string">"&lt;body&gt;&lt;h2&gt;&lt;font szie=5 color=blue&gt;该页面第"</span>+count+<span class="string">"次被访问！&lt;/font&gt;&lt;/h2&gt;&lt;/body&gt;&lt;/html&gt;"</span>);</div><div class="line">		out.flush();</div><div class="line">		out.close();</div><div class="line">&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="比较"><a href="#比较" class="headerlink" title="比较"></a>比较</h5><p>作用域：ServletContext、HttpSession、ServletRequest对象的作用域依次变小，但是他们的参数相互独立，没有包含关系；</p>
<p>ServletContext是应用层次对象；HttpSession是会话层次对象；ServletRequest是响应层次对象。</p>
<h4 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h4><p>一个阉割版本的学生信息管理系统（BS模式），登陆账号密码，显示对应信息；</p>
<h5 id="登陆界面"><a href="#登陆界面" class="headerlink" title="登陆界面"></a>登陆界面</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>login.html<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"keywords"</span> <span class="attr">content</span>=<span class="string">"keyword1,keyword2,keyword3"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"description"</span> <span class="attr">content</span>=<span class="string">"this is my page"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"content-type"</span> <span class="attr">content</span>=<span class="string">"text/html;charset=utf-8"</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/upup/login"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></div><div class="line">        用户名:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"name"</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">        密码:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"password"</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"登录"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"reset"</span> <span class="attr">value</span>=<span class="string">"清空"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<h5 id="数据获取与传递"><a href="#数据获取与传递" class="headerlink" title="数据获取与传递"></a>数据获取与传递</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> chi;</div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> java.sql.Connection;</div><div class="line"><span class="keyword">import</span> java.sql.DriverManager;</div><div class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</div><div class="line"><span class="keyword">import</span> java.sql.ResultSet;</div><div class="line"><span class="keyword">import</span> java.sql.SQLException;</div><div class="line"><span class="keyword">import</span> javax.servlet.ServletException;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginServlet</span>  <span class="keyword">extends</span> <span class="title">HttpServlet</span></span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request,HttpServletResponse response)</span></span></div><div class="line"><span class="function">	<span class="keyword">throws</span> ServletException,IOException</span>&#123;</div><div class="line">		request.setCharacterEncoding(<span class="string">"UTF-8"</span>);</div><div class="line">		response.setCharacterEncoding(<span class="string">"UTF-8"</span>);</div><div class="line">		response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</div><div class="line">		String name=request.getParameter(<span class="string">"name"</span>);</div><div class="line">		String password=request.getParameter(<span class="string">"password"</span>);</div><div class="line">		String sex=request.getParameter(<span class="string">"sex"</span>);</div><div class="line">		String privence=request.getParameter(<span class="string">"privence"</span>);</div><div class="line">		String author=request.getParameter(<span class="string">"author"</span>);</div><div class="line">		HttpSession session=request.getSession();</div><div class="line">		PreparedStatement pstmt=<span class="keyword">null</span>;</div><div class="line">		ResultSet rs=<span class="keyword">null</span>;</div><div class="line">		Connection conn=<span class="keyword">null</span>;</div><div class="line">		<span class="keyword">try</span> &#123;</div><div class="line">			String sql=<span class="string">"select * from usertbl where name=?and password=?"</span>;</div><div class="line">			conn=ConnectionFactory.getConnection();</div><div class="line">			pstmt=conn.prepareStatement(sql);</div><div class="line">			pstmt.setString(<span class="number">1</span>,name);</div><div class="line">			pstmt.setString(<span class="number">2</span>, password);</div><div class="line">			rs=pstmt.executeQuery();</div><div class="line">          <span class="comment">//从rs（数据库查询结果集）中查询数据并传递；</span></div><div class="line">			<span class="keyword">while</span>(rs.next())</div><div class="line">			&#123;</div><div class="line">				name=rs.getString(<span class="number">1</span>);</div><div class="line">				sex=rs.getString(<span class="number">3</span>);</div><div class="line">				privence=rs.getString(<span class="number">4</span>);</div><div class="line">				author=rs.getString(<span class="number">5</span>);</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">catch</span>(SQLException e)</div><div class="line">		&#123;</div><div class="line">			e.printStackTrace();</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">finally</span> &#123;</div><div class="line">			ResourceClose.close(rs,pstmt,conn);</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">if</span>(name!=<span class="keyword">null</span>)</div><div class="line">		&#123;</div><div class="line">			session.setAttribute(<span class="string">"name"</span>, name);</div><div class="line">			session.setAttribute(<span class="string">"sex"</span>,sex);</div><div class="line">			session.setAttribute(<span class="string">"privence"</span>, privence);</div><div class="line">			session.setAttribute(<span class="string">"author"</span>, author);</div><div class="line">			response.sendRedirect(request.getContextPath()+<span class="string">"/adminServlet"</span>);</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">else</span></div><div class="line">		&#123;</div><div class="line">			response.sendRedirect(request.getContextPath()+<span class="string">"/login.html"</span>);</div><div class="line">		&#125;</div><div class="line">&#125;</div><div class="line">	<span class="keyword">static</span>  <span class="class"><span class="keyword">class</span> <span class="title">ConnectionFactory</span></span>&#123;</div><div class="line">		<span class="keyword">private</span> <span class="keyword">static</span> String driver=<span class="string">"com.mysql.jdbc.Driver"</span>;</div><div class="line">		<span class="keyword">private</span> <span class="keyword">static</span> String url=<span class="string">"jdbc:mysql://localhost:3306/MacOS?useUnicode=true&amp;characterEncoding=UTF-8"</span>;</div><div class="line">		<span class="keyword">private</span> <span class="keyword">static</span> String userName=<span class="string">"root"</span>;</div><div class="line">		<span class="keyword">private</span> <span class="keyword">static</span> String password=<span class="string">"zx1583707135"</span>;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">static</span>  Connection <span class="title">getConnection</span><span class="params">()</span></span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			<span class="keyword">try</span> &#123;</div><div class="line">				Class.forName(driver);</div><div class="line">				<span class="keyword">return</span> DriverManager.getConnection(url,userName,password);</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">catch</span>(Exception e)</div><div class="line">			&#123;</div><div class="line">				e.printStackTrace();</div><div class="line">				<span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">	&#125;</div><div class="line"></div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">******************************************************************************************</div><div class="line"><span class="keyword">package</span> chi;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.sql.Connection;</div><div class="line"><span class="keyword">import</span> java.sql.ResultSet;</div><div class="line"><span class="keyword">import</span> java.sql.Statement;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ResourceClose</span></span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">(ResultSet rs,Statement stmt,Connection conn)</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		<span class="keyword">try</span> &#123;</div><div class="line">			<span class="keyword">if</span>(rs!=<span class="keyword">null</span>)rs.close();</div><div class="line">			<span class="keyword">if</span>(stmt!=<span class="keyword">null</span>)stmt.close();</div><div class="line">			<span class="keyword">if</span>(conn!=<span class="keyword">null</span>)conn.close();</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">catch</span>(Exception e)</div><div class="line">		&#123;</div><div class="line">			e.printStackTrace();</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">(ResultSet rs,Statement stmt)</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		close(rs,stmt,<span class="keyword">null</span>);</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">(Statement stmt,Connection conn)</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		close(<span class="keyword">null</span>,stmt,conn);</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">(ResultSet rs,Connection conn)</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		close(<span class="keyword">null</span>,<span class="keyword">null</span>,conn);</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">(ResultSet rs)</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		close(rs,<span class="keyword">null</span>,<span class="keyword">null</span>);</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">(Statement stmt)</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		close(<span class="keyword">null</span>,stmt,<span class="keyword">null</span>);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="信息输出"><a href="#信息输出" class="headerlink" title="信息输出"></a>信息输出</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> chi;</div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> java.io.PrintWriter;</div><div class="line"><span class="keyword">import</span> javax.servlet.ServletException;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AdminServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span></span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request,HttpServletResponse response)</span></span></div><div class="line"><span class="function">	<span class="keyword">throws</span> ServletException,IOException</span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		<span class="keyword">this</span>.doPost(request, response);</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request,HttpServletResponse response)</span></span></div><div class="line"><span class="function">	<span class="keyword">throws</span> ServletException,IOException</span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</div><div class="line">		HttpSession session=request.getSession();</div><div class="line">      <span class="comment">//实例化session获取session的信息</span></div><div class="line">      <span class="comment">//从session获取信息；</span></div><div class="line">		String sex=(String)session.getAttribute(<span class="string">"sex"</span>);</div><div class="line">		String name=(String)session.getAttribute(<span class="string">"name"</span>);</div><div class="line">		String privence=(String)session.getAttribute(<span class="string">"privence"</span>);</div><div class="line">		String author=(String)session.getAttribute(<span class="string">"author"</span>);</div><div class="line">		PrintWriter out=response.getWriter();</div><div class="line">		out.println(<span class="string">"&lt;!DOCTYPE html&gt;"</span>);</div><div class="line">		out.println(<span class="string">"&lt;html&gt;&lt;head&gt;&lt;title&gt;A servlet&lt;/title&gt;&lt;/head&gt;&lt;body&gt;"</span>);</div><div class="line">		<span class="keyword">if</span>(name!=<span class="keyword">null</span>)</div><div class="line">		&#123;</div><div class="line">			out.println(<span class="string">"登陆成功，欢迎你："</span>+name+<span class="string">"&lt;br&gt;"</span>);</div><div class="line">			out.println(<span class="string">"您的个人信息为：&lt;br&gt;"</span>);</div><div class="line">			out.println(<span class="string">"性别："</span>+sex+<span class="string">"&lt;br&gt;"</span>);</div><div class="line">			out.println(<span class="string">"省份："</span>+privence+<span class="string">"&lt;br&gt;"</span>);</div><div class="line">	        out.println(<span class="string">"自我简介："</span>+author+<span class="string">"&lt;br&gt;"</span>);	</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">else</span></div><div class="line">		&#123;</div><div class="line">			response.sendRedirect(request.getContextPath()+<span class="string">"/login.html"</span>);</div><div class="line">		&#125;</div><div class="line">		out.println(<span class="string">"&lt;/body&gt;&lt;/html&gt;"</span>);</div><div class="line">		out.flush();</div><div class="line">		out.close();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="运行结果"><a href="#运行结果" class="headerlink" title="运行结果"></a>运行结果</h5><p>登陆成功，欢迎你：zhangsan<br>您的个人信息为：<br>性别：男<br>省份：内蒙古自治区<br>自我简介：我是一名大学生</p>
<h3 id="4-JSP语法基础"><a href="#4-JSP语法基础" class="headerlink" title="4.JSP语法基础"></a>4.JSP语法基础</h3><p>jsp写法一句话说来就是将java语言和html语言和谐得糅合到一起。一来减少工作（按照纯servlet的写法，你可能要分别写html页面和java类文件），二来，，，没有二来。</p>
<h4 id="JSP元素"><a href="#JSP元素" class="headerlink" title="JSP元素"></a>JSP元素</h4><h5 id="样例"><a href="#样例" class="headerlink" title="样例"></a>样例</h5><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></div><div class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</div><div class="line"><span class="comment">//定义页面属性</span></div><div class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span>&gt;</div><div class="line">&lt;title&gt;JSP脚本元素&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">    &lt;%!</div><div class="line">  <span class="comment">//全局变量标签，如果不加“！”表示局部变量；</span></div><div class="line">        <span class="keyword">int</span> count=<span class="number">0</span>; </div><div class="line">        String color[]=&#123;<span class="string">"red"</span>,<span class="string">"green"</span>,<span class="string">"blue"</span>&#125;;</div><div class="line">        <span class="function">String <span class="title">getColor</span><span class="params">(<span class="keyword">int</span> i)</span></span></div><div class="line"><span class="function">        </span>&#123;</div><div class="line">        	<span class="keyword">return</span> color[i];</div><div class="line">        &#125;</div><div class="line">        %&gt;</div><div class="line">    &lt;%=++count%&gt;&lt;br&gt;</div><div class="line"> <span class="comment">//表达式（有具体值）使用“&lt;%=&gt;”标签</span></div><div class="line">    &lt;%=getColor(<span class="number">1</span>)%&gt;&lt;br&gt;&lt;br&gt;</div><div class="line">    &lt;table&gt;</div><div class="line">    &lt;tr&gt;&lt;td colspan="9"&gt;九九乘法表&lt;/td&gt;&lt;/tr&gt;</div><div class="line">&lt;%<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;=<span class="number">9</span>;j++) &#123;</div><div class="line">%&gt;</div><div class="line">&lt;tr&gt;</div><div class="line">&lt;% <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=j;i++)&#123;%&gt;</div><div class="line">&lt;td&gt;&lt;%=j%&gt;*&lt;%= i%&gt;=&lt;%=i*j %&gt;&lt;/td&gt;</div><div class="line">&lt;%&#125;%&gt;</div><div class="line">&lt;/tr&gt;</div><div class="line">&lt;%&#125;%&gt;</div><div class="line">&lt;/table&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure>
<p>「运行结果：」</p>
<p>1</p>
<p>green</p>
<table>
<thead>
<tr>
<th>九九乘法表</th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>0*0=0</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>1*0=0</td>
<td>1*1=1</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>2*0=0</td>
<td>2*1=2</td>
<td>2*2=4</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>3*0=0</td>
<td>3*1=3</td>
<td>3*2=6</td>
<td>3*3=9</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>4*0=0</td>
<td>4*1=4</td>
<td>4*2=8</td>
<td>4*3=12</td>
<td>4*4=16</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>5*0=0</td>
<td>5*1=5</td>
<td>5*2=10</td>
<td>5*3=15</td>
<td>5*4=20</td>
<td>5*5=25</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>6*0=0</td>
<td>6*1=6</td>
<td>6*2=12</td>
<td>6*3=18</td>
<td>6*4=24</td>
<td>6*5=30</td>
<td>6*6=36</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>7*0=0</td>
<td>7*1=7</td>
<td>7*2=14</td>
<td>7*3=21</td>
<td>7*4=28</td>
<td>7*5=35</td>
<td>7*6=42</td>
<td>7*7=49</td>
<td></td>
<td></td>
</tr>
<tr>
<td>8*0=0</td>
<td>8*1=8</td>
<td>8*2=16</td>
<td>8*3=24</td>
<td>8*4=32</td>
<td>8*5=40</td>
<td>8*6=48</td>
<td>8*7=56</td>
<td>8*8=64</td>
<td></td>
</tr>
<tr>
<td>9*0=0</td>
<td>9*1=9</td>
<td>9*2=18</td>
<td>9*3=27</td>
<td>9*4=36</td>
<td>9*5=45</td>
<td>9*6=54</td>
<td>9*7=63</td>
<td>9*8=72</td>
<td>9*9=81</td>
</tr>
</tbody>
</table>
<h5 id="page指令"><a href="#page指令" class="headerlink" title="page指令"></a>page指令</h5><p>用于设置整个jsp页面的属性。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></div><div class="line">    pageEncoding=<span class="string">"UTF-8"</span>  <span class="keyword">import</span>=<span class="string">"java.util.*,java.io.*"</span>%&gt;</div><div class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span>&gt;</div><div class="line">&lt;title&gt;page 指令&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">&lt;h1&gt;欢迎光临，你个小bicth&lt;/h1&gt;</div><div class="line">&lt;h1&gt;今天是：&lt;/h1&gt;</div><div class="line">&lt;h1&gt;&lt;%=new Date()%&gt;&lt;/h1&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure>
<p>上面例子展示了对java包的引用，从而能在页面中使用Date()方法来输出时间；</p>
<p>「运行结果」</p>
<p>欢迎光临，你个小bicth</p>
<p>今天是：</p>
<p>Thu Oct 05 14:35:04 CST 2017</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></div><div class="line">    pageEncoding=<span class="string">"UTF-8"</span>  errorPage=<span class="string">"errorPage.jsp"</span>%&gt;</div><div class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span>&gt;</div><div class="line">&lt;title&gt;error属性&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">&lt;%Integer.parseInt(<span class="string">"aaa"</span>);%&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div><div class="line"></div><div class="line"><span class="number">1</span>.设置errorPage，指向errorPage.jsp页面（当前页面出现错误时，跳转到指定的页面）</div><div class="line"><span class="number">2</span>.设置一个数据类型转换错误的语句来产生错误；（字符串转<span class="keyword">int</span>型）</div><div class="line">******************************************************************************************</div><div class="line"></div><div class="line">&lt;%@ page language=<span class="string">"java"</span> isErrorPage=<span class="string">"true"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></div><div class="line">    pageEncoding=<span class="string">"UTF-8"</span> <span class="keyword">import</span>=<span class="string">"java.util.*"</span>%&gt;</div><div class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span>&gt;</div><div class="line">&lt;title&gt;error&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">&lt;h1&gt;出现错误&lt;%=exception.getMessage() %&gt;&lt;/h1&gt;</div><div class="line"></div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div><div class="line"></div><div class="line"><span class="number">1</span>.设置isErrorPage为<span class="keyword">true</span>（使当前页面具备errorPage属性，也就是接受其他页面的errorPage跳转请求）；</div><div class="line"><span class="number">2</span>.使用exception.getMessage()输出错误类型；</div></pre></td></tr></table></figure>
<p>上面一段jsp代码调用下面一段jsp代码，输出错误类型；</p>
<p>运行结果：出现错误For input string: “aaa”</p>
<h5 id="include指令"><a href="#include指令" class="headerlink" title="include指令"></a>include指令</h5><p>将file属性指定页面内容静态包含到当前页面。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></div><div class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</div><div class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span>&gt;</div><div class="line">&lt;title&gt;include指令&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">&lt;font color=green size=3&gt;This is my main page.&lt;/font&gt;&lt;br&gt;&lt;br&gt;</div><div class="line">&lt;%<span class="meta">@include</span> file=<span class="string">"insert.jsp"</span>%&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div><div class="line"></div><div class="line"></div><div class="line"><span class="number">1</span>.插入指令（&lt;%<span class="meta">@include</span> file=<span class="string">"insert.jsp"</span>%&gt;），将insert.jsp页面的内容包含到当前界面；</div><div class="line">*********************************************************************************************</div><div class="line"></div><div class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></div><div class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</div><div class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span>&gt;</div><div class="line">&lt;title&gt;include指令&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">********插入界面*********&lt;br&gt;</div><div class="line">&lt;font size=3 color=blue&gt;阿黛尔中气十足的声线，不颓，不吵&lt;/font&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure>
<p>运行结果：</p>
<p>This is my main page.</p>
<p>插入界面</p>
<p>阿黛尔中气十足的声线，不颓，不吵</p>
<h5 id="动作元素"><a href="#动作元素" class="headerlink" title="动作元素"></a>动作元素</h5><figure class="highlight jsp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></div><div class="line">    pageEncoding=<span class="string">"UTF-8"</span> <span class="keyword">import</span>=<span class="string">"java.util.*"</span>%&gt;</div><div class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span>&gt;</div><div class="line">&lt;title&gt;JSP动作元素&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">&lt;%request.setCharacterEncoding(<span class="string">"utf-8"</span>);</div><div class="line">response.setCharacterEncoding(<span class="string">"utf-8"</span>);</div><div class="line">%&gt;</div><div class="line">&lt;jsp:forward page=<span class="string">"target.jsp?name=zhangsan&amp;password=admin123&amp;tips=妈的法克儿"</span>&gt; </div><div class="line">    &lt;jsp:param name=<span class="string">"age"</span> value=<span class="string">"28"</span>/&gt;</div><div class="line">    &lt;jsp:param name=<span class="string">"phone"</span> value=<span class="string">"344235454231"</span>/&gt;</div><div class="line">    &lt;jsp:param name="phone" value="133322458257"/&gt;&lt;/jsp:forward&gt;</div><div class="line"></div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div><div class="line"></div><div class="line"><span class="number">1</span>.jsp:forword -- 实现request的转发，可以指定jsp文件，html文件或Servlet。</div><div class="line"><span class="number">2</span>.jsp:param --指定参数以及其对应的值，其他页面（跳转后的）可以使用request来读取这些参数的值。</div></pre></td></tr></table></figure>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></div><div class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</div><div class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span>&gt;</div><div class="line">&lt;title&gt;target&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">&lt;%</div><div class="line">request.setCharacterEncoding(<span class="string">"utf-8"</span>);</div><div class="line">response.setCharacterEncoding(<span class="string">"utf-8"</span>);</div><div class="line">String name=request.getParameter(<span class="string">"name"</span>);</div><div class="line">String password=request.getParameter(<span class="string">"password"</span>);</div><div class="line">String tips=request.getParameter(<span class="string">"tips"</span>);</div><div class="line">String age=request.getParameter(<span class="string">"age"</span>);</div><div class="line">String phones[]=request.getParameterValues(<span class="string">"phone"</span>);</div><div class="line">%&gt;</div><div class="line">&lt;font size=<span class="number">3</span> color=green&gt;</div><div class="line">用户名：&lt;%=name %&gt;&lt;br&gt;</div><div class="line">密码：&lt;%=password %&gt;&lt;br&gt;</div><div class="line">宣言：&lt;%=tips %&gt;&lt;br&gt;</div><div class="line">年龄：&lt;%=age %&gt;&lt;br&gt;</div><div class="line">&lt;%<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;phones.length;i++)&#123; %&gt;</div><div class="line">电话：&lt;%=phones[i] %&gt;&lt;br&gt;</div><div class="line">&lt;%&#125; %&gt;</div><div class="line">&lt;/font&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div><div class="line"></div><div class="line"><span class="number">1</span>.使用request来接受参数值；</div><div class="line"><span class="number">2</span>.String[]数组可以接受所有同一参数名的不同数值；</div><div class="line"><span class="number">3</span>.对request进行编码设置（utf-<span class="number">8</span>）用以正确传递汉字；</div></pre></td></tr></table></figure>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></div><div class="line">    pageEncoding=<span class="string">"UTF-8"</span> <span class="keyword">import</span>=<span class="string">"java.util.*"</span>%&gt;</div><div class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span>&gt;</div><div class="line">&lt;title&gt;include&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">&lt;font&gt;下面是包含的页面信息：&lt;/font&gt;&lt;br&gt;</div><div class="line">&lt;jsp:include page=<span class="string">"innerPage.jsp"</span>&gt;</div><div class="line">&lt;jsp:param name=<span class="string">"age"</span> value=<span class="string">"19"</span>/&gt;</div><div class="line">&lt;jsp:param name=<span class="string">"phone"</span> value=<span class="string">"34252452452"</span>/&gt;</div><div class="line">&lt;jsp:param name=<span class="string">"phone"</span> value=<span class="string">"21423545345"</span>/&gt;</div><div class="line">&lt;/jsp:include&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div><div class="line"><span class="number">1</span>.jsp:include --将page属性指定的页面内容动态包含到当前页面；</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></div><div class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</div><div class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span>&gt;</div><div class="line">&lt;title&gt;2333&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">&lt;%String age=request.getParameter(<span class="string">"age"</span>);</div><div class="line">String phones[]=request.getParameterValues(<span class="string">"phone"</span>);%&gt;</div><div class="line">&lt;font size=<span class="number">3</span> color=red&gt;</div><div class="line">年龄：&lt;%=age %&gt;&lt;br&gt;</div><div class="line">&lt;%<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;phones.length;i++) &#123;%&gt;</div><div class="line">电话：&lt;%=phones[i] %&gt;&lt;br&gt;</div><div class="line">&lt;%&#125; %&gt;</div><div class="line">&lt;/font&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure>
<h4 id="JSP内置对象"><a href="#JSP内置对象" class="headerlink" title="JSP内置对象"></a>JSP内置对象</h4><p>内置对象又隐含对象，在JSP页面初始化是由Web容器为用户自动创建，使用JSP进行页面编程时可以不加声明和创建，直接在java脚本和表达式中使用这些对象。</p>
<p>（我一开始还以为是因为在page属性里引用了 java.util.* 的原因）</p>
<p>JSP内置对象有九个：</p>
<p>request（请求信息），response（响应信息），session（会话），application（用户间数据共享），pageContext（对JSP页面内所有对象及名字空间的访问），out（输出），config（向Servlet传递信息），page（指向当前JSP页面，类似于this），exception（出现错误时，产生此例外对象，用以输出错误信息）</p>
<h5 id="out"><a href="#out" class="headerlink" title="out"></a>out</h5><figure class="highlight jsp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></div><div class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</div><div class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span>&gt;</div><div class="line">&lt;title&gt;JSP内置对象使用&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">&lt;%</div><div class="line">out.println(<span class="string">"&lt;table border=\"1\"&gt;"</span>);</div><div class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">9</span>;i++)</div><div class="line">&#123;</div><div class="line">	out.println(<span class="string">"&lt;tr&gt;"</span>);</div><div class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=i;j++)</div><div class="line">&#123;</div><div class="line">	out.println(<span class="string">"&lt;td&gt;"</span>+i+<span class="string">"*"</span>+j+<span class="string">"="</span>+i*j+<span class="string">"&lt;/td&gt;"</span>);&#125;</div><div class="line">&#125;</div><div class="line">%&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div><div class="line"></div><div class="line"></div><div class="line"><span class="number">1</span>.out打印九九乘法表</div></pre></td></tr></table></figure>
<h5 id="request、response"><a href="#request、response" class="headerlink" title="request、response"></a>request、response</h5><figure class="highlight jsp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line">&lt;!DOCTYPE html&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta charset=<span class="string">"UTF-8"</span>&gt;</div><div class="line">&lt;meta http-equiv=<span class="string">"content-type"</span> content=<span class="string">"text/html;charset=UTF-8"</span>&gt;</div><div class="line">&lt;title&gt;GG&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">&lt;form action=<span class="string">"resparam.jsp"</span> method=<span class="string">"post"</span>&gt;</div><div class="line">&lt;font size=3 color=green&gt;用户名：&lt;/font&gt;	&lt;input type="text" name="name"&gt;</div><div class="line">&lt;input type=<span class="string">"submit"</span> value=<span class="string">"提交"</span>&gt;</div><div class="line">&lt;/form&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></div><div class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</div><div class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span>&gt;</div><div class="line">&lt;title&gt;resparam&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">&lt;%</div><div class="line">request.setCharacterEncoding(<span class="string">"utf-8"</span>);</div><div class="line">response.setCharacterEncoding(<span class="string">"utf-8"</span>);</div><div class="line">String name=request.getParameter(<span class="string">"name"</span>);</div><div class="line">%&gt;</div><div class="line">&lt;font size=3 color=red&gt;欢迎回来，&lt;%=name%&gt;&lt;/font&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div><div class="line"></div><div class="line"></div><div class="line"><span class="number">1</span>.html页面form表单发送信息，jsp中request与response接收参数</div></pre></td></tr></table></figure>
<h5 id="session、application"><a href="#session、application" class="headerlink" title="session、application"></a>session、application</h5><figure class="highlight jsp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div></pre></td><td class="code"><pre><div class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></div><div class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</div><div class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span>&gt;</div><div class="line">&lt;title&gt;JSP内置对象的使用&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">&lt;%       </div><div class="line">request.setCharacterEncoding(<span class="string">"utf-8"</span>);</div><div class="line">request.setAttribute(<span class="string">"name"</span>,<span class="string">"lisa"</span>);</div><div class="line">session.setAttribute(<span class="string">"name"</span>,<span class="string">"程嘉"</span>);</div><div class="line">application.setAttribute(<span class="string">"name"</span>,<span class="string">"子衿"</span>);</div><div class="line">request.getRequestDispatcher(<span class="string">"requestPage.jsp"</span>).forward(request, response);</div><div class="line">%&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></div><div class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</div><div class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span>&gt;</div><div class="line">&lt;title&gt;JSP内置对象的使用&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">&lt;font size=3 color=green&gt;request中name：&lt;/font&gt;&lt;%=request.getAttribute("name")%&gt;&lt;br&gt;</div><div class="line">&lt;font size=3 color=blue&gt;session中的name：&lt;/font&gt;&lt;%=session.getAttribute("name") %&gt;&lt;br&gt;</div><div class="line">&lt;font size=3 color=pink&gt;application中的name：&lt;/font&gt;&lt;%=application.getAttribute("name") %&gt;&lt;br&gt;</div><div class="line">&lt;br&gt;</div><div class="line">&lt;a href="session1Page.jsp"&gt;链接1&lt;/a&gt;&lt;br&gt;</div><div class="line">&lt;a href="session2Page.jsp"&gt;链接2&lt;/a&gt;&lt;br&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div><div class="line"></div><div class="line"></div><div class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></div><div class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</div><div class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span>&gt;</div><div class="line">&lt;title&gt;sessionPage1&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">&lt;font size=3 color=green&gt;request中name：&lt;/font&gt;&lt;%=request.getAttribute("name")%&gt;&lt;br&gt;</div><div class="line">&lt;font size=3 color=blue&gt;session中的name：&lt;/font&gt;&lt;%=session.getAttribute("name") %&gt;&lt;br&gt;</div><div class="line">&lt;font size=3 color=pink&gt;application中的name：&lt;/font&gt;&lt;%=application.getAttribute("name") %&gt;&lt;br&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div><div class="line"></div><div class="line">(session2Page.jsp 的代码跟session1相同)</div><div class="line"></div><div class="line"><span class="number">1</span>.分别使用request、session、application发送信息，然后接收并显示；</div><div class="line"><span class="number">2</span>.这些对象的作用区间比较在之前作用域对象一节里面讲过了，application &gt; session &gt;request;</div></pre></td></tr></table></figure>
<h4 id="JSP注释"><a href="#JSP注释" class="headerlink" title="JSP注释"></a>JSP注释</h4><figure class="highlight jsp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">html注释：&lt;!--*******--&gt;</div><div class="line">java注释：<span class="comment">//**********</span></div><div class="line">jsp注释：&lt;%--********--%&gt;</div></pre></td></tr></table></figure>
<h4 id="JSP路径问题"><a href="#JSP路径问题" class="headerlink" title="JSP路径问题"></a>JSP路径问题</h4><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></div><div class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</div><div class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span>&gt;</div><div class="line">&lt;title&gt;路径相关函数&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">&lt;font color=green&gt;Web应用的相对路径：&lt;/font&gt;&lt;br&gt;</div><div class="line">getContextPath():&lt;%=request.getContextPath() %&gt;&lt;br&gt;</div><div class="line">&lt;font color=green&gt;request相对于web应用的相对路径：&lt;/font&gt;&lt;br&gt;</div><div class="line">getServletPath():&lt;%=request.getServletPath()%&gt;&lt;br&gt;</div><div class="line">&lt;font color=green&gt;request相对于web服务器的相对路径：&lt;/font&gt;&lt;br&gt;</div><div class="line">getRequestURL():&lt;%=request.getRequestURL()%&gt;&lt;br&gt;</div><div class="line">&lt;font color=green&gt;request绝对路径：&lt;/font&gt;&lt;br&gt;</div><div class="line">getRequestURI():&lt;%=request.getRequestURI()%&gt;&lt;br&gt;</div><div class="line">&lt;font color=green&gt;“/”相对于本地磁盘的绝对路径，即当前应用的物理地址：&lt;/font&gt;&lt;br&gt;</div><div class="line">getRealPath():&lt;%=application.getRealPath(<span class="string">"/"</span>)%&gt;&lt;br&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure>
<p>运行结果：</p>
<p><img src="/Users/zhangxuan/Pictures/截图/屏幕快照 2017-10-06 下午4.23.01.png" alt="屏幕快照 2017-10-06 下午4.23.01"></p>
<h3 id="5-过滤器与监听器"><a href="#5-过滤器与监听器" class="headerlink" title="5.过滤器与监听器"></a>5.过滤器与监听器</h3><h4 id="过滤器"><a href="#过滤器" class="headerlink" title="过滤器"></a>过滤器</h4><h5 id="（1）开发步骤"><a href="#（1）开发步骤" class="headerlink" title="（1）开发步骤"></a>（1）开发步骤</h5><p>1.创建一个实现了javax.servlet.Filter接口的类。</p>
<p>2.重写类中的init（FilterConfig filterConfig）方法，该方法内一般编写初始化Filter需要执行的代码。</p>
<p>3.重写类中的doFilter方法，该方法中编写实现过滤操作的代码。</p>
<p>4.重写类中的destroy方法，提供一个空实现，或者编写实现资源释放的代码，来完成关闭过滤器使用的文件或数据连接池等清除任务。</p>
<p>5.针对被访问的目标web组件注册过滤器（在web.xml文件中指定需要过滤的web组件的URL）</p>
<h5 id="（2）应用举例"><a href="#（2）应用举例" class="headerlink" title="（2）应用举例"></a>（2）应用举例</h5><p>使用过滤器设置所有web组件的编码方式。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> listen;</div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> javax.servlet.Filter;</div><div class="line"><span class="keyword">import</span> javax.servlet.FilterChain;</div><div class="line"><span class="keyword">import</span> javax.servlet.FilterConfig;</div><div class="line"><span class="keyword">import</span> javax.servlet.ServletException;</div><div class="line"><span class="keyword">import</span> javax.servlet.ServletRequest;</div><div class="line"><span class="keyword">import</span> javax.servlet.ServletResponse;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EncodeFilter</span> <span class="keyword">implements</span> <span class="title">Filter</span></span>&#123;</div><div class="line">  <span class="comment">//FilterConfig可以获取过滤器在web.xml中设置的参数值	</span></div><div class="line">  <span class="keyword">private</span> FilterConfig config;</div><div class="line">  <span class="comment">//初始化函数参数（init_param_encode并不是什么特别的东西，仅仅是一个字符串的名字）</span></div><div class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String INIT_PARAM_ENCODE=<span class="string">"encode"</span>;</div><div class="line">  <span class="comment">//初始化方法</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(FilterConfig config)</span><span class="keyword">throws</span> ServletException</span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		<span class="keyword">this</span>.config=config;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest request,ServletResponse response,FilterChain chain)</span></span></div><div class="line"><span class="function">	<span class="keyword">throws</span> IOException,ServletException</span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		HttpServletRequest req=(HttpServletRequest)request;</div><div class="line">		HttpServletResponse res=(HttpServletResponse)response;</div><div class="line">      <span class="comment">//encode获取的是编码方式（从web.xml中&lt;init-param&gt;中获取名为“encode”的参数的值）</span></div><div class="line">		String encode=config.getInitParameter(INIT_PARAM_ENCODE);</div><div class="line">		<span class="keyword">if</span>(encode!=<span class="keyword">null</span>&amp;&amp;!encode.isEmpty())</div><div class="line">		&#123;</div><div class="line">          <span class="comment">//设置request的编码方式</span></div><div class="line">			req.setCharacterEncoding(encode);</div><div class="line">		&#125;</div><div class="line">      <span class="comment">//转发请求，（request -&gt; filter1 -&gt; filter2 -&gt;filter3 -&gt; .... -&gt; request resource.）</span></div><div class="line">      <span class="comment">//转发给下一个过滤器（如果有），或者请求的资源（如果没有下一个过滤器）</span></div><div class="line">		chain.doFilter(request, response);</div><div class="line">      </div><div class="line">		<span class="keyword">if</span>(encode!=<span class="keyword">null</span>&amp;&amp;!encode.isEmpty())</div><div class="line">		&#123;</div><div class="line">          <span class="comment">//设置response的编码方式</span></div><div class="line">			res.setCharacterEncoding(encode);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destory</span><span class="params">()</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>web.xml文件配置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>EncodeFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span><span class="comment">&lt;!-- 过滤器名称 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>listen.EncodeFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span><span class="comment">&lt;!-- 过滤器所在路径（packge名+class名） --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">init-param</span>&gt;</span><span class="comment">&lt;!-- 数据存放（类似request里的Parameter），一个param-name对应一个param-value --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encode<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">param-value</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span><span class="comment">&lt;!-- 过滤器过滤对象的设置 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>EncodeFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span><span class="comment">&lt;!-- 过滤器名称 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span><span class="comment">&lt;!-- 过滤器过滤对象的路径（这里设置的是全部web应用调用此过滤器） --&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></div></pre></td></tr></table></figure>
<p>测试：</p>
<p>（由于上面例子过滤器是将所有web应用编码方式设置为“utf-8”，效果并不直观，于是我将编码方式设置为“ASCII”，然后新建一个html页面尝试输出中文，结果一目了然）</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>中文测试<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span><span class="comment">&lt;!-- html页面本身的charset设置在过滤器老大哥面前还是要往后稍一稍 --&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">align</span>=<span class="string">"center"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">size</span>=<span class="string">3</span> <span class="attr">color</span>=<span class="string">green</span> &gt;</span></div><div class="line">此情可待成追忆；<span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">只是当时已惘然。</div><div class="line"><span class="tag">&lt;/<span class="name">font</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p><img src="/Users/zhangxuan/Pictures/截图/utf-8.png" style="zoom:50%"></p>
<p><img src="/Users/zhangxuan/Pictures/截图/ASCII.png" style="zoom:50%"></p>
<h4 id="监听器"><a href="#监听器" class="headerlink" title="监听器"></a>监听器</h4><h5 id="监听器接口"><a href="#监听器接口" class="headerlink" title="监听器接口"></a>监听器接口</h5><p>1.SercletContext对象监听器接口</p>
<p>1）ServletContextListener：web应用程序启动和结束时</p>
<p>2）ServletContextAttributeListener：ServletContext对象中属性变动时</p>
<p>2.HttpSession对象监听器接口</p>
<p>1）HttpSessionListener</p>
<p>2）HttpSessionAttribute</p>
<p>3）HttpSessionBindingListener</p>
<p>4）HttpSessionActivationListener</p>
<p>3.ServletRequest对象监听器接口</p>
<p>1）ServletRequestListener</p>
<p>2）ServletRequestAttributeListener</p>
<h5 id="实例演示"><a href="#实例演示" class="headerlink" title="实例演示"></a>实例演示</h5><p>使用监听器来统计在线人数</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> listen;</div><div class="line"><span class="keyword">import</span> java.util.HashSet;</div><div class="line"><span class="keyword">import</span> javax.servlet.ServletContext;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpSessionEvent;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpSessionListener;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CountOnLineListener</span> <span class="keyword">implements</span> <span class="title">HttpSessionListener</span></span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sessionCreated</span><span class="params">(HttpSessionEvent event)</span></span></div><div class="line"><span class="function">      <span class="comment">//当有新的HttpSession对象创建，执行此方法（HttpSessionListener自带的方法）</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		HttpSession session=event.getSession();</div><div class="line">      <span class="comment">//构建session</span></div><div class="line">		ServletContext application=session.getServletContext();</div><div class="line">      <span class="comment">//获取ServletContext</span></div><div class="line">		HashSet sessions=(HashSet)application.getAttribute(<span class="string">"sessions"</span>);</div><div class="line">      <span class="comment">//在application范围内由一个HashSet集保存所有的session（“sessions”是ServletContext中存放session的参数）</span></div><div class="line">		<span class="keyword">if</span>(sessions==<span class="keyword">null</span>)</div><div class="line">         <span class="comment">//如果HashSet为空则定义为空的Hashset表,（这个初始化方法真滴奇特，或许这就是标准写法吧）</span></div><div class="line">		&#123;</div><div class="line">			sessions=<span class="keyword">new</span> HashSet();</div><div class="line">			application.setAttribute(<span class="string">"sessions"</span>,sessions);</div><div class="line">		&#125;</div><div class="line">		sessions.add(session);<span class="comment">//创建的新的session就添加到HashSet集合中</span></div><div class="line">		application.setAttribute(<span class="string">"sessions"</span>, sessions);</div><div class="line">	&#125;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sessionDestoryed</span><span class="params">(HttpSessionEvent event)</span></span></div><div class="line"><span class="function">          <span class="comment">//当有HttpSession对象被销毁，执行此方法（HttpSessionListener中自带的方法）</span></span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			HttpSession session=event.getSession();</div><div class="line">			ServletContext application=session.getServletContext();</div><div class="line">			HashSet sessions=(HashSet)application.getAttribute(<span class="string">"sessions"</span>);</div><div class="line">			<span class="keyword">if</span>(session!=<span class="keyword">null</span>)<span class="comment">//session不为空则将session从HashSet集合中移除</span></div><div class="line">			&#123;</div><div class="line">				sessions.remove(session);</div><div class="line">			&#125;</div><div class="line">			application.setAttribute(<span class="string">"sessions"</span>, sessions);</div><div class="line">		&#125;</div><div class="line">	&#125;</div></pre></td></tr></table></figure>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></div><div class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</div><div class="line">    &lt;%<span class="meta">@page</span> <span class="keyword">import</span>=<span class="string">"java.util.*,listen.*"</span> %&gt;</div><div class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span>&gt;</div><div class="line">&lt;title&gt;同在线人数&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">&lt;%</div><div class="line">HashSet hs=(HashSet)application.getAttribute(<span class="string">"sessions"</span>);</div><div class="line">  <span class="comment">//创建一个HashSet集合对象来读取application中的“sessions”信息（此application中所有的session信息）；</span></div><div class="line">%&gt;</div><div class="line">&lt;center&gt;&lt;font color=green size=<span class="number">4</span>&gt;系统当前的在线人数为：</div><div class="line">  <span class="comment">//访问人数即为HashSet中的size（）方法传递的参数；</span></div><div class="line">&lt;%=hs.size()%&gt;</div><div class="line">&lt;/font&gt;&lt;/center&gt;</div><div class="line">&lt;br&gt;</div><div class="line">&lt;br&gt;</div><div class="line">&lt;br&gt;</div><div class="line">&lt;center&gt;&lt;font size=4 color=blue&gt;&lt;b&gt;信息系统主页&lt;/b&gt;&lt;/font&gt;&lt;/center&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure>
<p>web.xml配置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">listener</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>listen.CountOnLineListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span><span class="comment">&lt;!-- 给出java类路径就行了 --&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">listener</span>&gt;</span></div></pre></td></tr></table></figure>
<p><img src="/Users/zhangxuan/Pictures/截图/在线人数.png" style="zoom:40%"></p>
<h5 id="监听器实例2"><a href="#监听器实例2" class="headerlink" title="监听器实例2"></a>监听器实例2</h5><p>通过HttpSessionBindingEvent接口实现对session中对象set和remove操作的监听</p>
<p>（此监听器不需要设置web.xml文件即可运行）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> listen;</div><div class="line"></div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpSessionBindingEvent;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpSessionBindingListener;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span>  <span class="keyword">implements</span> <span class="title">HttpSessionBindingListener</span></span>&#123;</div><div class="line">  <span class="comment">//通过HttpSessionBindingListener接口实现；</span></div><div class="line">	<span class="keyword">private</span> String name;</div><div class="line">	<span class="keyword">private</span> String data;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">(String name)</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">      <span class="comment">//将参数name的值赋给本函数中定义的name变量；</span></div><div class="line">		<span class="keyword">this</span>.name=name;</div><div class="line">	&#125;</div><div class="line">  <span class="comment">//session中添加对象时调用（session.setAttribute("user",user)）</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">valueBound</span><span class="params">(HttpSessionBindingEvent arg0)</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		<span class="keyword">this</span>.data=name+<span class="string">"被绑定在HttpSession对象中"</span>;</div><div class="line">	&#125;</div><div class="line">  <span class="comment">//session中移除对象时调用（session.removeAttribute("user")）</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">valueUnbound</span><span class="params">(HttpSessionBindingEvent arg0)</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		<span class="keyword">this</span>.data=name+<span class="string">"被移除出HttpSession对象"</span>;</div><div class="line">	&#125;</div><div class="line">  <span class="comment">//获取data参数值；</span></div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getData</span><span class="params">()</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.data;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></div><div class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</div><div class="line">    &lt;%<span class="meta">@page</span> <span class="keyword">import</span>=<span class="string">"listen.User"</span> %&gt;</div><div class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span>&gt;</div><div class="line">&lt;title&gt;对象绑定监听&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">&lt;%</div><div class="line">User user=<span class="keyword">new</span> User(<span class="string">"张三"</span>);<span class="comment">//初始化User方法（继承自listen.User.class）</span></div><div class="line">session.setAttribute(<span class="string">"user"</span>, user);<span class="comment">//设定session对象，下面输出对应信息（data值）</span></div><div class="line">%&gt;</div><div class="line">&lt;center&gt;&lt;font size=3 color=green&gt;&lt;%=user.getData() %&gt;&lt;/font&gt;&lt;/center&gt;</div><div class="line">&lt;br&gt;</div><div class="line">&lt;%</div><div class="line">session.removeAttribute(<span class="string">"user"</span>);<span class="comment">//移除session对象，下面输出对应信息（data值）</span></div><div class="line">%&gt;</div><div class="line">&lt;center&gt;&lt;font size=3 color=red&gt;&lt;%=user.getData()%&gt;&lt;/font&gt;&lt;/center&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure>
<p><img src="/Users/zhangxuan/pictures/截图/user.png" style="zoom:50%"></p>
</p.这里有一个问题，用户名输入为汉字时无法正确读取，有可能是编码问题；>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/08/05/Java Web/" data-id="cjefnd25u0003rt76lonagvvm" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
    
</article>

  
    <article id="post-java SE" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/06/05/java SE/" class="article-date">
  <time datetime="2017-06-04T16:00:00.000Z" itemprop="datePublished">2017-06-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/06/05/java SE/">java se</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <a id="more"></a>
<h1 id="javaSE笔记"><a href="#javaSE笔记" class="headerlink" title="javaSE笔记"></a>javaSE笔记</h1><p>（写在前面：java学习阶段一也就是前端方面的知识现在告一段落了，当然短短的时间内也只能做到过一遍，日后还是要再深入学习的。根据计划现在进入第二阶段的学习（其实称之为复习更贴切），javaSE的相关知识。虽然之前上过学校开设的java专业课，但是说实话也就掌握了百分之六十吧：-），希望经过第二阶段的学习能掌握百分之九十吧，有句话说得好：javaSE反复学个几遍不丢人，哈哈哈。另外从现在开始换用markdown做笔记，边学边用。）</p>
<p>目前已经完成：</p>
<h4 id="1-使用终端运行java文件；"><a href="#1-使用终端运行java文件；" class="headerlink" title="1.使用终端运行java文件；"></a>1.使用终端运行java文件；</h4><p>javac  xxxx.java</p>
<p>java  Packagename.xxxx</p>
<h4 id="2-java控制语句"><a href="#2-java控制语句" class="headerlink" title="2.java控制语句"></a>2.java控制语句</h4><p>九九乘法表、打印1000以内质数、阶乘函数</p>
<h4 id="3-面对对象编程"><a href="#3-面对对象编程" class="headerlink" title="3.面对对象编程"></a>3.面对对象编程</h4><p>重写与重载、多态、static关键字、内部类、集合与泛型</p>
<p>明天从List及其实现类开始。</p>
<h4 id="4-常用类"><a href="#4-常用类" class="headerlink" title="4.常用类"></a>4.常用类</h4><h5 id="List接口及其实现类（ArrayList类）"><a href="#List接口及其实现类（ArrayList类）" class="headerlink" title="List接口及其实现类（ArrayList类）"></a>List接口及其实现类（ArrayList类）</h5><p>我照着书上的代码打了一遍，其具备的方法非常全面，而且还能很好的解决多种数据混合以及数组动态长度的问题，完全可以代替数组来使用了，在此决定今后能用一维数组的地方全部用ArrayList类代替。</p>
<h5 id="set及其实现类（HashSet类）"><a href="#set及其实现类（HashSet类）" class="headerlink" title="set及其实现类（HashSet类）"></a>set及其实现类（HashSet类）</h5><p>HashSet类按照哈希算法来存取对象，其存储的是无序的非重复数据。（我觉得搞随机性之类的东西可以用这个啊）</p>
<h5 id="map接口及其实现类（HashMap）"><a href="#map接口及其实现类（HashMap）" class="headerlink" title="map接口及其实现类（HashMap）"></a>map接口及其实现类（HashMap）</h5><p>Map用于存储键值对（一开始我也没有明白，后来知道什么叫键值对：例如输入1—3，那么1为键，3为值，通过查找键1可以得到其值3，其原理很像数据结构中的链表），根据键得到值，因此键不允许重复，值可以重复。</p>
<p> HashMap是一个最常用的Map，它根据键的hashCode值存储数据，根据键可以直接获取它的值，具有很快的访问速度。HashMap的键和值都可以为空，HashMap最多只允许一条记录的键为null。HashMap不支持线程的同步，即任一时刻可以有多个线程同时写HashMap，可能会导致数据的不一致。如果需要同步，可以用Collections.synchronizedMap(HashMap map)方法使HashMap具有同步的能力。（我在操作实例时使用的是LinkedHashMap，可以保留输入数据原本的顺序）</p>
<h5 id="泛型"><a href="#泛型" class="headerlink" title="泛型"></a>泛型</h5><p><em>为什么要使用泛型</em>：当存在多种类，它们具备的方法都相同，但是数据类型却不同，这时如果针对每一种数据类型都去单独编写类实在过于繁琐，使用泛型就能够很好的解决这个问题。</p>
<p><em>泛型的案例</em>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> flags;</div><div class="line"><span class="keyword">import</span> java.util.Date;</div><div class="line"></div><div class="line"><span class="comment">//泛型实例</span></div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">twelve</span> </span>&#123;</div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt;<span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">(T t)</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		System.out.println(t);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		print(<span class="string">"apple"</span>);</div><div class="line">		print(<span class="number">123</span>);</div><div class="line">		print(<span class="number">33.33</span>);</div><div class="line">		print(<span class="keyword">new</span> Date());</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>(上述案例是一个很简单的输出方法，但是也很好体现了泛型“不同数据，相同方法”的内核。ps.其实是我实在想不起来有啥代表性的关于泛型的实例，在这方面我就是个弟弟😆)</p>
<p><em>更新于17/9/13</em></p>
<h5 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h5><p>在编译的过程中难免会出现错误，仅仅依靠编译器本身的错误提示是不够的，异常处理机制可以让我们主动出击，去排查那些可能出现异常的代码段，并且根据异常的种类不同抛出不同的错误提示（需要编写）。</p>
<p>实例：try-catch-finally</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.util.InputMismatchException;</div><div class="line"><span class="keyword">import</span> java.util.Scanner;</div><div class="line"></div><div class="line"><span class="comment">//异常处理：try-catch-finally</span></div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">thirteen</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		Scanner scanner=<span class="keyword">new</span> Scanner(System.in);</div><div class="line">		System.out.println(<span class="string">"输入两个整数完成除法运算："</span>);</div><div class="line">		<span class="keyword">try</span></div><div class="line">		&#123;</div><div class="line">			<span class="keyword">int</span> a=scanner.nextInt();</div><div class="line">			<span class="keyword">int</span> b=scanner.nextInt();</div><div class="line">			System.out.println(<span class="string">"a/b的值是:"</span>+a/b);</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		<span class="keyword">catch</span>(ArithmeticException e)</div><div class="line">		&#123;</div><div class="line">			System.out.println(<span class="string">"程序出现异常，除数b不能为0。"</span>);</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">catch</span>(InputMismatchException e)</div><div class="line">		&#123;</div><div class="line">			System.out.println(<span class="string">"输入数据类型错误，请输入整形数据！"</span>);</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		System.out.println(<span class="string">"程序结束！"</span>);</div><div class="line">		scanner.close();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>try：用来存放那些可能存在异常的代码段，可以捕捉异常；</p>
<p>catch：处理try抛出的异常，可以根据程序员编写的情况来显示出异常的具体情况；</p>
<p>finally：可以让程序员在数据处理或数据异常处理后做一些清理工作。（可以没有）</p>
<h4 id="5-文件流"><a href="#5-文件流" class="headerlink" title="5.文件流"></a>5.文件流</h4><p>以我以往的见识来看，IO大概就是用来操作文件、读写数据的吧。</p>
<h5 id="创建文件"><a href="#创建文件" class="headerlink" title="创建文件"></a>创建文件</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.io.File;</div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> java.util.Scanner;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">fourteen</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		Scanner scanner=<span class="keyword">new</span> Scanner(System.in);</div><div class="line">		System.out.println(<span class="string">"请输入文件名："</span>);</div><div class="line">		String s=scanner.nextLine();</div><div class="line">		File file=<span class="keyword">new</span> File(s);     <span class="comment">//定义文件类对象（真滴是简单粗暴）</span></div><div class="line">		System.out.println(<span class="string">"文件名："</span>+file.getName()+<span class="string">"\n文件大小为："</span>+file.length()+<span class="string">"\n文件所在路径为："</span>+file.getAbsolutePath());</div><div class="line">		<span class="comment">//关于获取文件信息的一些方法</span></div><div class="line">		<span class="keyword">if</span>(file.isHidden())  <span class="comment">//判断文件的隐藏性</span></div><div class="line">			System.out.println(<span class="string">"该文件是一个隐藏文件"</span>);</div><div class="line">		<span class="keyword">else</span></div><div class="line">			System.out.println(<span class="string">"该文件不是一个隐藏文件"</span>);</div><div class="line">		</div><div class="line">		<span class="keyword">if</span>(!file.exists())    <span class="comment">//判断文件是否存在</span></div><div class="line">		&#123;</div><div class="line">			System.out.println(<span class="string">"该文件不存在，我们现在来创建它"</span>);</div><div class="line">			<span class="keyword">try</span> &#123;</div><div class="line">				file.createNewFile();    </div><div class="line">				System.out.println(<span class="string">"新文件创建成功！"</span>);</div><div class="line">			&#125;</div><div class="line">          <span class="keyword">catch</span>(IOException e)&#123;</div><div class="line">              </div><div class="line">          &#125;</div><div class="line"><span class="comment">/*来看上面创建文件的操作，首先是熟悉的try——catch组合（好吧，还有个finally），其次file.createNewFile()操作的参数（文件路径和文件名）是继承的上面定义file时的参数了，不能在括号里面添加（没错我已经试过错了）*/</span></div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>话说回来，创建文件的操作没有想象中那么复杂（我就是个弟弟）。</p>
<h5 id="文件目录"><a href="#文件目录" class="headerlink" title="文件目录"></a>文件目录</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.io.File;</div><div class="line"><span class="keyword">import</span> java.io.FilenameFilter;</div><div class="line"><span class="keyword">import</span> java.util.Scanner;</div><div class="line"></div><div class="line"><span class="comment">//IO流系列</span></div><div class="line"><span class="comment">//目录</span></div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">fifteen</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		Scanner scanner=<span class="keyword">new</span> Scanner(System.in);</div><div class="line">		System.out.println(<span class="string">"请输入想要访问的目录："</span>);</div><div class="line">		String s=scanner.nextLine();</div><div class="line">		File dirFile=<span class="keyword">new</span> File(s);</div><div class="line">		String []allresults=dirFile.list();  </div><div class="line">      <span class="comment">//将访问目录下的文件以字符串数组的形式存放</span></div><div class="line">		<span class="keyword">for</span>(String name : allresults) <span class="comment">//增强型循环，主要用来数组的遍历</span></div><div class="line">                                     <span class="comment">//（原型：for(T t: array_name)）</span></div><div class="line">			System.out.println(name);</div><div class="line">		</div><div class="line">		System.out.println(<span class="string">"请输入要列出的文件扩展名，例如：.java"</span>);</div><div class="line">		s=scanner.nextLine();</div><div class="line">		Filter_Name fileAccept=<span class="keyword">new</span> Filter_Name();</div><div class="line">		fileAccept.setExtendName(s);</div><div class="line">		String result[]=dirFile.list(fileAccept);</div><div class="line">		<span class="keyword">int</span> num=<span class="number">0</span>;</div><div class="line">		<span class="keyword">for</span>(String name : result)</div><div class="line">		&#123;</div><div class="line">			System.out.println(name);</div><div class="line">			num++;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">if</span>(num==<span class="number">0</span>)</div><div class="line">			System.out.println(<span class="string">"哦，当前目录没有符合您输入拓展名的文件"</span>);</div><div class="line">	</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Filter_Name</span> <span class="keyword">implements</span> <span class="title">FilenameFilter</span></span></div><div class="line"><span class="class"></span>&#123;</div><div class="line">	String extendName;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setExtendName</span><span class="params">(String s)</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">	extendName=s;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">accept</span><span class="params">(File dir,String name)</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		<span class="keyword">return</span> name.endsWith(extendName);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="文件删除"><a href="#文件删除" class="headerlink" title="文件删除"></a>文件删除</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> flags;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.io.File;</div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"></div><div class="line"><span class="comment">//IO流系列</span></div><div class="line"><span class="comment">//文件操作（删除、添加）</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">sixteen</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> <span class="keyword">throws</span> IOException</span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		File file=<span class="keyword">new</span> File(<span class="string">"/Users/zhangxuan/Desktop/one.txt"</span>);</div><div class="line">		file.delete();</div><div class="line">		<span class="keyword">if</span>(!file.exists())</div><div class="line">			System.out.println(<span class="string">"文件删除成功！"</span>);</div><div class="line">		File files=<span class="keyword">new</span> File(<span class="string">"/Users/zhangxuan/Desktop/小橡皮.txt"</span>);</div><div class="line">		<span class="keyword">if</span>(!files.exists())</div><div class="line">			files.createNewFile();</div><div class="line">		<span class="keyword">if</span>(files.exists())</div><div class="line">			System.out.println(<span class="string">"文件创建成功！"</span>);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line"><span class="comment">//删除和添加操作，使用File类自带的方法即可，需要注意的是，创建文件操作需要IO接口来实现，所以创建main方法时不要忘了 “throws IOException”</span></div></pre></td></tr></table></figure>
<h5 id="读取文件内容"><a href="#读取文件内容" class="headerlink" title="读取文件内容"></a>读取文件内容</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> flags;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.io.FileInputStream;</div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> java.util.Scanner;</div><div class="line"></div><div class="line"><span class="comment">//IO流系列</span></div><div class="line"><span class="comment">//读取文件内容到缓冲区</span></div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">eigjteen</span> </span>&#123;     </div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		<span class="keyword">byte</span>[] b=<span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];  <span class="comment">//byte型数组，据说是文件操作必不可少的数据类型； </span></div><div class="line">		<span class="keyword">int</span> n=-<span class="number">1</span>;                <span class="comment">//这里n的初始数值定为多少都无妨</span></div><div class="line">		System.out.println(<span class="string">"请输入要读取的文件名："</span>);</div><div class="line">		Scanner scanner=<span class="keyword">new</span> Scanner(System.in);</div><div class="line">		String str=scanner.nextLine();     <span class="comment">//获得文件名的流程</span></div><div class="line">		</div><div class="line">		<span class="keyword">try</span> &#123;</div><div class="line">			FileInputStream in=<span class="keyword">new</span> FileInputStream(str);</div><div class="line"><span class="comment">//FileInputStream是Java语言中抽象类InputStream用来具体实现类的创建对象。</span></div><div class="line"><span class="comment">//FileInputStream可以从文件系统中的某个文件中获得输入字节，获取的文件可用性取决于主机环境。</span></div><div class="line">			<span class="keyword">while</span>((n=in.read(b,<span class="number">0</span>,<span class="number">1024</span>))!=-<span class="number">1</span>)  </div><div class="line">              <span class="comment">//一句话就是：读文件内容一直到结尾</span></div><div class="line">          <span class="comment">//仔细讲就是：以-1作为文件内容结尾的标志（试过-2，-3也会输出文件内容但是会抛出字符串长度超出的错误，看来这里用-1是铁律了，另外去掉“n=”没法读取文件），然后（b，0，1024）就是从字节数组的0字节读到1024字节；</span></div><div class="line">					&#123;</div><div class="line">				        String s=<span class="keyword">new</span> String(b,<span class="number">0</span>,n); </div><div class="line">              <span class="comment">//将b数组的从b[0]到b[n]的所有元素的内容集合到字符串s内；</span></div><div class="line">				        System.out.println(s);</div><div class="line">				</div><div class="line">					&#125;</div><div class="line">			in.close();</div><div class="line">			</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">catch</span>(IOException e)</div><div class="line">		&#123;</div><div class="line">			System.out.println(<span class="string">"文件读取失败"</span>);</div><div class="line">          </div><div class="line">          <span class="comment">//如果try板块没有正常输出，那么这里将输入文件读取失败的信息</span></div><div class="line">          <span class="comment">//p.我现在整明白了：当try板块内的执行出现错误时，catch板块内的代码将会执行；</span></div><div class="line">		&#125;</div><div class="line">		</div><div class="line">				</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="向文件内写内容"><a href="#向文件内写内容" class="headerlink" title="向文件内写内容"></a>向文件内写内容</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> flags;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.io.File;</div><div class="line"><span class="keyword">import</span> java.io.FileInputStream;</div><div class="line"><span class="keyword">import</span> java.io.FileOutputStream;</div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> java.util.Scanner;</div><div class="line"></div><div class="line"><span class="comment">//IO流系列</span></div><div class="line"><span class="comment">//向磁盘文件写入数据</span></div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">eighteen</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		String content;</div><div class="line">		<span class="keyword">int</span> n=-<span class="number">1</span>;</div><div class="line">		<span class="keyword">byte</span>[] b;     <span class="comment">//写文件用数组</span></div><div class="line">		<span class="keyword">byte</span>[] a=<span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];     	<span class="comment">//读文件用数组</span></div><div class="line">		FileOutputStream out;            <span class="comment">//读取为Input 那么写入就是Output了</span></div><div class="line">		Scanner scanner=<span class="keyword">new</span> Scanner(System.in);</div><div class="line">		System.out.println(<span class="string">"请输入文件名："</span>);</div><div class="line">		String name=scanner.nextLine();</div><div class="line">		File file=<span class="keyword">new</span> File(name);</div><div class="line">		<span class="keyword">if</span>(!file.exists())</div><div class="line">		&#123;</div><div class="line">			System.out.println(<span class="string">"文件不存在，是否创建？（Y／N）"</span>); </div><div class="line">            <span class="comment">//这种交互方式不错，学习了</span></div><div class="line">			String f=scanner.nextLine();</div><div class="line">			<span class="keyword">if</span>(f.equals(<span class="string">"N"</span>))</div><div class="line">			&#123;</div><div class="line">				System.out.println(<span class="string">"选择了不创建，三秒后退出系统"</span>);</div><div class="line">				System.exit(<span class="number">3</span>);</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">else</span></div><div class="line">			&#123;</div><div class="line">				<span class="keyword">try</span></div><div class="line">				&#123;</div><div class="line">					file.createNewFile();</div><div class="line">				&#125;</div><div class="line">				<span class="keyword">catch</span>(IOException e)</div><div class="line">				&#123;</div><div class="line">					System.out.println(<span class="string">"创建失败"</span>);</div><div class="line">					System.exit(<span class="number">0</span>);</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">try</span></div><div class="line">		&#123;</div><div class="line">			content=<span class="string">"Hello"</span>;  <span class="comment">//content是上面定义的一个空字符串</span></div><div class="line">			b=content.getBytes(); <span class="comment">//将字符串内容转化为byte型数组，便于下面写入文件；  </span></div><div class="line">			out=<span class="keyword">new</span> FileOutputStream(file); <span class="comment">//开启一个写入通道；</span></div><div class="line">			out.write(b);</div><div class="line">			out.close();</div><div class="line">			System.out.println(<span class="string">"文件写操作成功！"</span>);</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">catch</span>(IOException e)</div><div class="line">		&#123;</div><div class="line">			e.getMessage();</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		<span class="keyword">try</span></div><div class="line">		&#123;</div><div class="line">			System.out.println(<span class="string">"请输入追加的内容："</span>);</div><div class="line">			content=scanner.nextLine();</div><div class="line">			b=content.getBytes();</div><div class="line">			out=<span class="keyword">new</span> FileOutputStream(file,<span class="keyword">true</span>);  <span class="comment">//加入true变量使得写入方式变为追加，否则就是覆盖方式写入了；</span></div><div class="line">			out.write(b);</div><div class="line">			out.close();</div><div class="line">			System.out.println(<span class="string">"文件追加写操作成功！"</span>);</div><div class="line">			scanner.close();</div><div class="line">			</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">catch</span>(IOException e)</div><div class="line">		&#123;</div><div class="line">			e.getMessage();<span class="comment">//获取错误信息</span></div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		<span class="keyword">try</span> &#123;</div><div class="line">			FileInputStream in=<span class="keyword">new</span> FileInputStream(name);</div><div class="line">          <span class="comment">//我给加了一个文件内容读取；</span></div><div class="line">			System.out.println(<span class="string">"此时文件内容如下："</span>);</div><div class="line">			<span class="keyword">while</span>((n=in.read(a,<span class="number">0</span>,<span class="number">1024</span>))!=-<span class="number">1</span>)</div><div class="line">			&#123;</div><div class="line">				String s=<span class="keyword">new</span> String(a,<span class="number">0</span>,n);</div><div class="line">				System.out.println(s);</div><div class="line">			&#125;</div><div class="line">			in.close();</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">catch</span>(IOException e)</div><div class="line">		&#123;</div><div class="line">			System.out.println(<span class="string">"文件内容读取失败！"</span>);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="复制文件内容到另一文件"><a href="#复制文件内容到另一文件" class="headerlink" title="复制文件内容到另一文件"></a>复制文件内容到另一文件</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> flags;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.io.File;</div><div class="line"><span class="keyword">import</span> java.io.FileInputStream;</div><div class="line"><span class="keyword">import</span> java.io.FileOutputStream;</div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> java.util.Scanner;</div><div class="line"></div><div class="line"><span class="comment">//IO流系列</span></div><div class="line"><span class="comment">//文件流操作</span></div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">nineteen</span> </span>&#123;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> <span class="keyword">throws</span> IOException</span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			Scanner scanner=<span class="keyword">new</span> Scanner(System.in);</div><div class="line">			System.out.println(<span class="string">"请输入源文件名和目的文件名，中间用回车分隔"</span>);</div><div class="line">			String s=scanner.nextLine();</div><div class="line">			String d=scanner.nextLine();</div><div class="line">			File file1=<span class="keyword">new</span> File(s);</div><div class="line">			File file2=<span class="keyword">new</span> File(d);</div><div class="line">			</div><div class="line">			<span class="keyword">if</span>(!file1.exists())</div><div class="line">			&#123;</div><div class="line">				System.out.println(<span class="string">"被复制的文件不存在"</span>);</div><div class="line">				System.exit(<span class="number">1</span>);</div><div class="line">			&#125;</div><div class="line">			FileInputStream input=<span class="keyword">new</span> FileInputStream(file1);</div><div class="line">          <span class="comment">//f1为源文件，进行读取操作，定义一个读取操作的对象；</span></div><div class="line">			FileOutputStream output=<span class="keyword">new</span> FileOutputStream(file2);</div><div class="line">          <span class="comment">//f2为目标文件，进行写入操作，定义一个写入操作的对象；</span></div><div class="line">			<span class="keyword">if</span>((input!=<span class="keyword">null</span>)&amp;&amp;(output!=<span class="keyword">null</span>))、</div><div class="line">              <span class="comment">//取保俩对象都存在后进行后续操作</span></div><div class="line">			&#123;</div><div class="line">				<span class="keyword">int</span> temp=<span class="number">0</span>;</div><div class="line">				<span class="keyword">while</span>((temp=input.read())!=(-<span class="number">1</span>))  </div><div class="line">                  <span class="comment">//这里读文件直接抛开了byte数组一环，直接全部照搬，可以的可以的；</span></div><div class="line">  <span class="comment">//p.如果要读文件内容到缓冲区是不能像上面那样抛开byte这一环的，否则输出的是十进制的ASCⅡ码</span></div><div class="line">					output.write(temp);</div><div class="line">			&#125;</div><div class="line">			input.close();</div><div class="line">			output.close();</div><div class="line">			System.out.println(<span class="string">"文件复制成功！"</span>);</div><div class="line">		&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><u>今天搞了一会儿html按钮函数，之前觉得简单的东西一旦到了稍微复杂点的实例就出问题，说明掌握还是有问题，晚些时候给它安排上。</u></p>
<h5 id="缓冲流"><a href="#缓冲流" class="headerlink" title="缓冲流"></a>缓冲流</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> flags;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.io.BufferedReader;</div><div class="line"><span class="keyword">import</span> java.io.BufferedWriter;</div><div class="line"><span class="keyword">import</span> java.io.File;</div><div class="line"><span class="keyword">import</span> java.io.FileReader;</div><div class="line"><span class="keyword">import</span> java.io.FileWriter;</div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> java.util.Scanner;</div><div class="line"></div><div class="line"><span class="comment">//IO流系列</span></div><div class="line"><span class="comment">//缓冲流</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">//定义文件 -&gt; 定义输入／输出流 -&gt; 定义缓冲输入／输出流</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">twentyone</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		File file;     <span class="comment">//初始文件变量</span></div><div class="line">		FileReader fin;    <span class="comment">//初始文件输入流</span></div><div class="line">		FileWriter fout;      <span class="comment">//初始文件输出流</span></div><div class="line">		BufferedReader bin;   <span class="comment">//初始缓冲输入流</span></div><div class="line">		BufferedWriter bout;  <span class="comment">//初始缓冲输出流</span></div><div class="line">		Scanner scanner=<span class="keyword">new</span> Scanner(System.in);</div><div class="line">		System.out.println(<span class="string">"请输入文件名："</span>);</div><div class="line">		String filename=scanner.nextLine();</div><div class="line">      <span class="comment">//国际惯例，文件名安排上</span></div><div class="line">		</div><div class="line">		<span class="keyword">try</span> &#123;</div><div class="line">			file=<span class="keyword">new</span> File(filename);     </div><div class="line">			<span class="keyword">if</span>(!file.exists())</div><div class="line">			&#123;</div><div class="line">				file.createNewFile();   <span class="comment">//文件不存在就创建</span></div><div class="line">			fout=<span class="keyword">new</span> FileWriter(file);   <span class="comment">//创建文件输出流</span></div><div class="line">			&#125;</div><div class="line">		<span class="keyword">else</span>     </div><div class="line">			fout=<span class="keyword">new</span> FileWriter(file,<span class="keyword">true</span>);   <span class="comment">//文件存在则创建追加型文件输出流</span></div><div class="line">			fin=<span class="keyword">new</span> FileReader(file);        <span class="comment">//文件读取</span></div><div class="line">			bin=<span class="keyword">new</span> BufferedReader(fin);     <span class="comment">//缓冲读取</span></div><div class="line">			bout=<span class="keyword">new</span> BufferedWriter(fout);    <span class="comment">//缓冲写入</span></div><div class="line">			</div><div class="line">			System.out.println(<span class="string">"请输入数据，最后一行为字符‘0’结束。"</span>);</div><div class="line">			String str=scanner.nextLine();</div><div class="line">			<span class="keyword">while</span>(!str.equals(<span class="string">"0"</span>))    <span class="comment">//写入字符串为0时，结束</span></div><div class="line">			&#123;</div><div class="line">				bout.write(str);        <span class="comment">//写入字符串内容</span></div><div class="line">				bout.newLine();         <span class="comment">//换行</span></div><div class="line">				str=scanner.nextLine();    <span class="comment">//从键盘读入新的字符串</span></div><div class="line">			&#125;</div><div class="line">			bout.flush();        <span class="comment">//刷新缓冲输出（写入）流</span></div><div class="line">			bout.close();       <span class="comment">//关闭缓冲输出（写入）流</span></div><div class="line">			fout.close();      <span class="comment">//关闭文件输出流（写入）流</span></div><div class="line">			System.out.println(<span class="string">"文件写入完毕！"</span>);</div><div class="line">			System.out.println(<span class="string">"文件"</span>+filename+<span class="string">"的内容是："</span>);</div><div class="line">			<span class="keyword">while</span>((str=bin.readLine())!=<span class="keyword">null</span>)   </div><div class="line">               <span class="comment">//从缓冲输入（读取）流中获取文件内容并输出</span></div><div class="line">				System.out.println(str);</div><div class="line">			</div><div class="line">			bin.close();</div><div class="line">			fin.close();   <span class="comment">//关闭文件读取和缓冲读取</span></div><div class="line">		</div><div class="line">	&#125;</div><div class="line">		<span class="keyword">catch</span>(IOException e)</div><div class="line">		&#123;</div><div class="line">			e.printStackTrace();    <span class="comment">//打印错误信息</span></div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="随机流"><a href="#随机流" class="headerlink" title="随机流"></a>随机流</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">package</span> flags;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> java.io.RandomAccessFile;</div><div class="line"></div><div class="line"><span class="comment">//IO流系列</span></div><div class="line"><span class="comment">//随机流</span></div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">twentytwo</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">        <span class="comment">//随机流直接上来给你来个try</span></div><div class="line">		<span class="keyword">try</span></div><div class="line">		&#123;</div><div class="line">			RandomAccessFile file=<span class="keyword">new</span>   RandomAccessFile(<span class="string">"file"</span>,<span class="string">"rw"</span>);</div><div class="line">          </div><div class="line">          <span class="comment">//随机流的创建，一开始我还以为随机流强调的是一个“随机”，后来看书上写随机流可以用单独一个流进行输入和输出</span></div><div class="line">          <span class="comment">//p. “file”处如果填具体的某个文件名，则进行操作之后文件将会无法正常打开，原因是：编码混乱，见下图：</span></div><div class="line">			file.writeInt(<span class="number">10</span>);     </div><div class="line">			file.writeDouble(<span class="number">3.141592653</span>);</div><div class="line">			file.writeUTF(<span class="string">"UTF字符串"</span>);</div><div class="line">			file.writeBoolean(<span class="keyword">true</span>);</div><div class="line">			file.writeShort(<span class="number">100</span>);</div><div class="line">			file.writeLong(<span class="number">12345678</span>);</div><div class="line">			file.writeUTF(<span class="string">"有一个UTF字符串"</span>);</div><div class="line">			file.writeFloat(<span class="number">3.14f</span>);</div><div class="line">			file.writeChar(<span class="string">'a'</span>);</div><div class="line">			file.seek(<span class="number">0</span>);          <span class="comment">//把文件指针位置设置到文件起始处</span></div><div class="line">			System.out.println(<span class="string">"——从file文件起始位置开始读数据——"</span>);</div><div class="line">			System.out.println(file.readInt());</div><div class="line">			System.out.println(file.readDouble());</div><div class="line">			System.out.println(file.readUTF());</div><div class="line">			</div><div class="line">			file.skipBytes(<span class="number">3</span>); <span class="comment">//跳过3个字节，即跳过boolean值和short值</span></div><div class="line">			System.out.println(file.readLong());</div><div class="line">			file.skipBytes(file.readShort()); <span class="comment">//继续跳过剩下的几个字节</span></div><div class="line">			file.close();</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">catch</span>(IOException e)</div><div class="line">		&#123;</div><div class="line">			System.out.println(<span class="string">"文件读写错误！"</span>);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="对象流"><a href="#对象流" class="headerlink" title="对象流"></a>对象流</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> flags;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.io.File;</div><div class="line"><span class="keyword">import</span> java.io.FileInputStream;</div><div class="line"><span class="keyword">import</span> java.io.FileOutputStream;</div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> java.io.ObjectInputStream;</div><div class="line"><span class="keyword">import</span> java.io.ObjectOutputStream;</div><div class="line"><span class="keyword">import</span> java.io.Serializable;</div><div class="line"><span class="keyword">import</span> java.util.Scanner;</div><div class="line"></div><div class="line"><span class="comment">//IO流系列</span></div><div class="line"><span class="comment">//对象流</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">twentythree</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		<span class="keyword">try</span> &#123;</div><div class="line">			File file;</div><div class="line">			FileInputStream fin;   <span class="comment">//文件读取（输入）流</span></div><div class="line">			FileOutputStream fout;  <span class="comment">//文件写入（输出）流</span></div><div class="line">			ObjectInputStream oin;   <span class="comment">//对象读取流</span></div><div class="line">			ObjectOutputStream oout;   <span class="comment">//对象写入流</span></div><div class="line">			Scanner scanner=<span class="keyword">new</span> Scanner(System.in);</div><div class="line">			</div><div class="line">			System.out.println(<span class="string">"请输入文件名："</span>);</div><div class="line">			String filename=scanner.nextLine();</div><div class="line">			file=<span class="keyword">new</span> File(filename);</div><div class="line">			<span class="keyword">if</span>(!file.exists())</div><div class="line">				file.createNewFile();</div><div class="line">			fout=<span class="keyword">new</span> FileOutputStream(file);</div><div class="line">			oout=<span class="keyword">new</span> ObjectOutputStream(fout);</div><div class="line">          <span class="comment">//文件 ——&gt; 文件输出流 -&gt; 对象输出流</span></div><div class="line">          <span class="comment">//p. 这里文件名使用一个原先能自由打开的txt文件，进行对象流操作之后也无法正常打开</span></div><div class="line">			</div><div class="line">			Person person=<span class="keyword">new</span> Person(<span class="string">"张三"</span>,<span class="number">20</span>);</div><div class="line">          <span class="comment">//初始化Person对象</span></div><div class="line">			oout.writeObject(person);    <span class="comment">//将对象信息写入文件</span></div><div class="line">			oout.close();</div><div class="line">			fout.close();    <span class="comment">//关闭相关端口（注意顺序）</span></div><div class="line">			System.out.println(<span class="string">"对象写入完毕！"</span>);</div><div class="line">			System.out.println(<span class="string">"文件"</span>+filename+<span class="string">"的内容："</span>);</div><div class="line">			</div><div class="line">			Person object;</div><div class="line">			fin=<span class="keyword">new</span> FileInputStream(file); </div><div class="line">			oin=<span class="keyword">new</span> ObjectInputStream(fin);</div><div class="line">          <span class="comment">//文件 -&gt; 文件输入流 -&gt; 对象输入流</span></div><div class="line">			<span class="keyword">try</span> &#123;</div><div class="line">				object=(Person)oin.readObject();</div><div class="line">              <span class="comment">//将文件中信息存入一新对象中以待输出</span></div><div class="line">				System.out.println(<span class="string">"读取的对象信息："</span>);</div><div class="line">				System.out.println(<span class="string">"用户名："</span>+object.getName());</div><div class="line">				System.out.println(<span class="string">"年龄："</span>+object.getAge());</div><div class="line">              <span class="comment">//输出信息</span></div><div class="line">				</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">catch</span>(ClassNotFoundException e)</div><div class="line">			&#123;</div><div class="line">				System.out.println(<span class="string">"读取对象失败！"</span>);</div><div class="line">			&#125;</div><div class="line">			oin.close();</div><div class="line">			fin.close();</div><div class="line">			</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">catch</span>(IOException e)</div><div class="line">		&#123;</div><div class="line">			e.printStackTrace();</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">&#125;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> <span class="keyword">implements</span> <span class="title">Serializable</span> //定义对象方法的时候进行序列化（为文件操作做铺垫）</span></div><div class="line"><span class="class">  </span></div><div class="line"><span class="class">  </span></div><div class="line"><span class="class">  </span></div><div class="line">  //java序列化: 以特定的方式对类实例的瞬时状态进行编码保存的一种操作.(可能不是很精确,咱不是搞学术的,看懂即可).从此定义可以看出,序列化作用的对象是类的实例.对实例进行序列化,就是保存实例当前在内存中的状态.包括实例的每一个属性的值和引用等.</div><div class="line">  </div><div class="line">&#123;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID=<span class="number">1234567890L</span>; </div><div class="line">	<span class="comment">//UID相当于序列化的一种标示</span></div><div class="line">	<span class="comment">//序列化的作用是能转化成Byte流，然后又能反序列化成原始的类。能在网络进行传输，也可以保存在磁盘中，有了SUID之后，那么如果序列化的类已经保存了在本地中，中途你更改了类后，SUID变了，那么反序列化的时候就不会变成原始的类了，还会抛异常，主要就是用于版本控制。</span></div><div class="line">	String name;</div><div class="line">	<span class="keyword">int</span> age;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String name, <span class="keyword">int</span> age)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.name = name;</div><div class="line">		<span class="keyword">this</span>.age = age;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> name;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.name = name;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> age;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.age = age;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>####6.多线程</p>
<p>因为最近的硬件课程比较多，总是听到老师讲如何如何提高电脑的运行速度、cpu并行技术什么的，这让我很自然的联想到了java里的多线程技术。之前多线程我也只是从实验书上抄了一个GUI的多线程程序，好像是三个框框同时而独立得蹦随机数，但是让我写，我是万万写不出来的。</p>
<p>所以，今儿就开始搞多线程。</p>
<h5 id="扩展Thread类"><a href="#扩展Thread类" class="headerlink" title="扩展Thread类"></a>扩展Thread类</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> 多线程;</div><div class="line"></div><div class="line"><span class="comment">//拓展Thread类</span></div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">one</span> </span>&#123;</div><div class="line">	<span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">ExtThread</span> <span class="keyword">extends</span> <span class="title">Thread</span></span></div><div class="line"><span class="class">      //继承<span class="title">Thread</span>类</span></div><div class="line"><span class="class">	</span>&#123;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="title">ExtThread</span><span class="params">(String name)</span></span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			<span class="keyword">super</span>(name);</div><div class="line">          <span class="comment">//参数为线程名字的构造方法，方法继承自父类Thread</span></div><div class="line">		&#125;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span></div><div class="line"><span class="function">         <span class="comment">//Thread中的主要方法，这里是根据例子进行了重写</span></span></div><div class="line"><span class="function">      <span class="comment">//run()是线程体，其内部的内容定义了线程的实际操作</span></span></div><div class="line"><span class="function">     <span class="comment">//此例线程操作是输出线程名和从0到4的累加</span></span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=<span class="number">4</span>;i++)</div><div class="line">			&#123;</div><div class="line">					System.out.println(<span class="keyword">this</span>.getName()+<span class="string">" :"</span>+i);</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		Thread t1=<span class="keyword">new</span> ExtThread(<span class="string">"A"</span>);</div><div class="line">		Thread t2=<span class="keyword">new</span> ExtThread(<span class="string">"B"</span>);</div><div class="line">      <span class="comment">//定义线程</span></div><div class="line">		t1.start();</div><div class="line">		t2.start();</div><div class="line">      <span class="comment">//启动线程</span></div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这里发现一个现象：每次启动线程A和B输出的顺序都会有变化，难道说线程对内存的调用时随机的？关于这一点书上是这么说的：“相同优先级的多个线程，它们的执行顺序不是按照先来先服务原则的（线程启动的先后，也就是start（）方法），即不是先启动先执行，而是随机地执行序列。”</p>
<p>这里补充一个关于设置线程优先度的方法。</p>
<p>以线程“t4”为例：t4.setPriority(<strong>Thread</strong>.<strong>MAX_PRIORITY</strong>);</p>
<p>括号里的是int类型，上面例子是设定为最高优先级，你也可以给不同的线程设置不同的int值，值越大优先级越高。</p>
<p>当然，这样并没有什么卵用，去网上查阅了一下资料，发现老哥们是这么说的：</p>
<p><em>多线程的执行本身就是多个线程的交换执行，并非同时执行，执行的优先级只是他执行的概率。例如原本优先级一样，那么两个线程的执行的概率都为50%。现在我们提高其中一个，那么一个为60%的概率抢到进入CPU执行的机会，另一个是依旧是40%。执行完一次之后又要重新抢占CPU。但是40%概率进入的线程也有可能抢到，虽然概率低了点，但总会有他执行的机会，万一次次都抽中40%的概率呢？所以你要正确理解线程和线程之间的优先级</em></p>
<p>结合上面我发现的线程随机运行的现象，我好像明白了什么。</p>
<h5 id="实现接口Runnable"><a href="#实现接口Runnable" class="headerlink" title="实现接口Runnable"></a>实现接口Runnable</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> 多线程;</div><div class="line"></div><div class="line"><span class="comment">//实现接口Runnable</span></div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">two</span> </span>&#123;</div><div class="line">	<span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">ImpRunnable</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span></div><div class="line"><span class="class">      //使用<span class="title">Runnable</span>接口来构建类</span></div><div class="line"><span class="class">	</span>&#123;</div><div class="line">		<span class="keyword">private</span> String name;</div><div class="line"></div><div class="line">		<span class="function"><span class="keyword">private</span> <span class="title">ImpRunnable</span><span class="params">(String name)</span> </span>&#123;</div><div class="line">			<span class="keyword">super</span>();</div><div class="line">			<span class="keyword">this</span>.name = name;</div><div class="line">		&#125;</div><div class="line">      <span class="comment">//构造方法</span></div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">5</span>;i++)</div><div class="line">			&#123;</div><div class="line">				System.out.println(name+<span class="string">" :"</span>+i);</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">      <span class="comment">//线程的操作内容</span></div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		ImpRunnable ds1=<span class="keyword">new</span> ImpRunnable(<span class="string">"A"</span>);</div><div class="line">		ImpRunnable ds2=<span class="keyword">new</span> ImpRunnable(<span class="string">"B"</span>);</div><div class="line">		</div><div class="line">		Thread t1=<span class="keyword">new</span> Thread(ds1);</div><div class="line">		Thread t2=<span class="keyword">new</span> Thread(ds2);</div><div class="line">      <span class="comment">//线程名 -&gt; Runnable接口实现类（ImpRunnable） -&gt;Thread类实例</span></div><div class="line">		t1.start();</div><div class="line">		t2.start();</div><div class="line">      <span class="comment">//线程开始</span></div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>使用Runnable接口来实现多线程，实际上最后还是绕回Thread类上，但是好处是使得线程的构造过程变得明了（三步走），便于理解（嚯嚯嚯）。</p>
<h5 id="线程操作的基本方法"><a href="#线程操作的基本方法" class="headerlink" title="线程操作的基本方法"></a>线程操作的基本方法</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> 多线程;</div><div class="line"></div><div class="line"><span class="comment">//线程基本操作实例</span></div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">three</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		MyThread thread=<span class="keyword">new</span> MyThread();</div><div class="line">      <span class="comment">//MyThread是继承自Thread的子类</span></div><div class="line">		thread.setName(<span class="string">"测试线程"</span>);</div><div class="line">      <span class="comment">//调用父类Thread的setName方法定义线程名</span></div><div class="line">		thread.start();</div><div class="line">      <span class="comment">//调用父类Thread的start方法开启线程</span></div><div class="line">		</div><div class="line">	<span class="comment">//try内部是线程实施的内容	</span></div><div class="line">      <span class="keyword">try</span> &#123;</div><div class="line">			System.out.println(Thread.currentThread().getName()+<span class="string">"进入睡眠"</span>);</div><div class="line">			Thread.currentThread().sleep(<span class="number">2000</span>);</div><div class="line">			System.out.println(Thread.currentThread().getName()+<span class="string">"睡眠完毕"</span>);a</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">catch</span>(InterruptedException e)</div><div class="line">		&#123;</div><div class="line">			e.printStackTrace();</div><div class="line">		&#125;</div><div class="line">		thread.interrupt();</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MyThread</span> <span class="keyword">extends</span> <span class="title">Thread</span></span></div><div class="line"><span class="class">	</span>&#123;</div><div class="line">      </div><div class="line">      <span class="comment">//线程字类MyThread内部也定义了线程的操作</span></div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			<span class="keyword">try</span></div><div class="line">			&#123;</div><div class="line">				System.out.println(Thread.currentThread().getName()+<span class="string">"进入睡眠"</span>);</div><div class="line">				Thread.currentThread().sleep(<span class="number">10000</span>);</div><div class="line">				System.out.println(Thread.currentThread().getName()+<span class="string">"睡眠完毕"</span>);</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">catch</span>	(InterruptedException e)</div><div class="line">			&#123;</div><div class="line">				System.out.println(<span class="string">"中断异常！"</span>);</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">finally</span></div><div class="line">			&#123;</div><div class="line">				System.out.println(<span class="string">"run方法执行完毕"</span>);</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line"><span class="comment">/*总结得讲使用了下列方法：</span></div><div class="line"><span class="comment">setName()方法：设定线程名；</span></div><div class="line"><span class="comment">getName()方法：获取线程名；</span></div><div class="line"><span class="comment">currentThread()方法：返回当下正在执行的线程；</span></div><div class="line"><span class="comment">interrupt()：中断线程；</span></div><div class="line"><span class="comment">*/</span></div></pre></td></tr></table></figure>
<p>执行结果：<img src="/Users/zhangxuan/Pictures/截图/屏幕快照 2017-09-20 下午4.59.23.png" alt="屏幕快照 2017-09-20 下午4.59.23"></p>
<p>这样看有点给我搞混了，不太清楚线程执行的先后顺序（睡眠两秒和睡眠十秒），于是我加上标示后重新运行了一次：</p>
<p><img src="/Users/zhangxuan/Pictures/截图/屏幕快照 2017-09-20 下午5.12.41.png" alt="屏幕快照 2017-09-20 下午5.12.41"></p>
<p>这样以来操作的先后顺序就变得明了了。上面的程序简单来讲就是，先调用MyThread类内部的run方法（线程操作），然后内部嵌套了main方法内定义的线程操作，两秒睡眠结束后，使用一个线程中断指令中断了十秒睡眠的操作，进而触发了其catch方法。</p>
<h5 id="线程让步"><a href="#线程让步" class="headerlink" title="线程让步"></a>线程让步</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> 多线程;</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">//线程让步</span></div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">four</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		Thread t1=<span class="keyword">new</span> MyThread1();</div><div class="line">      <span class="comment">//继承Thread类的线程构建方法</span></div><div class="line">		Thread t2=<span class="keyword">new</span> Thread(<span class="keyword">new</span> MyRunnable1());</div><div class="line">      <span class="comment">//实现Runnable接口的线程构建方法</span></div><div class="line">		t2.start();</div><div class="line">		t1.start();</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MyThread1</span> <span class="keyword">extends</span> <span class="title">Thread</span></span></div><div class="line"><span class="class">	</span>&#123;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">10</span>;i++)</div><div class="line">				System.out.println(<span class="string">"线程1第"</span>+i+<span class="string">"次执行！"</span>);</div><div class="line"></div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MyRunnable1</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span></div><div class="line"><span class="class">	</span>&#123;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">10</span>;i++)</div><div class="line">			&#123;</div><div class="line">			System.out.println(<span class="string">"线程2第"</span>+i+<span class="string">"次执行！"</span>);</div><div class="line">			Thread.yield();</div><div class="line">            <span class="comment">//线程让步</span></div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>上面程序给二线程加了一个让步语句，也就是说当线程二执行一次后，马上中止并让步给线程一（挺残忍的，不是嘛），如果我们给线程一加上一个让步语句那么将会呈现出线程1和线程2交替运行的一个局面：</p>
<p><img src="/Users/zhangxuan/Pictures/截图/屏幕快照 2017-09-20 下午6.58.49.png" alt="屏幕快照 2017-09-20 下午6.58.49"></p>
<h5 id="线程联合"><a href="#线程联合" class="headerlink" title="线程联合"></a>线程联合</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">package</span> 多线程;</div><div class="line"></div><div class="line"><span class="comment">//线程联合</span></div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">five</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		Thread sub=<span class="keyword">new</span> SubThread();</div><div class="line">		sub.setName(<span class="string">"子线程"</span>);</div><div class="line">		System.out.println(<span class="string">"主线程main开始执行："</span>);</div><div class="line">		sub.start();</div><div class="line">		System.out.println(<span class="string">"主线程main等带线程sub执行....."</span>);</div><div class="line">		<span class="keyword">try</span></div><div class="line">		&#123;</div><div class="line">			sub.join();</div><div class="line">          <span class="comment">//使用join方法让sub插入正在运行的主线程之中；</span></div><div class="line">		&#125;</div><div class="line">		<span class="keyword">catch</span>(InterruptedException e)</div><div class="line">		&#123;&#125;</div><div class="line">		System.out.println(<span class="string">"主线程main结束执行"</span>);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">SubThread</span> <span class="keyword">extends</span> <span class="title">Thread</span></span></div><div class="line"><span class="class">      //继承于<span class="title">Thread</span>的线程类</span></div><div class="line"><span class="class">	</span>&#123;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span></div><div class="line"><span class="function">          <span class="comment">//线程sub的执行内容</span></span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			System.out.println(<span class="keyword">this</span>.getName()+<span class="string">"开始执行: "</span>);</div><div class="line">			System.out.println(<span class="keyword">this</span>.getName()+<span class="string">"正在执行... ..."</span>);</div><div class="line">			<span class="keyword">try</span> &#123;</div><div class="line">				sleep(<span class="number">3000</span>);</div><div class="line">              <span class="comment">//使得sub延迟三秒，增强演示效果</span></div><div class="line">				</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">catch</span>(InterruptedException e)</div><div class="line">			&#123;</div><div class="line">				System.out.println(<span class="string">"interrupted!(中断)"</span>);</div><div class="line">			&#125;</div><div class="line">			System.out.println(<span class="keyword">this</span>.getName()+<span class="string">"结束执行。"</span>);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>所谓线程的联合是指让一个线程（B）接到另一个正在运行的线程（A）后面，在A运行完之后，B才开始运行，这就实现了线程的有序性。</p>
<p>实际上上面给的让自线程联合main线程并不具备说服性，因为无论如何，主线程一定会让位给子线程的（不然主线程结束了，子线程就没法玩了）。</p>
<p>我后来写了一个让一号子线程跟二号子线程联合的例子，就能很好的体现有序性。</p>
<p>运行结果：<img src="/Users/zhangxuan/Pictures/截图/屏幕快照 2017-09-20 下午7.47.50.png" alt="屏幕快照 2017-09-20 下午7.47.50"></p>
<p>p.线程的系统默认命名是从0开始的（Thread-0、Thread-1 … …）。</p>
<h5 id="守护线程"><a href="#守护线程" class="headerlink" title="守护线程"></a>守护线程</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> 多线程;</div><div class="line"></div><div class="line"><span class="keyword">import</span> 多线程.six.DamonThread;</div><div class="line"></div><div class="line"><span class="comment">//守护线程</span></div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">seven</span> </span>&#123;</div><div class="line">	<span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">DamonThread</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span></div><div class="line"><span class="class">      //通过实现<span class="title">Runnable</span>接口来定义守护线程</span></div><div class="line"><span class="class">	</span>&#123;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			<span class="keyword">while</span>(<span class="keyword">true</span>)</div><div class="line">              <span class="comment">//从逻辑条件来讲守护线程可以无限运行，但是由于守护线程的特性，当一般线程全部运行完毕之后守护线程也会停止，一次体现出守护线程的特性；</span></div><div class="line">			&#123;</div><div class="line">			</div><div class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">3</span>;i++)</div><div class="line">			&#123;</div><div class="line">				System.out.println(Thread.currentThread().getName()+i);</div><div class="line">       <span class="comment">//输出语句可以一次性输出两个线程的情况（普通线程及其守护线程）</span></div><div class="line">				<span class="keyword">try</span> &#123;</div><div class="line">					Thread.sleep(<span class="number">1000</span>);&#125;</div><div class="line">				<span class="keyword">catch</span>(InterruptedException e)</div><div class="line">				&#123;</div><div class="line">					e.printStackTrace();&#125;</div><div class="line">			&#125;</div><div class="line">			</div><div class="line">				<span class="keyword">if</span>(Thread.currentThread().getName().equals(<span class="string">"非守护线程"</span>))</div><div class="line">					<span class="keyword">break</span>;</div><div class="line">				&#125;</div><div class="line">		&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		Thread daemonThread=<span class="keyword">new</span> Thread(<span class="keyword">new</span> DamonThread());</div><div class="line">		daemonThread.setName(<span class="string">"守护线程"</span>);</div><div class="line">      <span class="comment">//守护线程定义。</span></div><div class="line">      <span class="comment">//p.之前我自己写线程代码的时候吧setName这一步给忘了，导致线程名是系统默认的Thread-x;</span></div><div class="line">		</div><div class="line">		daemonThread.setDaemon(<span class="keyword">true</span>);</div><div class="line">      <span class="comment">//是此线程变为后台进程（保持守护线程的特性）</span></div><div class="line">		daemonThread.start();</div><div class="line">		Thread t=<span class="keyword">new</span> Thread(<span class="keyword">new</span> DamonThread());</div><div class="line">		t.setName(<span class="string">"非守护线程"</span>);</div><div class="line">		t.start();</div><div class="line">	&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="线程同步"><a href="#线程同步" class="headerlink" title="线程同步"></a>线程同步</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> 多线程;</div><div class="line"></div><div class="line"><span class="comment">//线程同步（非同步实例）</span></div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">eight</span> </span>&#123;</div><div class="line">	<span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Bank</span></span></div><div class="line"><span class="class">	</span>&#123;</div><div class="line">		<span class="keyword">private</span> <span class="keyword">int</span> x=<span class="number">100</span>;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getX</span><span class="params">()</span></span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			<span class="keyword">return</span> x;</div><div class="line">		&#125;</div><div class="line">      <span class="comment">//x元素的获取方法</span></div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">fix</span><span class="params">(<span class="keyword">int</span> y)</span></span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			x=x-y;</div><div class="line">			<span class="keyword">return</span> x;</div><div class="line">		&#125;</div><div class="line">      <span class="comment">//输入参数y，返回x减去y的剩余值</span></div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="keyword">static</span> <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">emm</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span></div><div class="line"><span class="class">	</span>&#123;</div><div class="line">		<span class="keyword">private</span> Bank bank=<span class="keyword">new</span> Bank();</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			emm r=<span class="keyword">new</span> emm();</div><div class="line">          <span class="comment">//初始化本实例中的基石线程</span></div><div class="line">			Thread ta=<span class="keyword">new</span> Thread(r,<span class="string">"Thread-A"</span>);</div><div class="line">			Thread tb=<span class="keyword">new</span> Thread(r,<span class="string">"Thread-B"</span>);</div><div class="line">          <span class="comment">//基于基石线程添加两个内容相同的子线程（为了表现出线程非同步的运行状况）</span></div><div class="line">			ta.start();</div><div class="line">			tb.start();</div><div class="line">          <span class="comment">//两子线程开始运作</span></div><div class="line">		&#125;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span></div><div class="line"><span class="function">         <span class="comment">//线程的操作内容：重复调用三次fix函数，参数为y=30。（x连续减去三次30并返回结果）</span></span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)</div><div class="line">			&#123;</div><div class="line">			<span class="keyword">this</span>.fix(<span class="number">30</span>);</div><div class="line">			<span class="keyword">try</span> &#123;</div><div class="line">				Thread.sleep(<span class="number">1000</span>);</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">catch</span>(InterruptedException e)</div><div class="line">			&#123;</div><div class="line">				e.printStackTrace();</div><div class="line">			&#125;</div><div class="line">			System.out.println(Thread.currentThread().getName()+<span class="string">":当前bank对象的x值="</span>+bank.getX());</div><div class="line">             <span class="comment">//输出运作中的线程名和线程的运作结果</span></div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">			<span class="comment">//将bank类中的fix方法应用到此类中，便于线程的调用；</span></div><div class="line">			<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">fix</span><span class="params">(<span class="keyword">int</span> y)</span></span></div><div class="line"><span class="function">			</span>&#123;</div><div class="line">				<span class="keyword">return</span> bank.fix(y);</div><div class="line">			&#125;</div><div class="line">		</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>上面程序的运行结果为：40、40、-20、-20、-80、-80</p>
<p>显然出现了线程的交叉与混乱</p>
<p>如果要实现正常的结果（70、40、10、-20、-50、-80）则需要对A、B两线程进行同步。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> 多线程;</div><div class="line"></div><div class="line"><span class="comment">//线程同步</span></div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">eightPlus</span></span>&#123;</div><div class="line">	<span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Bank</span></span></div><div class="line"><span class="class">	</span>&#123;</div><div class="line">		<span class="keyword">private</span> <span class="keyword">int</span> x=<span class="number">100</span>;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getX</span><span class="params">()</span></span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			<span class="keyword">return</span> x;</div><div class="line">		&#125;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">fix</span><span class="params">(<span class="keyword">int</span> y)</span></span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">   &lt;&lt;&lt;&lt;&lt;	  <span class="keyword">synchronized</span>(<span class="keyword">this</span>)</div><div class="line">			&#123;</div><div class="line">			x=x-y</div><div class="line">		System.out.println(Thread.currentThread().getName()+<span class="string">":当前bank对象的x值="</span>+getX());</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">return</span> x;    &gt;&gt;&gt;&gt;&gt;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="keyword">static</span> <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">emm</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span></div><div class="line"><span class="class">	</span>&#123;</div><div class="line">		<span class="keyword">private</span> Bank bank=<span class="keyword">new</span> Bank();</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			emm r=<span class="keyword">new</span> emm();</div><div class="line">			Thread ta=<span class="keyword">new</span> Thread(r,<span class="string">"Thread-A"</span>);</div><div class="line">			Thread tb=<span class="keyword">new</span> Thread(r,<span class="string">"Thread-B"</span>);</div><div class="line">			ta.start();</div><div class="line">			tb.start();</div><div class="line">		&#125;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)</div><div class="line">			&#123;</div><div class="line">			<span class="keyword">this</span>.fix(<span class="number">30</span>);</div><div class="line">			<span class="keyword">try</span> &#123;</div><div class="line">				Thread.sleep(<span class="number">1000</span>);</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">catch</span>(InterruptedException e)</div><div class="line">			&#123;</div><div class="line">				e.printStackTrace();</div><div class="line">			&#125;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">			</div><div class="line">			<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">fix</span><span class="params">(<span class="keyword">int</span> y)</span></span></div><div class="line"><span class="function">			</span>&#123;</div><div class="line">				&#123;</div><div class="line">					<span class="keyword">return</span> bank.fix(y);</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">		</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>对线程调用的Bank类中的fix（）方法进行改写（加入synchroized（this）语句并将需要限制的内容放入sy内），然后去掉main方法中的输出语句，完成上述操作后实现了线程的同步。</p>
<h5 id="线程同步二"><a href="#线程同步二" class="headerlink" title="线程同步二"></a>线程同步二</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> 多线程;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">eightPlus2</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		User user=<span class="keyword">new</span> User(<span class="string">"张三"</span>,<span class="number">100</span>);</div><div class="line">      <span class="comment">//初始化User类，用来存储用户名的初始金额；</span></div><div class="line">      <span class="comment">//六线程定义、起飞；</span></div><div class="line">		UserThread t1=<span class="keyword">new</span> UserThread(<span class="string">"线程A"</span>,user,<span class="number">20</span>);</div><div class="line">		UserThread t2=<span class="keyword">new</span> UserThread(<span class="string">"线程B"</span>,user,-<span class="number">60</span>);</div><div class="line">		UserThread t3=<span class="keyword">new</span> UserThread(<span class="string">"线程C"</span>,user,-<span class="number">80</span>);</div><div class="line">		UserThread t4=<span class="keyword">new</span> UserThread(<span class="string">"线程D"</span>,user,-<span class="number">30</span>);</div><div class="line">		UserThread t5=<span class="keyword">new</span> UserThread(<span class="string">"线程E"</span>,user,<span class="number">32</span>);</div><div class="line">		UserThread t6=<span class="keyword">new</span> UserThread(<span class="string">"线程F"</span>,user,<span class="number">21</span>);</div><div class="line">		t1.start();</div><div class="line">		t2.start();</div><div class="line">		t3.start();</div><div class="line">		t4.start();</div><div class="line">		t5.start();</div><div class="line">		t6.start();</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">UserThread</span> <span class="keyword">extends</span> <span class="title">Thread</span></span></div><div class="line"><span class="class">	</span>&#123;</div><div class="line">		<span class="keyword">private</span> User user;</div><div class="line">		<span class="keyword">private</span> <span class="keyword">int</span> y=<span class="number">0</span>;</div><div class="line">		UserThread(String name,User user,<span class="keyword">int</span> y)</div><div class="line">		&#123;</div><div class="line">			<span class="keyword">super</span>(name);</div><div class="line">			<span class="keyword">this</span>.user=user;</div><div class="line">			<span class="keyword">this</span>.y=y;</div><div class="line">		&#125;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			user.operate(y);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span></span></div><div class="line"><span class="class">      //<span class="title">User</span>类的定义；</span></div><div class="line"><span class="class">      //内含用户名的<span class="title">get</span>和<span class="title">set</span>方法、施加了线程锁（达到同步效果）的更改账户余额的方法；</span></div><div class="line"><span class="class">	</span>&#123;</div><div class="line">		<span class="keyword">private</span> String code;</div><div class="line">		<span class="keyword">private</span> <span class="keyword">int</span> cash;</div><div class="line">		User(String code,<span class="keyword">int</span> cash)</div><div class="line">		&#123;</div><div class="line">			<span class="keyword">this</span>.code=code;</div><div class="line">			<span class="keyword">this</span>.cash=cash;</div><div class="line">		&#125;</div><div class="line">		<span class="function"><span class="keyword">public</span> String <span class="title">getCode</span><span class="params">()</span></span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			<span class="keyword">return</span> code;</div><div class="line">		&#125;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">SetCode</span><span class="params">(String code)</span></span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			<span class="keyword">this</span>.code=code;</div><div class="line">		&#125;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">operate</span><span class="params">(<span class="keyword">int</span> x)</span></span></div><div class="line"><span class="function">          <span class="comment">//更改余额的方法</span></span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			<span class="keyword">try</span> &#123;</div><div class="line">				Thread.sleep(<span class="number">10</span>);</div><div class="line">				<span class="keyword">this</span>.cash+=x;</div><div class="line">				String threadName=Thread.currentThread().getName();</div><div class="line">				System.out.println(threadName+<span class="string">"结束，增加"</span>+x+<span class="string">",账户余额为："</span>+cash);</div><div class="line">				Thread.sleep(<span class="number">10</span>);</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">catch</span>(InterruptedException e)</div><div class="line">			&#123;</div><div class="line">				e.printStackTrace();</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		<span class="meta">@Override</span></div><div class="line">      <span class="comment">//伪代码标示，内容是输出账户信息（账户名、金额），但是为啥写这我也不懂；</span></div><div class="line">		<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span></span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			<span class="keyword">return</span> <span class="string">"User&#123;"</span>+<span class="string">"code='"</span>+code+<span class="string">'\''</span>+<span class="string">",cash="</span>+cash+<span class="string">'&#125;'</span>;</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>上面虽然是个多线程同步的代码，但是通俗地讲，它作为一个多函数传递参数的代码，能够在结构上和参数传递给我以启发。</p>
<p>#####线程的死锁</p>
<p>死锁：两线程相互调用、发生死锁。</p>
<p>死锁四条件：</p>
<p>（1）互斥：线程使用的资源必须至少有一个是不能共享的；</p>
<p>（2）请求与保持：至少有一个线程必须持有另一个资源并且正在等待第一个线程；</p>
<p> （3）：非剥夺：分配资源不能从相应的线程中被强制剥夺；</p>
<p> （4）：循环等待：第一个线程等待其他线程，后者又在等待第一个线程；</p>
<p>上述条件全部出现则会发生线程死锁，反之，只需令上面任意一个条件不成立则可防止死锁。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> 多线程;</div><div class="line"></div><div class="line"><span class="comment">//线程死锁</span></div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">nine</span> </span>&#123;</div><div class="line">	<span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">A</span></span></div><div class="line"><span class="class">	</span>&#123;</div><div class="line">		<span class="function"><span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">first</span><span class="params">(B b)</span></span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			String name=Thread.currentThread().getName();</div><div class="line">			System.out.println(name+<span class="string">" entered A.first() "</span>);</div><div class="line">			<span class="keyword">try</span></div><div class="line">			&#123;</div><div class="line">				Thread.sleep(<span class="number">1000</span>);</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">catch</span>(Exception e)</div><div class="line">			&#123;</div><div class="line">				System.out.println(e.getMessage());</div><div class="line">			&#125;</div><div class="line">			System.out.println(name+<span class="string">" trying to call B.last()"</span>);</div><div class="line">			b.last();</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		<span class="function"><span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">last</span><span class="params">()</span></span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			System.out.println(<span class="string">"inside A.last"</span>);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">B</span></span></div><div class="line"><span class="class">	</span>&#123;</div><div class="line">		<span class="function"><span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">first</span><span class="params">(A a)</span></span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			String name=Thread.currentThread().getName();</div><div class="line">			System.out.println(name+<span class="string">" entered B.first()"</span>);</div><div class="line">			<span class="keyword">try</span></div><div class="line">			&#123;</div><div class="line">				Thread.sleep(<span class="number">1000</span>);</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">catch</span>(Exception e)</div><div class="line">			&#123;</div><div class="line">				System.out.println(e.getMessage());</div><div class="line">			&#125;</div><div class="line">			System.out.println(name+<span class="string">" trying to call A.last()"</span>);</div><div class="line">			a.last();</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		<span class="function"><span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">last</span><span class="params">()</span></span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			System.out.println(<span class="string">"inside B.last"</span>);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">ling9</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span></div><div class="line"><span class="class">	</span>&#123;</div><div class="line">		A a=<span class="keyword">new</span> A();</div><div class="line">		B b=<span class="keyword">new</span> B();</div><div class="line">		ling9()</div><div class="line">		&#123;</div><div class="line">			Thread.currentThread().setName(<span class="string">"main_thread"</span>);</div><div class="line">			<span class="keyword">new</span> Thread(<span class="keyword">this</span>).start();</div><div class="line">			a.first(b);</div><div class="line">			System.out.println(<span class="string">"back in main_thread"</span>);</div><div class="line">		&#125;</div><div class="line">      <span class="comment">//ling9的构建方法里里创建main_thread线程使a调用b；</span></div><div class="line">		</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			Thread.currentThread().setName(<span class="string">"user_thread"</span>);</div><div class="line">			b.first(a);</div><div class="line">			System.out.println(<span class="string">"back in user_thread"</span>);</div><div class="line">		&#125;</div><div class="line">      <span class="comment">//run内创建user_thread线程使b调用a</span></div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			<span class="keyword">new</span> ling9();</div><div class="line">		&#125;</div><div class="line">      <span class="comment">//main里调用整个ling9类，使两个线程运行；</span></div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line"><span class="comment">//A于B相互调用，发生死锁；</span></div></pre></td></tr></table></figure>
<p>结果为：</p>
<p>main_thread entered A.first()  </p>
<p>user_thread entered B.first()</p>
<p>user_thread trying to call A.last()</p>
<p>main_thread trying to call B.last()</p>
<p>从结果分析的话就是：main（A调用B）先跑起来调用了本身的 A.first()；接着user（B调用A）跑起来调用了本身的B.first（）；然后user调用了call A.last()；接着main调用了call B.last();至此也就是出现了所谓相互调用的情况，于是发生了死锁，导致两线程后续的操作都无法进行了。</p>
<p>#####线程交互</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> 多线程;</div><div class="line"></div><div class="line"><span class="comment">//	线程交互</span></div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ten</span> </span>&#123;</div><div class="line">	<span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">ThreadB</span> <span class="keyword">extends</span> <span class="title">Thread</span></span></div><div class="line"><span class="class">      //对<span class="title">Thread</span>类进行重写</span></div><div class="line"><span class="class">	</span>&#123;</div><div class="line">		<span class="keyword">int</span> total=<span class="number">0</span>;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span></div><div class="line"><span class="function">          <span class="comment">//线程内容：从1累加到101</span></span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			<span class="keyword">synchronized</span>(<span class="keyword">this</span>)</div><div class="line">			&#123;</div><div class="line">				<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">101</span>;i++)</div><div class="line">					total+=i;</div><div class="line">				</div><div class="line">				notify();</div><div class="line">                System.out.println(<span class="string">"线程b运行结束！"</span>);</div><div class="line">              <span class="comment">//唤醒在此对象监视器上等待的某个线程；（这个方法在此例中是没什么用的）</span></div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		ThreadB b=<span class="keyword">new</span> ThreadB();</div><div class="line">		b.start();</div><div class="line">		<span class="keyword">synchronized</span>(b)<span class="comment">//在main线程内给b加上线程锁，使得b线程阻塞，只允许main方法运行，作用范围是此方法大括号里的代码段；</span></div><div class="line">		&#123;</div><div class="line">			<span class="keyword">try</span> &#123;</div><div class="line">              <span class="comment">//这里try的内容是main线程的内容；</span></div><div class="line">				String name=Thread.currentThread().getName();</div><div class="line">				System.out.println(name+<span class="string">" 等待对象b完成计算... ..."</span>);</div><div class="line">				b.wait();<span class="comment">//main线程进行等待；如果将此句去掉，则main线程不会中止，输出计算结果为0；</span></div><div class="line">				System.out.println(<span class="string">"对象b计算完成，结果="</span>+b.total);</div><div class="line">              <span class="comment">//计算完成后调用notify方法唤醒main线程；</span></div><div class="line">				System.out.println(name+<span class="string">"继续运行！"</span>);</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">catch</span>(InterruptedException e)</div><div class="line">			&#123;</div><div class="line">				e.printStackTrace();</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这个例子给的不是很直观，我在b的计算方法末尾加入了输出语句便于观察：</p>
<p><em>(1)main线程等待：</em></p>
<p>「main 等待对象b完成计算… …</p>
<p>线程b运行结束！</p>
<p>对象b计算完成，结果=5050</p>
<p>main继续运行！」</p>
<p><em>(2)main线程不等待：</em></p>
<p>「main 等待对象b完成计算… …</p>
<p>对象b计算完成，结果=0</p>
<p>main继续运行！</p>
<p>线程b运行结束！」</p>
<p>（这样一比较输出结果跟“线程b运行结束”这句话的位置，就能弄清程序里两线程的运行顺序了）</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/06/05/java SE/" data-id="cjefnd26f0007rt76pi1o9tkh" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
    
</article>

  

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/01/10/spring/">Spring学习笔记</a>
          </li>
        
          <li>
            <a href="/2018/01/10/Java web项目/">传统java web项目</a>
          </li>
        
          <li>
            <a href="/2017/11/28/Python/">python笔记</a>
          </li>
        
          <li>
            <a href="/2017/11/15/你想当程序员么？/">你想当程序员吗？</a>
          </li>
        
          <li>
            <a href="/2017/11/05/技术帖之贪心算法1/">技术帖之贪心算法</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 老zhang  Q:1583707135<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="https://lao-zhang.github.io" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>