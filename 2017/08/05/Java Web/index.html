<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>java web(1) | 老zhang Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Java Web （写在前面：javaSE的学习接近尾声的时候，需要来点新鲜货了，学习java web正是时候。话不多说，学就完事儿了。） 1.环境配置1」.下载安装tomcat（以前还没发现这是汤姆猫），配置环境变量。 2」.下载tomcat集成插件（针对eclipse），包含到其库内。 3」.将tomcat集成到eclipse中，创建tomcat服务器。 2.Servlet基础（1）编写第一">
<meta property="og:type" content="article">
<meta property="og:title" content="java web(1)">
<meta property="og:url" content="http://yoursite.com/2017/08/05/Java Web/index.html">
<meta property="og:site_name" content="老zhang Blog">
<meta property="og:description" content="Java Web （写在前面：javaSE的学习接近尾声的时候，需要来点新鲜货了，学习java web正是时候。话不多说，学就完事儿了。） 1.环境配置1」.下载安装tomcat（以前还没发现这是汤姆猫），配置环境变量。 2」.下载tomcat集成插件（针对eclipse），包含到其库内。 3」.将tomcat集成到eclipse中，创建tomcat服务器。 2.Servlet基础（1）编写第一">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://yoursite.com/Users/zhangxuan/Pictures/截图/屏幕快照%202017-09-22%20下午8.50.59.png">
<meta property="og:image" content="http://yoursite.com/Users/zhangxuan/Pictures/截图/屏幕快照%202017-09-22%20下午8.53.06.png">
<meta property="og:image" content="http://yoursite.com/Users/zhangxuan/Pictures/截图/屏幕快照%202017-09-25%20下午4.03.16.png">
<meta property="og:image" content="http://yoursite.com/Users/zhangxuan/Pictures/截图/屏幕快照%202017-09-25%20下午4.03.37.png">
<meta property="og:image" content="http://yoursite.com/Users/zhangxuan/Pictures/截图/屏幕快照%202017-09-30%20上午10.58.28.png">
<meta property="og:image" content="http://yoursite.com/Users/zhangxuan/Pictures/截图/屏幕快照%202017-09-30%20上午10.58.39.png">
<meta property="og:image" content="http://yoursite.com/Users/zhangxuan/Pictures/截图/屏幕快照%202017-09-30%20上午10.58.48.png">
<meta property="og:image" content="http://yoursite.com/Users/zhangxuan/Pictures/截图/屏幕快照%202017-09-30%20上午11.05.04.png">
<meta property="og:image" content="http://yoursite.com/Users/zhangxuan/Pictures/截图/屏幕快照%202017-10-06%20下午4.23.01.png">
<meta property="og:image" content="http://yoursite.com/Users/zhangxuan/Pictures/截图/utf-8.png">
<meta property="og:image" content="http://yoursite.com/Users/zhangxuan/Pictures/截图/ASCII.png">
<meta property="og:image" content="http://yoursite.com/Users/zhangxuan/Pictures/截图/在线人数.png">
<meta property="og:image" content="http://yoursite.com/Users/zhangxuan/pictures/截图/user.png">
<meta property="og:updated_time" content="2018-03-06T12:43:04.035Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="java web(1)">
<meta name="twitter:description" content="Java Web （写在前面：javaSE的学习接近尾声的时候，需要来点新鲜货了，学习java web正是时候。话不多说，学就完事儿了。） 1.环境配置1」.下载安装tomcat（以前还没发现这是汤姆猫），配置环境变量。 2」.下载tomcat集成插件（针对eclipse），包含到其库内。 3」.将tomcat集成到eclipse中，创建tomcat服务器。 2.Servlet基础（1）编写第一">
<meta name="twitter:image" content="http://yoursite.com/Users/zhangxuan/Pictures/截图/屏幕快照%202017-09-22%20下午8.50.59.png">
  
    <link rel="alternate" href="/atom.xml" title="老zhang Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">老zhang Blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="https://lao-zhang.github.io">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-Java Web" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/08/05/Java Web/" class="article-date">
  <time datetime="2017-08-04T16:00:00.000Z" itemprop="datePublished">2017-08-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      java web(1)
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <a id="more"></a>
<p>Java Web</p>
<p>（写在前面：javaSE的学习接近尾声的时候，需要来点新鲜货了，学习java web正是时候。话不多说，学就完事儿了。）</p>
<h3 id="1-环境配置"><a href="#1-环境配置" class="headerlink" title="1.环境配置"></a>1.环境配置</h3><p>1」.下载安装tomcat（以前还没发现这是汤姆猫），配置环境变量。</p>
<p>2」.下载tomcat集成插件（针对eclipse），包含到其库内。</p>
<p>3」.将tomcat集成到eclipse中，创建tomcat服务器。</p>
<h3 id="2-Servlet基础"><a href="#2-Servlet基础" class="headerlink" title="2.Servlet基础"></a>2.Servlet基础</h3><h5 id="（1）编写第一个Servlet程序"><a href="#（1）编写第一个Servlet程序" class="headerlink" title="（1）编写第一个Servlet程序"></a>（1）编写第一个Servlet程序</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> weekend;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> java.io.PrintWriter;</div><div class="line"><span class="keyword">import</span> javax.servlet.ServletException;</div><div class="line"><span class="keyword">import</span> javax.servlet.annotation.WebInitParam;</div><div class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FirstServlet</span>  <span class="keyword">extends</span> <span class="title">HttpServlet</span></span>&#123;</div><div class="line">  <span class="comment">//继承自HttpServlet类</span></div><div class="line">	<span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req,HttpServletResponse resq)</span></span></div><div class="line"><span class="function">	<span class="keyword">throws</span> ServletException,IOException</span></div><div class="line"><span class="function">  <span class="comment">//doGet方法，定义FirstServlet类的操作内容，使用了Servlet和IO接口；</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		resq.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</div><div class="line">      <span class="comment">//设置响应的文本类型和编码方式；</span></div><div class="line">		PrintWriter out=resq.getWriter();</div><div class="line">      <span class="comment">//通过输出流向客户端浏览器作出响应；</span></div><div class="line">		out.println(<span class="string">"&lt;HTML&gt;&lt;HEAD&gt;&lt;TITLE&gt;hello world&lt;/TITLE&gt;&lt;/HEAD&gt;"</span>);</div><div class="line">		out.println(<span class="string">"&lt;font size=5 color=red&gt;hello,world!!!"</span>);</div><div class="line">		out.println(<span class="string">"&lt;/font&gt;&lt;/BODY&gt;&lt;/HTML&gt;"</span>);</div><div class="line">      <span class="comment">//输出内容用Html方式写成（这样写还真是麻烦）；</span></div><div class="line">		out.close();</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req,HttpServletResponse resp)</span></span></div><div class="line"><span class="function">	<span class="keyword">throws</span> ServletException,IOException</span></div><div class="line"><span class="function">      <span class="comment">//doPost，调用上面的doGet方法；</span></span></div><div class="line"><span class="function">    </span>&#123;</div><div class="line">		doGet(req,resp);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>光靠上面代码并不能正常运行起来，这时候需要在工程中的web.xml文件中进行配置，否则会出现404错误。（这个配置有点类似导航的作用，帮助服务器找到要运行的代码，还真的显得有些笨笨的）</p>
<p>配置内容如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></div><div class="line">     <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>first<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></div><div class="line">  <span class="comment">&lt;!--servlet的名字，随便取，没有什么实际意义--&gt;</span></div><div class="line">     <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>weekend.FirstServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></div><div class="line">  <span class="comment">&lt;!--Servlet类的全名：包名+类名，起关键作用--&gt;</span></div><div class="line">   <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></div><div class="line">       <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>first<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></div><div class="line">     <span class="comment">&lt;!--依旧是servlet的名字，跟上面一致即可--&gt;</span></div><div class="line">       <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/firstServlet<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></div><div class="line">     <span class="comment">&lt;!--配置一个访问路径，重要--&gt;</span></div><div class="line">   <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></div></pre></td></tr></table></figure>
<p>如果每写一个Servlet都要打开web.xml进行配置的话的确有些麻烦（哦，有自动配置的方法），现在诞生了另一种办法：在类的开头进行标注（起到跟xml配置相同的作用，胜在便捷）。</p>
<p>当然我暂时还没掌握标注，明天再说吧。</p>
<p>#####（2）Servlet生命周期</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> weekend;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> java.io.PrintWriter;</div><div class="line"></div><div class="line"><span class="keyword">import</span> javax.servlet.ServletConfig;</div><div class="line"><span class="keyword">import</span> javax.servlet.ServletException;</div><div class="line"><span class="keyword">import</span> javax.servlet.ServletRequest;</div><div class="line"><span class="keyword">import</span> javax.servlet.ServletResponse;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LifeServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span></span></div><div class="line"><span class="class"></span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request,HttpServletResponse respone)</span> </span></div><div class="line"><span class="function">			<span class="keyword">throws</span> ServletException,IOException</span></div><div class="line"><span class="function">   <span class="comment">//响应客户端发来的GET方式请求；</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		respone.setContentType(<span class="string">"text.html;charset=UTF-8"</span>);</div><div class="line">		PrintWriter out=respone.getWriter();</div><div class="line">		out.println(<span class="string">"&lt;font size=4 color=green&gt;doGet()..."</span>);</div><div class="line">		System.out.println(<span class="string">"doGet()..."</span>);</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPast</span><span class="params">(HttpServletRequest request,HttpServletResponse response)</span></span></div><div class="line"><span class="function">	<span class="keyword">throws</span> ServletException,IOException</span></div><div class="line"><span class="function">	<span class="comment">//响应客户端发来的POST方式请求；</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		response.setContentType(<span class="string">"text.html;charset=UTF-8"</span>);</div><div class="line">		PrintWriter out=response.getWriter();</div><div class="line">		out.println(<span class="string">"&lt;font size=5 color=red&gt;doPastt()...&lt;br&gt;"</span>);</div><div class="line">		System.out.println(<span class="string">"doPast()..."</span>);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(HttpServletRequest arg0,HttpServletResponse arg1)</span></span></div><div class="line"><span class="function">	<span class="keyword">throws</span> ServletException,IOException</span></div><div class="line"><span class="function">	<span class="comment">//服务1</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		arg1.setContentType(<span class="string">"text.html;charset=UTF-8"</span>);</div><div class="line">		PrintWriter out=arg1.getWriter();</div><div class="line">		out.println(<span class="string">"&lt;font size=6 color=blue&gt;service(HS,HS)...&lt;br&gt;"</span>);</div><div class="line">		System.out.println(<span class="string">"service(HS,HS)..."</span>);</div><div class="line">		<span class="keyword">super</span>.service(arg0, arg1);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(ServletRequest arg0,ServletResponse arg1)</span></span></div><div class="line"><span class="function">	<span class="keyword">throws</span> ServletException,IOException</span></div><div class="line"><span class="function">	<span class="comment">//服务2</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		arg1.setContentType(<span class="string">"text.html;charset=UTF-8"</span>);</div><div class="line">		PrintWriter out=arg1.getWriter();</div><div class="line">		out.println(<span class="string">"&lt;font size=7 color=yellow&gt;service(S,S)...&lt;br&gt;"</span>);</div><div class="line">		</div><div class="line">		System.out.println(<span class="string">"servlce(S,S)..."</span>);</div><div class="line">		<span class="keyword">super</span>.service(arg0, arg1);</div><div class="line">	&#125;</div><div class="line">	<span class="comment">//释放资源</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		System.out.println(<span class="string">"destory()..."</span>);</div><div class="line">		<span class="keyword">super</span>.destroy();</div><div class="line">	&#125;</div><div class="line"><span class="comment">//Servlet实例化之后调用init方法来进行初始化（这里初始化的对象没有定义）</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> <span class="keyword">throws</span> ServletException</span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		System.out.println(<span class="string">"init()..."</span>);</div><div class="line">	&#125;</div><div class="line">	<span class="comment">//对整个Servlet服务器初始化</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(ServletConfig config)</span><span class="keyword">throws</span> ServletException</span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		System.out.println(<span class="string">"init(ServletConfig)..."</span>);</div><div class="line">		<span class="keyword">super</span>.init(config);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>上面代码是通过输出语句来观察Servlet的生命周期（执行了什么方法，就在缓冲区输出）。</p>
<p>初次运行输出：</p>
<p><img src="/Users/zhangxuan/Pictures/截图/屏幕快照 2017-09-22 下午8.50.59.png" alt="屏幕快照 2017-09-22 下午8.50.59"></p>
<p>点击刷新按钮后（增加后三行）：<img src="/Users/zhangxuan/Pictures/截图/屏幕快照 2017-09-22 下午8.53.06.png" alt="屏幕快照 2017-09-22 下午8.53.06"></p>
<p>由此看出，Servlet运行后，先执行整个服务器初始化的命令，再执行其他初始化命令，再执行相关的服务和doGet方法，当点击刷新按钮后，只会重复执行服务和doGet方法，初始化命令是不会重复执行的。这里存在一个问题：停止服务器之后并没有输出停止信息（destory()…），可能我的停止方法有问题？</p>
<h5 id="（3）Servlet获取初始化参数值（从web-xml文件中）"><a href="#（3）Servlet获取初始化参数值（从web-xml文件中）" class="headerlink" title="（3）Servlet获取初始化参数值（从web.xml文件中）"></a>（3）Servlet获取初始化参数值（从web.xml文件中）</h5><p>Web.xml文件内容（只选取与本例相关的内容）：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"> <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>laozhang<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></div><div class="line">   //servlet的名字</div><div class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>weekend.oneth<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></div><div class="line">   //servlet类的路径（包+类名）</div><div class="line">      <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></div><div class="line">        //第一个参数值：name，值为：老zhang；</div><div class="line">          <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>name<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>老zhang<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></div><div class="line">        //第二个参数值：password，值为：lz123；</div><div class="line">          <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>password<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></div><div class="line">          <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>lz123<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>laozhang<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></div><div class="line">    //servlet的名字，与上面保持一致</div><div class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/getInitParamServlet<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></div><div class="line">    //servlet的虚拟路径（有点类似网站，可以随便写）</div><div class="line">//本例中运行时显示的路径为：http://localhost:8080/webtry/getInitParamServlet</div><div class="line">即通过本地的8080端口访问webtry项目内路径为getInitParamServlet（正是我们所设置的路径）的内容</div><div class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> weekend;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> java.io.PrintWriter;</div><div class="line"><span class="keyword">import</span> javax.servlet.ServletException;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">oneth</span>  <span class="keyword">extends</span> <span class="title">HttpServlet</span></span>&#123;</div><div class="line">	<span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req,HttpServletResponse resp)</span></span></div><div class="line"><span class="function">	<span class="keyword">throws</span> ServletException,IOException</span></div><div class="line"><span class="function">    <span class="comment">//又是熟悉的doGet方法</span></span></div><div class="line"><span class="function">    </span>&#123;</div><div class="line">		String name=<span class="keyword">this</span>.getInitParameter(<span class="string">"name"</span>);</div><div class="line">      <span class="comment">//从web文件中获取参数“name”的信息</span></div><div class="line">		String password=<span class="keyword">this</span>.getInitParameter(<span class="string">"password"</span>);</div><div class="line">      <span class="comment">//从web文件中获取参数“password”的信息</span></div><div class="line">		String servletName=<span class="keyword">this</span>.getServletName();</div><div class="line">      <span class="comment">//从web文件中获取当前servlet的名</span></div><div class="line">		resp.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</div><div class="line">      <span class="comment">//定义页面输出方式和编码</span></div><div class="line">		PrintWriter out=resp.getWriter();</div><div class="line">      <span class="comment">//定义输出方法</span></div><div class="line">		out.println(<span class="string">"&lt;HTML&gt;&lt;HEAD&gt;&lt;TITLE&gt;hello world&lt;/TITLE&gt;&lt;/HEAD&gt;"</span>);</div><div class="line">		out.println(<span class="string">"&lt;font size=5 color=red&gt;ServletName="</span>+servletName+<span class="string">"&lt;/font&gt;&lt;br&gt;"</span>);</div><div class="line">		out.println(<span class="string">"&lt;font szie=5 color=blue&gt;name="</span>+name+<span class="string">"      password="</span>+password+<span class="string">"&lt;/font&gt;"</span>);</div><div class="line">		out.println(<span class="string">"&lt;/BODY&gt;&lt;/HTML&gt;"</span>);</div><div class="line">		out.close();</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest req,HttpServletResponse resp)</span></span></div><div class="line"><span class="function">	<span class="keyword">throws</span> ServletException,IOException</span></div><div class="line"><span class="function">    <span class="comment">//又是熟悉的doPast方法</span></span></div><div class="line"><span class="function">    </span>&#123;</div><div class="line">		doGet(req,resp);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="（4）Servlet从表单获取信息"><a href="#（4）Servlet从表单获取信息" class="headerlink" title="（4）Servlet从表单获取信息"></a>（4）Servlet从表单获取信息</h5><p>（我没有想到这个问题浪费了一个下午的时间… …当一开始我使用跟书中例子一样的Html 4.0版本的语言来编写网页部分的时候，提交表单后无论如何调试，读取到的信息都是null，就在我无路可走之时，我参照网上类似案例（Servlet获取表单信息）改为使用我更熟悉的Html 5来编写网页部分，于是按下提交按钮之后，一切顺利。我到现在还不敢确定说是html4.0的锅，等哪天我闲的蛋疼的时候再去探索吧。）</p>
<h6 id="网页部分"><a href="#网页部分" class="headerlink" title="网页部分"></a>网页部分</h6><p>（一个简易而基本的网页，不难理解）</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>用户注册页面<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">	</div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"keywords"</span> <span class="attr">content</span>=<span class="string">"keyword1,keyword2,keyword3"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"description"</span> <span class="attr">content</span>=<span class="string">"this is my page"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"content-type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=UTF-8"</span>&gt;</span></div><div class="line">    </div><div class="line">    <span class="comment">&lt;!--&lt;link rel="stylesheet" type="text/css" href="./styles.css"&gt;--&gt;</span></div><div class="line"></div><div class="line"></div><div class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">  </div><div class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/webtry/RegServlet"</span>  <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></div><div class="line">  <span class="comment">&lt;!--form的核心属性：action，定义了按下提交按钮之后的行为，本例中是设置为java文件的路径，提交方式定为post，从而将表单中的信息提交到java文件中--&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">h1</span>&gt;</span>用户登陆<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">h2</span>&gt;</span>请填写注册信息<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></div><div class="line">	姓名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"userName"</span> &gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">	密码：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"userPassword"</span>  <span class="attr">id</span>=<span class="string">"pwd"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">	确认密码：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"again_userPassword"</span>  <span class="attr">id</span>=<span class="string">"again_pwd"</span> &gt;</span>(PS:如果两次密码匹配不正确，提交后重新注册)<span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">	性别：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"sex"</span> <span class="attr">value</span>=<span class="string">"男"</span>&gt;</span>男</div><div class="line">			  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span>=<span class="string">"sex"</span> <span class="attr">value</span>=<span class="string">"女"</span>&gt;</span>女<span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">	出身日期：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"age"</span> &gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line"></div><div class="line">	  电子邮箱：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"email"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">	  地址：<span class="tag">&lt;<span class="name">select</span> <span class="attr">name</span>=<span class="string">"sheng"</span>&gt;</span></div><div class="line">		  			<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"广东"</span>&gt;</span>广东<span class="tag">&lt;/<span class="name">option</span>&gt;</span></div><div class="line">		  			<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"广西"</span>&gt;</span>广西<span class="tag">&lt;/<span class="name">option</span>&gt;</span></div><div class="line">		  			<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"云南"</span>&gt;</span>云南<span class="tag">&lt;/<span class="name">option</span>&gt;</span></div><div class="line">		  			<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"其他"</span>&gt;</span>其他<span class="tag">&lt;/<span class="name">option</span>&gt;</span></div><div class="line">	  			<span class="tag">&lt;/<span class="name">select</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">      爱好：<span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">"0"</span> <span class="attr">style</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;<span class="name">tr</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"feature"</span> <span class="attr">value</span>=<span class="string">"运动"</span>&gt;</span>运动<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">tr</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"feature"</span> <span class="attr">value</span>=<span class="string">"音乐"</span>&gt;</span>音乐<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">tr</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span>=<span class="string">"feature"</span> <span class="attr">value</span>=<span class="string">"绘画"</span>&gt;</span>绘画<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></div><div class="line">      <span class="tag">&lt;/<span class="name">table</span>&gt;</span></div><div class="line">      自我简介:<span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">cols</span>=<span class="string">"30"</span> <span class="attr">rows</span>=<span class="string">"5"</span> <span class="attr">name</span>=<span class="string">"author"</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">	  	<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"提交"</span>&gt;</span></div><div class="line">	  	</div><div class="line">				<span class="tag">&lt;/<span class="name">form</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<h6 id="java部分"><a href="#java部分" class="headerlink" title="java部分"></a>java部分</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> weekend;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.io.FileOutputStream;</div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> java.io.PrintWriter;</div><div class="line"><span class="keyword">import</span> javax.servlet.RequestDispatcher;</div><div class="line"><span class="keyword">import</span> javax.servlet.ServletException;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</div><div class="line"><span class="keyword">import</span> javax.swing.text.html.HTMLDocument.HTMLReader.FormAction;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RegServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</div><div class="line">  <span class="comment">//先定义人民群众喜闻乐见的doGet方法（这让我想起了线程里的run（）方法）</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span></div><div class="line"><span class="function">			<span class="keyword">throws</span> ServletException, IOException </span>&#123;</div><div class="line">		<span class="comment">//设置编码，但该函数在get方法中不适用，要自己对每个字符串转换</span></div><div class="line">		request.setCharacterEncoding(<span class="string">"utf-8"</span>);</div><div class="line">		response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</div><div class="line">      <span class="comment">//设置页面样式和数据编码（重中之重）</span></div><div class="line">      </div><div class="line">      <span class="comment">//根据表单中提交的信息初始化若干字符串与其对应</span></div><div class="line">      <span class="comment">//爱好一栏（多选）需要使用字符串数组来读取</span></div><div class="line">		String name = request.getParameter(<span class="string">"userName"</span>);</div><div class="line">		String userName = <span class="keyword">new</span> String(name.getBytes(<span class="string">"ISO-8859-1"</span>),<span class="string">"utf-8"</span>);</div><div class="line">		String password = request.getParameter(<span class="string">"userPassword"</span>);</div><div class="line">		 String againPassword = request.getParameter(<span class="string">"again_userPassword"</span>);</div><div class="line">		 String sex = request.getParameter(<span class="string">"sex"</span>);</div><div class="line">		 String age = request.getParameter(<span class="string">"age"</span>);</div><div class="line">		 String email = request.getParameter(<span class="string">"email"</span>);</div><div class="line">		 String sheng = request.getParameter(<span class="string">"sheng"</span>);</div><div class="line">		 String [] feature=request.getParameterValues(<span class="string">"feature"</span>);</div><div class="line">		String author=request.getParameter(<span class="string">"author"</span>);</div><div class="line">		 PrintWriter out=response.getWriter();</div><div class="line">		 <span class="comment">//判断两次密码是否相符</span></div><div class="line">		<span class="keyword">if</span>(!password.equals(againPassword))&#123;</div><div class="line">			System.out.println(<span class="string">"两次密码不匹配，请重新输入"</span>);</div><div class="line">			response.getWriter().append(<span class="string">"两次密码不匹配，请重新输入"</span>);</div><div class="line">			response.sendRedirect(<span class="string">"/webtry/findout.html"</span>);		<span class="comment">//重定向到登陆页面</span></div><div class="line">			<span class="keyword">return</span>;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">else</span></div><div class="line">          </div><div class="line">          <span class="comment">//以Html页面的方式输出信息；</span></div><div class="line">		&#123;</div><div class="line">			out.println(<span class="string">"&lt;html&gt;"</span>);</div><div class="line">			out.println(<span class="string">"&lt;head&gt;&lt;title&gt;RegServlet&lt;/title&gt;&lt;/head&gt;"</span>);</div><div class="line">			out.println(<span class="string">"&lt;body&gt;&lt;h1&gt;个人详细信息如下：&lt;/h1	&gt;"</span>);</div><div class="line">			out.println(<span class="string">"&lt;h4 &gt;"</span>);</div><div class="line">			out.println(<span class="string">"姓名："</span>+name+<span class="string">"&lt;br&gt;"</span>);</div><div class="line">			out.println(<span class="string">"密码："</span>+password+<span class="string">"&lt;br&gt;"</span>);</div><div class="line">			out.println(<span class="string">"性别："</span>+sex+<span class="string">"&lt;br&gt;"</span>);</div><div class="line">			out.println(<span class="string">"年龄："</span>+age+<span class="string">"&lt;br&gt;"</span>);</div><div class="line">			out.println(<span class="string">"email："</span>+email+<span class="string">"&lt;br&gt;"</span>);</div><div class="line">			out.println(<span class="string">"地址："</span>+sheng+<span class="string">"&lt;br&gt;"</span>);</div><div class="line">			out.println(<span class="string">"爱好："</span>);</div><div class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;feature.length;i++)</div><div class="line">			&#123;</div><div class="line">				out.println(feature[i]);</div><div class="line">				<span class="keyword">if</span>(i&lt;feature.length-<span class="number">1</span>)</div><div class="line">					out.print(<span class="string">"、"</span>);</div><div class="line">			&#125;</div><div class="line">			out.println(<span class="string">"&lt;br&gt;"</span>);</div><div class="line">			out.println(<span class="string">"个人简介："</span>+author+<span class="string">"&lt;br&gt;"</span>);</div><div class="line">			out.println(<span class="string">"&lt;/h4&gt;&lt;/body&gt;&lt;/html&gt;"</span>); </div><div class="line">			out.close();</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">  <span class="comment">//喜闻乐见的doPost方法</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span></span></div><div class="line"><span class="function">			<span class="keyword">throws</span> ServletException, IOException </span>&#123;</div><div class="line">		doGet(request,response);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>运行截图：</p>
<p><img src="/Users/zhangxuan/Pictures/截图/屏幕快照 2017-09-25 下午4.03.16.png" alt="屏幕快照 2017-09-25 下午4.03.16"></p>
<p><img src="/Users/zhangxuan/Pictures/截图/屏幕快照 2017-09-25 下午4.03.37.png" alt="屏幕快照 2017-09-25 下午4.03.37"></p>
<p>目前的web.xml文件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="attr">xmlns</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee"</span> <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd"</span> <span class="attr">id</span>=<span class="string">"WebApp_ID"</span> <span class="attr">version</span>=<span class="string">"3.1"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">display-name</span>&gt;</span>webtry<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">welcome-file-list</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>index.html<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>index.htm<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>index.jsp<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>default.html<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>default.htm<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>default.jsp<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">welcome-file-list</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>registerSevlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>weekend.RegServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>registerServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/registerServlet<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></div></pre></td></tr></table></figure>
<h5 id="（5）从URL读取参数"><a href="#（5）从URL读取参数" class="headerlink" title="（5）从URL读取参数"></a>（5）从URL读取参数</h5><p>（印刷错误真滴把我坑惨了）</p>
<p>妈的，不想多说，我怀疑自己借了假书</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> leguan;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> java.io.PrintWriter;</div><div class="line"></div><div class="line"><span class="keyword">import</span> javax.servlet.ServletException;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</div><div class="line"><span class="comment">//本例最主要是没有定义doPost方法，而是使用doGet方法从URL中获取参数。</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">URL</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span></span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request,HttpServletResponse response)</span></span></div><div class="line"><span class="function">	<span class="keyword">throws</span> ServletException,IOException</span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</div><div class="line">		String name=request.getParameter(<span class="string">"name"</span>);	</div><div class="line">		String password=request.getParameter(<span class="string">"password"</span>);</div><div class="line">		PrintWriter out=response.getWriter();</div><div class="line">		out.println(<span class="string">"name:"</span>+name);</div><div class="line">	     out.println(<span class="string">"password:"</span>+password);</div><div class="line">	     out.flush();</div><div class="line">	     out.close();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>运行网页后在地址<a href="http://localhost:8080/upup/URL" target="_blank" rel="external">http://localhost:8080/upup/URL</a>  后加上?name=zhangsan&amp;password=zs123，则可完成参数传递。</p>
<p>运行结果：name:zhangsan password:zs123</p>
<h3 id="3-状态管理与作用域对象"><a href="#3-状态管理与作用域对象" class="headerlink" title="3.状态管理与作用域对象"></a>3.状态管理与作用域对象</h3><h4 id="状态管理"><a href="#状态管理" class="headerlink" title="状态管理"></a>状态管理</h4><h5 id="（1）cookie"><a href="#（1）cookie" class="headerlink" title="（1）cookie"></a>（1）cookie</h5><p>通过网页输入信息，由java语句写入cooike后再读取并显示出来；</p>
<p>网页：</p>
<p>(一个简易的用来提交用户名的表单)</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>input.html<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"keywords"</span> <span class="attr">content</span>=<span class="string">"ketword1,keyword2,keyword3"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"description"</span> <span class="attr">content</span>=<span class="string">"this is my page"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"content-type"</span> <span class="attr">content</span>=<span class="string">"text/html;charset=UTF-8"</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/upup/C1"</span>  <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">table</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">td</span> <span class="attr">align</span>=<span class="string">'center'</span>&gt;</span>用户名：<span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"username"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">tr</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">td</span> <span class="attr">align</span>=<span class="string">'center'</span> <span class="attr">colspan</span>=<span class="string">'2'</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"提交"</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"reset"</span> <span class="attr">value</span>=<span class="string">"重置"</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">table</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>java：</p>
<p><1.>「接收网页上信息并写入cookie」</1.></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> leguan;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> java.io.PrintWriter;</div><div class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</div><div class="line"><span class="keyword">import</span> java.util.Date;</div><div class="line"><span class="keyword">import</span> javax.servlet.ServletException;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.Cookie;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">public</span>  <span class="class"><span class="keyword">class</span> <span class="title">cookie1</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span></span></div><div class="line"><span class="class">	</span>&#123;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request,HttpServletResponse response)</span></span></div><div class="line"><span class="function">				<span class="keyword">throws</span> ServletException,IOException</span>&#123;</div><div class="line">			response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</div><div class="line">			String username=request.getParameter(<span class="string">"username"</span>);</div><div class="line">			PrintWriter out=response.getWriter();</div><div class="line">			String responseContent=<span class="keyword">null</span>;</div><div class="line">			<span class="keyword">if</span>(username!=<span class="keyword">null</span>&amp;&amp;!username.equals(<span class="string">""</span>))</div><div class="line">			<span class="comment">//用户名不为空（null和空字符串两种情况）</span></div><div class="line">			&#123;</div><div class="line">				Cookie c1=<span class="keyword">new</span> Cookie(<span class="string">"username"</span>,URLEncoder.encode(username,<span class="string">"UTF-8"</span>));</div><div class="line">				Date date=<span class="keyword">new</span> Date();  </div><div class="line">				<span class="comment">//如果以此种方式定义日期并写入cookie（会产生空格）将导致变量传递错误，因为tomcat9版本不兼容此种格式。</span></div><div class="line">			    SimpleDateFormat dtf=<span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy年MM月dd日 hh:mm:ss"</span>);</div><div class="line">				<span class="comment">//使用此语句对日期信息进行格式变换；</span></div><div class="line">				String time=dtf.format(date).replaceAll(<span class="string">" "</span>, <span class="string">""</span>);<span class="comment">//去掉字符串中的空格；</span></div><div class="line">				Cookie c2=<span class="keyword">new</span> Cookie(<span class="string">"lastCall"</span>,URLEncoder.encode(time,<span class="string">"UTF-8"</span>));</div><div class="line">				<span class="comment">//变换后再写入cookie就ok了；</span></div><div class="line">				c1.setMaxAge(<span class="number">60</span>*<span class="number">60</span>*<span class="number">24</span>*<span class="number">30</span>);</div><div class="line">				c2.setMaxAge(<span class="number">60</span>*<span class="number">60</span>*<span class="number">24</span>*<span class="number">30</span>);</div><div class="line">				<span class="comment">//设置两cookie的存活周期（以秒为单位，本例中是30天）</span></div><div class="line">				response.addCookie(c1);</div><div class="line">				response.addCookie(c2);</div><div class="line">				<span class="comment">//所有设置完成后添加cookie</span></div><div class="line">				responseContent=<span class="string">"本次登陆的用户名和时间已经成功写入Cookie.&lt;br&gt;&lt;a href='/upup/C2'&gt;读取Cooike信息&lt;/a&gt;"</span>;</div><div class="line">				<span class="comment">//设置写入完成信息，并提供显示cookie信息的链接以供查看（用户名存在时）</span></div><div class="line">			&#125;</div><div class="line">			<span class="keyword">else</span></div><div class="line">			&#123;</div><div class="line">				responseContent=<span class="string">"用户名为空，请重新输入.&lt;br&gt;&lt;a href='/upup/input.html'&gt;重新输入&lt;/a&gt;"</span>;</div><div class="line">                <span class="comment">//设置重新输入提示信息，并提供输入用户名页面的链接以供重新输入（用户名不存在时）</span></div><div class="line">				&#125;</div><div class="line">			out.println(<span class="string">"&lt;html&gt;&lt;body&gt;&lt;h2&gt;&lt;font color=red&gt;"</span>+responseContent+<span class="string">"&lt;/h2&gt;&lt;/body&gt;&lt;/html&gt;"</span>);</div><div class="line">			<span class="comment">//在当前页面输出上面设置的提示信息；</span></div><div class="line">			out.flush();<span class="comment">//将位于缓冲区的数据立刻发送</span></div><div class="line">			out.close();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>小贴士：</p>
<p><code>SimpleDateFormat</code> 是一个以国别敏感的方式格式化和分析数据的具体类。 它允许格式化 (date -&gt; text)、语法分析 (text -&gt; date)和标准化。</p>
<p>SimpleDateFormat<code>允许以为日期-时间格式化选择任何用户指定的方式启动。 但是，希望用</code>DateFormat<code>中的</code>getTimeInstance<code>、</code>getDateInstance<code>或</code>getDateTimeInstance<code>创建一个日期-时间格式化程序。 每个类方法返回一个以缺省格式化方式初始化的日期／时间格式化程序。 可以根据需要用</code>applyPattern` 方法修改格式化方式。 </p>
<p><2.>「读取cookie中信息并输出」</2.></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> leguan;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> java.io.PrintWriter;</div><div class="line"></div><div class="line"><span class="keyword">import</span> javax.servlet.ServletException;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.Cookie;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">cookie2</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span></span></div><div class="line"><span class="class">	</span>&#123;</div><div class="line">		<span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest req,HttpServletResponse resp)</span></span></div><div class="line"><span class="function">		<span class="keyword">throws</span> ServletException,IOException</span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			doPost(req,resp);</div><div class="line">		&#125;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request,HttpServletResponse response)</span></span></div><div class="line"><span class="function">		<span class="keyword">throws</span> ServletException,IOException</span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			response.setContentType(<span class="string">"text/html;charset=GBK"</span>);</div><div class="line">			PrintWriter out=response.getWriter();</div><div class="line">			out.println(<span class="string">"&lt;html&gt;&lt;head&gt;A servlet&lt;/head&gt;&lt;body&gt;&lt;h2&gt;"</span></div><div class="line">					+ <span class="string">"从Cookie中读取的用户名和上次登录时间&lt;/h2&gt;"</span>);</div><div class="line">			Cookie[]cookies=request.getCookies();</div><div class="line">			<span class="comment">//读取cookie信息到cookie型数组；</span></div><div class="line">			Cookie cookie=<span class="keyword">null</span>;</div><div class="line">			<span class="comment">//定义一个cookie型空变量用于传递数据；</span></div><div class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;cookies.length;i++)</div><div class="line">			<span class="comment">//遍历cookie数组</span></div><div class="line">			&#123;</div><div class="line">				cookie=cookies[i];</div><div class="line">				<span class="keyword">if</span>(cookie.getName().equals(<span class="string">"username"</span>))</div><div class="line">				<span class="comment">//输出用户名</span></div><div class="line">				&#123;</div><div class="line">					String put=URLDecoder.decode(cookie.getValue(), <span class="string">"UTF-8"</span>);</div><div class="line">					out.println(<span class="string">"用户名："</span>+put+<span class="string">"&lt;br&gt;"</span>);</div><div class="line">				&#125;</div><div class="line">				<span class="keyword">if</span>(cookie.getName().equals(<span class="string">"lastCall"</span>))</div><div class="line">				<span class="comment">//输出上次登录日期</span></div><div class="line">				&#123;</div><div class="line">					String put=URLDecoder.decode(cookie.getValue(), <span class="string">"UTF-8"</span>);</div><div class="line">					out.println(<span class="string">"上次登录时间："</span>+put+<span class="string">"&lt;br&gt;"</span>);</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">			out.println(<span class="string">"&lt;/body&gt;&lt;/html&gt;"</span>);</div><div class="line">			out.flush();<span class="comment">//刷新，立即把位于缓冲区的数据发送出去；</span></div><div class="line">			out.close();</div><div class="line">&#125;</div><div class="line">	&#125;</div></pre></td></tr></table></figure>
<p.这里有一个问题，用户名输入为汉字时无法正确读取，有可能是编码问题；>

<p>（上面这个问题已经解决，的确是编码问题：cookie默认支持的编码方式是ASCII码，不能对中文进行编码和解码，此时在写入和读取cookie信息时加上编码设定语句就行了）</p>
<p>写入：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Cookie cookie = <span class="keyword">new</span> Cookie(name,URLEncoder.encode(value, <span class="string">"UTF-8"</span>));</div></pre></td></tr></table></figure>
<p>读取：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">String value = URLDecoder.decode(cookie.getValue(), <span class="string">"UTF-8"</span>);</div></pre></td></tr></table></figure>
<h5 id="2-session"><a href="#2-session" class="headerlink" title="(2)session"></a>(2)session</h5><p>演示Session会话的使用。</p>
<p>网页部分：登陆界面——必须使用数据库表usertbl中已存在的name和password进行登录；</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>login.html<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"keywords"</span> <span class="attr">content</span>=<span class="string">"keyword1,keyword2,keyword3"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"description"</span> <span class="attr">content</span>=<span class="string">"this is my page"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"content-type"</span> <span class="attr">content</span>=<span class="string">"text/html;charset=utf-8"</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/upup/login"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></div><div class="line">      //将表单提交到LoginServlet.java</div><div class="line">        用户名:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"name"</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">        密码:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"password"</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"登录"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"reset"</span> <span class="attr">value</span>=<span class="string">"清空"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>java 部分：</p>
<p><1>数据传输：</1></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> leguan;</div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> java.sql.Connection;</div><div class="line"><span class="keyword">import</span> java.sql.DriverManager;</div><div class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</div><div class="line"><span class="keyword">import</span> java.sql.ResultSet;</div><div class="line"><span class="keyword">import</span> javax.servlet.ServletException;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</div><div class="line"><span class="keyword">import</span> org.apache.tomcat.dbcp.dbcp2.ConnectionFactory;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginServlet</span>  <span class="keyword">extends</span> <span class="title">HttpServlet</span></span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request,HttpServletResponse response)</span></span></div><div class="line"><span class="function">	<span class="keyword">throws</span> ServletException,IOException</span>&#123;</div><div class="line">		request.setCharacterEncoding(<span class="string">"UTF-8"</span>);</div><div class="line">		response.setCharacterEncoding(<span class="string">"UTF-8"</span>);</div><div class="line">		response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</div><div class="line">		String name=request.getParameter(<span class="string">"name"</span>);</div><div class="line">		String password=request.getParameter(<span class="string">"password"</span>);</div><div class="line">		HttpSession session=request.getSession();</div><div class="line">      <span class="comment">//初始化Session</span></div><div class="line">		PreparedStatement pstmt=<span class="keyword">null</span>;</div><div class="line">      <span class="comment">//PreparedStatement：继承于Statement的接口对象，由于预编译过，其执行速度较快，一般需要多次执行的sql经常创建为此对象（简单来说进行sql语言操作）；</span></div><div class="line">		ResultSet rs=<span class="keyword">null</span>;</div><div class="line">      <span class="comment">//ResultSet：数据中查询结果返回的一种对象，可以说结果集是一个存储查询结果的对象，但是结果集并不仅仅具有存储的功能，他同时还具有操纵数据的功能，可能完成对数据的更新等.</span></div><div class="line">		Connection conn=<span class="keyword">null</span>;</div><div class="line">      <span class="comment">//Connection：基本的接口集合，用来进行数据的连接（本例中进行mysql数据库的连接）；</span></div><div class="line">		<span class="keyword">try</span> &#123;</div><div class="line">			String sql=<span class="string">"select * from usertbl where name=?and password=?"</span>;</div><div class="line">          <span class="comment">//以name和password为限制条件再表usertbl中进行查询的sql语句；</span></div><div class="line">			conn=ConnectionFactory.getConnection();</div><div class="line">          <span class="comment">//实例化Connection类，对mysql进行连接访问；</span></div><div class="line">          <span class="comment">//所有的数据库操作都赋给pstmt（PreparedStatement的实例）；</span></div><div class="line">			pstmt=conn.prepareStatement(sql);</div><div class="line">          <span class="comment">//执行上面定义的sql语句；</span></div><div class="line">			pstmt.setString(<span class="number">1</span>,name);</div><div class="line">          <span class="comment">//将name值赋给sql语句中第一个问号；</span></div><div class="line">			pstmt.setString(<span class="number">2</span>, password);</div><div class="line">          <span class="comment">//将password值赋给sql语句中第二个问号；</span></div><div class="line">			rs=pstmt.executeQuery();</div><div class="line">          <span class="comment">//将获取结果返回到rs中（ResultSet的实例）；</span></div><div class="line">          </div><div class="line">			<span class="keyword">if</span>(rs.next())</div><div class="line">              <span class="comment">//如果rs中有数据</span></div><div class="line">			&#123;</div><div class="line">				session.setAttribute(<span class="string">"name"</span>, name);</div><div class="line">              <span class="comment">//将name保存到session中；</span></div><div class="line">				request.getRequestDispatcher(<span class="string">"index"</span>).forward(request, response);</div><div class="line">              <span class="comment">//跳转到index路径（指向IndexServlet.java，用来显示session信息）;</span></div><div class="line">			&#125;</div><div class="line">			<span class="keyword">else</span></div><div class="line">              <span class="comment">//如果rs没有数据</span></div><div class="line">			&#123;</div><div class="line">				request.getRequestDispatcher(<span class="string">"/login.html"</span>).forward(request, response);</div><div class="line">              <span class="comment">//跳转到login.html页面（重新输入name和password）；</span></div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">catch</span>(Exception e)</div><div class="line">		&#123;</div><div class="line">			e.printStackTrace();</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">finally</span> &#123;</div><div class="line">          <span class="comment">//数据传递完成之后，关闭用于数据传输的若干接口；</span></div><div class="line">			ResourceClose.close(rs,pstmt,conn);</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">static</span>  <span class="class"><span class="keyword">class</span> <span class="title">ConnectionFactory</span></span>&#123;</div><div class="line">      <span class="comment">//用来连接mysql数据库；</span></div><div class="line">		<span class="keyword">private</span> <span class="keyword">static</span> String driver=<span class="string">"com.mysql.jdbc.Driver"</span>;</div><div class="line">		<span class="keyword">private</span> <span class="keyword">static</span> String url=<span class="string">"jdbc:mysql://localhost:3306/MacOS?useUnicode=true&amp;characterEncoding=UTF-8"</span>;</div><div class="line">		<span class="keyword">private</span> <span class="keyword">static</span> String userName=<span class="string">"root"</span>;</div><div class="line">		<span class="keyword">private</span> <span class="keyword">static</span> String password=<span class="string">"zx1583707135"</span>;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">static</span>  Connection <span class="title">getConnection</span><span class="params">()</span></span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			<span class="keyword">try</span> &#123;</div><div class="line">				Class.forName(driver);</div><div class="line">				<span class="keyword">return</span> DriverManager.getConnection(url,userName,password);</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">catch</span>(Exception e)</div><div class="line">			&#123;</div><div class="line">				e.printStackTrace();</div><div class="line">				<span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><2>数据展示（主页面）</2></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> leguan;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> java.io.PrintWriter;</div><div class="line"></div><div class="line"><span class="keyword">import</span> javax.servlet.ServletException;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">IndexServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span></span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request,HttpServletResponse response)</span></span></div><div class="line"><span class="function">	<span class="keyword">throws</span> ServletException,IOException</span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		doPost(request,response);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request,HttpServletResponse response)</span></span></div><div class="line"><span class="function">	<span class="keyword">throws</span> ServletException,IOException</span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		HttpSession session=request.getSession();</div><div class="line">      <span class="comment">//实例化session对象用以接收从LoginServlet.java传递过来的Session信息；</span></div><div class="line">		response.setContentType(<span class="string">"text/html;charset=gb2312"</span>);</div><div class="line">		PrintWriter out=response.getWriter();</div><div class="line">      <span class="comment">//输出信息；</span></div><div class="line">		out.println(<span class="string">"&lt;html&gt;&lt;body&gt;&lt;h3&gt;"</span>);</div><div class="line">		out.println(<span class="string">"Session ID:"</span>+session.getId()+<span class="string">"&lt;br&gt;"</span>);</div><div class="line">      <span class="comment">//获取session的ID；</span></div><div class="line">		out.println(<span class="string">"Session Attribute:"</span>+session.getAttribute(<span class="string">"name"</span>)+<span class="string">"&lt;br&gt;"</span>);</div><div class="line">      <span class="comment">//获取session中name值</span></div><div class="line">		out.println(<span class="string">"Session timeout:"</span>+session.getMaxInactiveInterval()+<span class="string">"s"</span>+<span class="string">"&lt;br&gt;"</span>);</div><div class="line">      <span class="comment">//获取session默认的过期时间(本例中为1800s)</span></div><div class="line">		session.setMaxInactiveInterval(<span class="number">300</span>);</div><div class="line">      <span class="comment">//设置当前session的过期时间为300秒；</span></div><div class="line">		out.println(<span class="string">"Session timeout:"</span>+session.getMaxInactiveInterval()+<span class="string">"s"</span>+<span class="string">"&lt;br&gt;"</span>);</div><div class="line">      <span class="comment">//再次获取session的过期时间（此时为300s）</span></div><div class="line">      <span class="comment">//下面给出链接用以访问view1和view2两个session</span></div><div class="line">		out.println(<span class="string">"&lt;a href=\"view1\"&gt;view1&lt;/a&gt;&lt;br&gt;"</span>);</div><div class="line">		out.println(<span class="string">"&lt;a href=\"view2\"&gt;view2&lt;/a&gt;&lt;br&gt;"</span>);</div><div class="line">		out.println(<span class="string">"&lt;/h3&gt;&lt;/body&gt;&lt;/html&gt;"</span>);</div><div class="line">		out.close();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>数据展示（子页面）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> leguan;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> java.io.PrintWriter;</div><div class="line"></div><div class="line"><span class="keyword">import</span> javax.servlet.ServletException;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">View1Servlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span></span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request,HttpServletResponse response)</span></span></div><div class="line"><span class="function">	<span class="keyword">throws</span> ServletException,IOException</span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		doPost(request,response);</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request,HttpServletResponse response)</span></span></div><div class="line"><span class="function">	<span class="keyword">throws</span> ServletException,IOException</span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		HttpSession session=request.getSession();</div><div class="line">      <span class="comment">//获取从IndexServlet.java传来的session</span></div><div class="line">		response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</div><div class="line">		PrintWriter out=response.getWriter();</div><div class="line">      <span class="comment">//输出信息；</span></div><div class="line">		out.println(<span class="string">"&lt;html&gt;&lt;body&gt;&lt;h3&gt;"</span>);</div><div class="line">		out.println(<span class="string">"This is view1... ...&lt;br&gt;"</span>);</div><div class="line">		out.println(<span class="string">"session ID:"</span>+session.getId()+<span class="string">"&lt;br&gt;"</span>);</div><div class="line">		out.println(<span class="string">"Session Attribute:"</span>+session.getAttribute(<span class="string">"name"</span>)+<span class="string">"&lt;br&gt;"</span>);</div><div class="line">		out.println(<span class="string">"&lt;/h3&gt;&lt;/body&gt;&lt;/html&gt;"</span>);</div><div class="line">		out.close();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">*********************************************************************************************</div><div class="line"><span class="comment">//跟上面一样，这里就不赘述了；</span></div><div class="line"><span class="keyword">package</span> leguan;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> java.io.PrintWriter;</div><div class="line"></div><div class="line"><span class="keyword">import</span> javax.servlet.ServletException;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">View2Servlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span></span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request,HttpServletResponse response)</span></span></div><div class="line"><span class="function">	<span class="keyword">throws</span> ServletException,IOException</span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		doPost(request,response);</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request,HttpServletResponse response)</span></span></div><div class="line"><span class="function">	<span class="keyword">throws</span> ServletException,IOException</span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		HttpSession session=request.getSession();</div><div class="line">		response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</div><div class="line">		PrintWriter out=response.getWriter();</div><div class="line">		out.println(<span class="string">"&lt;html&gt;&lt;body&gt;&lt;h3&gt;"</span>);</div><div class="line">		out.println(<span class="string">"This is view1... ...&lt;br&gt;"</span>);</div><div class="line">		out.println(<span class="string">"session ID:"</span>+session.getId()+<span class="string">"&lt;br&gt;"</span>);</div><div class="line">		out.println(<span class="string">"Session Attribute:"</span>+session.getAttribute(<span class="string">"name"</span>)+<span class="string">"&lt;br&gt;"</span>);</div><div class="line">		out.println(<span class="string">"&lt;/h3&gt;&lt;/body&gt;&lt;/html&gt;"</span>);</div><div class="line">		out.close();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>运行结果：（name：zhangsan  password：zs123）</p>
<p><img src="/Users/zhangxuan/Pictures/截图/屏幕快照 2017-09-30 上午10.58.28.png" alt="屏幕快照 2017-09-30 上午10.58.28"></p>
<p><img src="/Users/zhangxuan/Pictures/截图/屏幕快照 2017-09-30 上午10.58.39.png" alt="屏幕快照 2017-09-30 上午10.58.39"></p>
<p><img src="/Users/zhangxuan/Pictures/截图/屏幕快照 2017-09-30 上午10.58.48.png" alt="屏幕快照 2017-09-30 上午10.58.48"></p>
<p><img src="/Users/zhangxuan/Pictures/截图/屏幕快照 2017-09-30 上午11.05.04.png" alt="屏幕快照 2017-09-30 上午11.05.04"></p>
<p>####作用域对象</p>
<h5 id="ServletContext"><a href="#ServletContext" class="headerlink" title="ServletContext"></a>ServletContext</h5><p>在web创建时启动，停止时销毁，保存的信息存在范围为整个web应用。ServletContext对象对于一个web应用来说是唯一的，一般存放一些Web应用中所有用户都要使用，并且在整个Web应用运行过程中一直要使用的数据。</p>
<p>实例：</p>
<p>利用ServletContext实现统计页面被访问次数。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> leguan;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> java.io.PrintWriter;</div><div class="line"></div><div class="line"><span class="keyword">import</span> javax.servlet.ServletException;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CountServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span></span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request,HttpServletResponse response)</span></span></div><div class="line"><span class="function">	<span class="keyword">throws</span> ServletException,IOException</span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		doPost(request,response);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request,HttpServletResponse response)</span></span></div><div class="line"><span class="function">	<span class="keyword">throws</span> ServletException,IOException</span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</div><div class="line">		Integer count=(Integer)<span class="keyword">this</span>.getServletContext().getAttribute(<span class="string">"count"</span>);</div><div class="line">      <span class="comment">//从当前的ServletContext中获取count对象的值；</span></div><div class="line">		<span class="keyword">if</span>(count==<span class="keyword">null</span>)</div><div class="line">       <span class="comment">//访问次数为零则显示一次；</span></div><div class="line">		&#123;</div><div class="line">			count=<span class="number">1</span>;</div><div class="line">			<span class="keyword">this</span>.getServletContext().setAttribute(<span class="string">"count"</span>, count);</div><div class="line">		&#125;</div><div class="line">      <span class="comment">//访问次数不为零则+1；</span></div><div class="line">		<span class="keyword">else</span> &#123;</div><div class="line">			count=count+<span class="number">1</span>;</div><div class="line">			<span class="keyword">this</span>.getServletContext().setAttribute(<span class="string">"count"</span>, count);</div><div class="line">		&#125;</div><div class="line">		PrintWriter out=response.getWriter();</div><div class="line">		out.println(<span class="string">"&lt;! DOCTYPE html&gt;"</span>);</div><div class="line">		out.println(<span class="string">"&lt;html&gt;"</span>);</div><div class="line">		out.println(<span class="string">"&lt;head&gt;&lt;title&gt;A servlet&lt;/title&gt;&lt;/head&gt;"</span>);</div><div class="line">		out.println(<span class="string">"&lt;body&gt;&lt;h2&gt;&lt;font szie=5 color=blue&gt;该页面第"</span>+count+<span class="string">"次被访问！&lt;/font&gt;&lt;/h2&gt;&lt;/body&gt;&lt;/html&gt;"</span>);</div><div class="line">		out.flush();</div><div class="line">		out.close();</div><div class="line">&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="比较"><a href="#比较" class="headerlink" title="比较"></a>比较</h5><p>作用域：ServletContext、HttpSession、ServletRequest对象的作用域依次变小，但是他们的参数相互独立，没有包含关系；</p>
<p>ServletContext是应用层次对象；HttpSession是会话层次对象；ServletRequest是响应层次对象。</p>
<h4 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h4><p>一个阉割版本的学生信息管理系统（BS模式），登陆账号密码，显示对应信息；</p>
<h5 id="登陆界面"><a href="#登陆界面" class="headerlink" title="登陆界面"></a>登陆界面</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>login.html<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"keywords"</span> <span class="attr">content</span>=<span class="string">"keyword1,keyword2,keyword3"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"description"</span> <span class="attr">content</span>=<span class="string">"this is my page"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"content-type"</span> <span class="attr">content</span>=<span class="string">"text/html;charset=utf-8"</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/upup/login"</span> <span class="attr">method</span>=<span class="string">"post"</span>&gt;</span></div><div class="line">        用户名:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"name"</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">        密码:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">name</span>=<span class="string">"password"</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"登录"</span>/&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"reset"</span> <span class="attr">value</span>=<span class="string">"清空"</span>/&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<h5 id="数据获取与传递"><a href="#数据获取与传递" class="headerlink" title="数据获取与传递"></a>数据获取与传递</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> chi;</div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> java.sql.Connection;</div><div class="line"><span class="keyword">import</span> java.sql.DriverManager;</div><div class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</div><div class="line"><span class="keyword">import</span> java.sql.ResultSet;</div><div class="line"><span class="keyword">import</span> java.sql.SQLException;</div><div class="line"><span class="keyword">import</span> javax.servlet.ServletException;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginServlet</span>  <span class="keyword">extends</span> <span class="title">HttpServlet</span></span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request,HttpServletResponse response)</span></span></div><div class="line"><span class="function">	<span class="keyword">throws</span> ServletException,IOException</span>&#123;</div><div class="line">		request.setCharacterEncoding(<span class="string">"UTF-8"</span>);</div><div class="line">		response.setCharacterEncoding(<span class="string">"UTF-8"</span>);</div><div class="line">		response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</div><div class="line">		String name=request.getParameter(<span class="string">"name"</span>);</div><div class="line">		String password=request.getParameter(<span class="string">"password"</span>);</div><div class="line">		String sex=request.getParameter(<span class="string">"sex"</span>);</div><div class="line">		String privence=request.getParameter(<span class="string">"privence"</span>);</div><div class="line">		String author=request.getParameter(<span class="string">"author"</span>);</div><div class="line">		HttpSession session=request.getSession();</div><div class="line">		PreparedStatement pstmt=<span class="keyword">null</span>;</div><div class="line">		ResultSet rs=<span class="keyword">null</span>;</div><div class="line">		Connection conn=<span class="keyword">null</span>;</div><div class="line">		<span class="keyword">try</span> &#123;</div><div class="line">			String sql=<span class="string">"select * from usertbl where name=?and password=?"</span>;</div><div class="line">			conn=ConnectionFactory.getConnection();</div><div class="line">			pstmt=conn.prepareStatement(sql);</div><div class="line">			pstmt.setString(<span class="number">1</span>,name);</div><div class="line">			pstmt.setString(<span class="number">2</span>, password);</div><div class="line">			rs=pstmt.executeQuery();</div><div class="line">          <span class="comment">//从rs（数据库查询结果集）中查询数据并传递；</span></div><div class="line">			<span class="keyword">while</span>(rs.next())</div><div class="line">			&#123;</div><div class="line">				name=rs.getString(<span class="number">1</span>);</div><div class="line">				sex=rs.getString(<span class="number">3</span>);</div><div class="line">				privence=rs.getString(<span class="number">4</span>);</div><div class="line">				author=rs.getString(<span class="number">5</span>);</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">catch</span>(SQLException e)</div><div class="line">		&#123;</div><div class="line">			e.printStackTrace();</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">finally</span> &#123;</div><div class="line">			ResourceClose.close(rs,pstmt,conn);</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">if</span>(name!=<span class="keyword">null</span>)</div><div class="line">		&#123;</div><div class="line">			session.setAttribute(<span class="string">"name"</span>, name);</div><div class="line">			session.setAttribute(<span class="string">"sex"</span>,sex);</div><div class="line">			session.setAttribute(<span class="string">"privence"</span>, privence);</div><div class="line">			session.setAttribute(<span class="string">"author"</span>, author);</div><div class="line">			response.sendRedirect(request.getContextPath()+<span class="string">"/adminServlet"</span>);</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">else</span></div><div class="line">		&#123;</div><div class="line">			response.sendRedirect(request.getContextPath()+<span class="string">"/login.html"</span>);</div><div class="line">		&#125;</div><div class="line">&#125;</div><div class="line">	<span class="keyword">static</span>  <span class="class"><span class="keyword">class</span> <span class="title">ConnectionFactory</span></span>&#123;</div><div class="line">		<span class="keyword">private</span> <span class="keyword">static</span> String driver=<span class="string">"com.mysql.jdbc.Driver"</span>;</div><div class="line">		<span class="keyword">private</span> <span class="keyword">static</span> String url=<span class="string">"jdbc:mysql://localhost:3306/MacOS?useUnicode=true&amp;characterEncoding=UTF-8"</span>;</div><div class="line">		<span class="keyword">private</span> <span class="keyword">static</span> String userName=<span class="string">"root"</span>;</div><div class="line">		<span class="keyword">private</span> <span class="keyword">static</span> String password=<span class="string">"zx1583707135"</span>;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">static</span>  Connection <span class="title">getConnection</span><span class="params">()</span></span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			<span class="keyword">try</span> &#123;</div><div class="line">				Class.forName(driver);</div><div class="line">				<span class="keyword">return</span> DriverManager.getConnection(url,userName,password);</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">catch</span>(Exception e)</div><div class="line">			&#123;</div><div class="line">				e.printStackTrace();</div><div class="line">				<span class="keyword">return</span> <span class="keyword">null</span>;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line"></div><div class="line">	&#125;</div><div class="line"></div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">******************************************************************************************</div><div class="line"><span class="keyword">package</span> chi;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.sql.Connection;</div><div class="line"><span class="keyword">import</span> java.sql.ResultSet;</div><div class="line"><span class="keyword">import</span> java.sql.Statement;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ResourceClose</span></span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">(ResultSet rs,Statement stmt,Connection conn)</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		<span class="keyword">try</span> &#123;</div><div class="line">			<span class="keyword">if</span>(rs!=<span class="keyword">null</span>)rs.close();</div><div class="line">			<span class="keyword">if</span>(stmt!=<span class="keyword">null</span>)stmt.close();</div><div class="line">			<span class="keyword">if</span>(conn!=<span class="keyword">null</span>)conn.close();</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">catch</span>(Exception e)</div><div class="line">		&#123;</div><div class="line">			e.printStackTrace();</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">(ResultSet rs,Statement stmt)</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		close(rs,stmt,<span class="keyword">null</span>);</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">(Statement stmt,Connection conn)</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		close(<span class="keyword">null</span>,stmt,conn);</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">(ResultSet rs,Connection conn)</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		close(<span class="keyword">null</span>,<span class="keyword">null</span>,conn);</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">(ResultSet rs)</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		close(rs,<span class="keyword">null</span>,<span class="keyword">null</span>);</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">(Statement stmt)</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		close(<span class="keyword">null</span>,stmt,<span class="keyword">null</span>);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="信息输出"><a href="#信息输出" class="headerlink" title="信息输出"></a>信息输出</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> chi;</div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> java.io.PrintWriter;</div><div class="line"><span class="keyword">import</span> javax.servlet.ServletException;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AdminServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span></span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doGet</span><span class="params">(HttpServletRequest request,HttpServletResponse response)</span></span></div><div class="line"><span class="function">	<span class="keyword">throws</span> ServletException,IOException</span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		<span class="keyword">this</span>.doPost(request, response);</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(HttpServletRequest request,HttpServletResponse response)</span></span></div><div class="line"><span class="function">	<span class="keyword">throws</span> ServletException,IOException</span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</div><div class="line">		HttpSession session=request.getSession();</div><div class="line">      <span class="comment">//实例化session获取session的信息</span></div><div class="line">      <span class="comment">//从session获取信息；</span></div><div class="line">		String sex=(String)session.getAttribute(<span class="string">"sex"</span>);</div><div class="line">		String name=(String)session.getAttribute(<span class="string">"name"</span>);</div><div class="line">		String privence=(String)session.getAttribute(<span class="string">"privence"</span>);</div><div class="line">		String author=(String)session.getAttribute(<span class="string">"author"</span>);</div><div class="line">		PrintWriter out=response.getWriter();</div><div class="line">		out.println(<span class="string">"&lt;!DOCTYPE html&gt;"</span>);</div><div class="line">		out.println(<span class="string">"&lt;html&gt;&lt;head&gt;&lt;title&gt;A servlet&lt;/title&gt;&lt;/head&gt;&lt;body&gt;"</span>);</div><div class="line">		<span class="keyword">if</span>(name!=<span class="keyword">null</span>)</div><div class="line">		&#123;</div><div class="line">			out.println(<span class="string">"登陆成功，欢迎你："</span>+name+<span class="string">"&lt;br&gt;"</span>);</div><div class="line">			out.println(<span class="string">"您的个人信息为：&lt;br&gt;"</span>);</div><div class="line">			out.println(<span class="string">"性别："</span>+sex+<span class="string">"&lt;br&gt;"</span>);</div><div class="line">			out.println(<span class="string">"省份："</span>+privence+<span class="string">"&lt;br&gt;"</span>);</div><div class="line">	        out.println(<span class="string">"自我简介："</span>+author+<span class="string">"&lt;br&gt;"</span>);	</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">else</span></div><div class="line">		&#123;</div><div class="line">			response.sendRedirect(request.getContextPath()+<span class="string">"/login.html"</span>);</div><div class="line">		&#125;</div><div class="line">		out.println(<span class="string">"&lt;/body&gt;&lt;/html&gt;"</span>);</div><div class="line">		out.flush();</div><div class="line">		out.close();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="运行结果"><a href="#运行结果" class="headerlink" title="运行结果"></a>运行结果</h5><p>登陆成功，欢迎你：zhangsan<br>您的个人信息为：<br>性别：男<br>省份：内蒙古自治区<br>自我简介：我是一名大学生</p>
<h3 id="4-JSP语法基础"><a href="#4-JSP语法基础" class="headerlink" title="4.JSP语法基础"></a>4.JSP语法基础</h3><p>jsp写法一句话说来就是将java语言和html语言和谐得糅合到一起。一来减少工作（按照纯servlet的写法，你可能要分别写html页面和java类文件），二来，，，没有二来。</p>
<h4 id="JSP元素"><a href="#JSP元素" class="headerlink" title="JSP元素"></a>JSP元素</h4><h5 id="样例"><a href="#样例" class="headerlink" title="样例"></a>样例</h5><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></div><div class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</div><div class="line"><span class="comment">//定义页面属性</span></div><div class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span>&gt;</div><div class="line">&lt;title&gt;JSP脚本元素&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">    &lt;%!</div><div class="line">  <span class="comment">//全局变量标签，如果不加“！”表示局部变量；</span></div><div class="line">        <span class="keyword">int</span> count=<span class="number">0</span>; </div><div class="line">        String color[]=&#123;<span class="string">"red"</span>,<span class="string">"green"</span>,<span class="string">"blue"</span>&#125;;</div><div class="line">        <span class="function">String <span class="title">getColor</span><span class="params">(<span class="keyword">int</span> i)</span></span></div><div class="line"><span class="function">        </span>&#123;</div><div class="line">        	<span class="keyword">return</span> color[i];</div><div class="line">        &#125;</div><div class="line">        %&gt;</div><div class="line">    &lt;%=++count%&gt;&lt;br&gt;</div><div class="line"> <span class="comment">//表达式（有具体值）使用“&lt;%=&gt;”标签</span></div><div class="line">    &lt;%=getColor(<span class="number">1</span>)%&gt;&lt;br&gt;&lt;br&gt;</div><div class="line">    &lt;table&gt;</div><div class="line">    &lt;tr&gt;&lt;td colspan="9"&gt;九九乘法表&lt;/td&gt;&lt;/tr&gt;</div><div class="line">&lt;%<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;=<span class="number">9</span>;j++) &#123;</div><div class="line">%&gt;</div><div class="line">&lt;tr&gt;</div><div class="line">&lt;% <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=j;i++)&#123;%&gt;</div><div class="line">&lt;td&gt;&lt;%=j%&gt;*&lt;%= i%&gt;=&lt;%=i*j %&gt;&lt;/td&gt;</div><div class="line">&lt;%&#125;%&gt;</div><div class="line">&lt;/tr&gt;</div><div class="line">&lt;%&#125;%&gt;</div><div class="line">&lt;/table&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure>
<p>「运行结果：」</p>
<p>1</p>
<p>green</p>
<table>
<thead>
<tr>
<th>九九乘法表</th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>0*0=0</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>1*0=0</td>
<td>1*1=1</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>2*0=0</td>
<td>2*1=2</td>
<td>2*2=4</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>3*0=0</td>
<td>3*1=3</td>
<td>3*2=6</td>
<td>3*3=9</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>4*0=0</td>
<td>4*1=4</td>
<td>4*2=8</td>
<td>4*3=12</td>
<td>4*4=16</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>5*0=0</td>
<td>5*1=5</td>
<td>5*2=10</td>
<td>5*3=15</td>
<td>5*4=20</td>
<td>5*5=25</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>6*0=0</td>
<td>6*1=6</td>
<td>6*2=12</td>
<td>6*3=18</td>
<td>6*4=24</td>
<td>6*5=30</td>
<td>6*6=36</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>7*0=0</td>
<td>7*1=7</td>
<td>7*2=14</td>
<td>7*3=21</td>
<td>7*4=28</td>
<td>7*5=35</td>
<td>7*6=42</td>
<td>7*7=49</td>
<td></td>
<td></td>
</tr>
<tr>
<td>8*0=0</td>
<td>8*1=8</td>
<td>8*2=16</td>
<td>8*3=24</td>
<td>8*4=32</td>
<td>8*5=40</td>
<td>8*6=48</td>
<td>8*7=56</td>
<td>8*8=64</td>
<td></td>
</tr>
<tr>
<td>9*0=0</td>
<td>9*1=9</td>
<td>9*2=18</td>
<td>9*3=27</td>
<td>9*4=36</td>
<td>9*5=45</td>
<td>9*6=54</td>
<td>9*7=63</td>
<td>9*8=72</td>
<td>9*9=81</td>
</tr>
</tbody>
</table>
<h5 id="page指令"><a href="#page指令" class="headerlink" title="page指令"></a>page指令</h5><p>用于设置整个jsp页面的属性。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></div><div class="line">    pageEncoding=<span class="string">"UTF-8"</span>  <span class="keyword">import</span>=<span class="string">"java.util.*,java.io.*"</span>%&gt;</div><div class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span>&gt;</div><div class="line">&lt;title&gt;page 指令&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">&lt;h1&gt;欢迎光临，你个小bicth&lt;/h1&gt;</div><div class="line">&lt;h1&gt;今天是：&lt;/h1&gt;</div><div class="line">&lt;h1&gt;&lt;%=new Date()%&gt;&lt;/h1&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure>
<p>上面例子展示了对java包的引用，从而能在页面中使用Date()方法来输出时间；</p>
<p>「运行结果」</p>
<p>欢迎光临，你个小bicth</p>
<p>今天是：</p>
<p>Thu Oct 05 14:35:04 CST 2017</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></div><div class="line">    pageEncoding=<span class="string">"UTF-8"</span>  errorPage=<span class="string">"errorPage.jsp"</span>%&gt;</div><div class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span>&gt;</div><div class="line">&lt;title&gt;error属性&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">&lt;%Integer.parseInt(<span class="string">"aaa"</span>);%&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div><div class="line"></div><div class="line"><span class="number">1</span>.设置errorPage，指向errorPage.jsp页面（当前页面出现错误时，跳转到指定的页面）</div><div class="line"><span class="number">2</span>.设置一个数据类型转换错误的语句来产生错误；（字符串转<span class="keyword">int</span>型）</div><div class="line">******************************************************************************************</div><div class="line"></div><div class="line">&lt;%@ page language=<span class="string">"java"</span> isErrorPage=<span class="string">"true"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></div><div class="line">    pageEncoding=<span class="string">"UTF-8"</span> <span class="keyword">import</span>=<span class="string">"java.util.*"</span>%&gt;</div><div class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span>&gt;</div><div class="line">&lt;title&gt;error&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">&lt;h1&gt;出现错误&lt;%=exception.getMessage() %&gt;&lt;/h1&gt;</div><div class="line"></div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div><div class="line"></div><div class="line"><span class="number">1</span>.设置isErrorPage为<span class="keyword">true</span>（使当前页面具备errorPage属性，也就是接受其他页面的errorPage跳转请求）；</div><div class="line"><span class="number">2</span>.使用exception.getMessage()输出错误类型；</div></pre></td></tr></table></figure>
<p>上面一段jsp代码调用下面一段jsp代码，输出错误类型；</p>
<p>运行结果：出现错误For input string: “aaa”</p>
<h5 id="include指令"><a href="#include指令" class="headerlink" title="include指令"></a>include指令</h5><p>将file属性指定页面内容静态包含到当前页面。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></div><div class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</div><div class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span>&gt;</div><div class="line">&lt;title&gt;include指令&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">&lt;font color=green size=3&gt;This is my main page.&lt;/font&gt;&lt;br&gt;&lt;br&gt;</div><div class="line">&lt;%<span class="meta">@include</span> file=<span class="string">"insert.jsp"</span>%&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div><div class="line"></div><div class="line"></div><div class="line"><span class="number">1</span>.插入指令（&lt;%<span class="meta">@include</span> file=<span class="string">"insert.jsp"</span>%&gt;），将insert.jsp页面的内容包含到当前界面；</div><div class="line">*********************************************************************************************</div><div class="line"></div><div class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></div><div class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</div><div class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span>&gt;</div><div class="line">&lt;title&gt;include指令&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">********插入界面*********&lt;br&gt;</div><div class="line">&lt;font size=3 color=blue&gt;阿黛尔中气十足的声线，不颓，不吵&lt;/font&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure>
<p>运行结果：</p>
<p>This is my main page.</p>
<p>插入界面</p>
<p>阿黛尔中气十足的声线，不颓，不吵</p>
<h5 id="动作元素"><a href="#动作元素" class="headerlink" title="动作元素"></a>动作元素</h5><figure class="highlight jsp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></div><div class="line">    pageEncoding=<span class="string">"UTF-8"</span> <span class="keyword">import</span>=<span class="string">"java.util.*"</span>%&gt;</div><div class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span>&gt;</div><div class="line">&lt;title&gt;JSP动作元素&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">&lt;%request.setCharacterEncoding(<span class="string">"utf-8"</span>);</div><div class="line">response.setCharacterEncoding(<span class="string">"utf-8"</span>);</div><div class="line">%&gt;</div><div class="line">&lt;jsp:forward page=<span class="string">"target.jsp?name=zhangsan&amp;password=admin123&amp;tips=妈的法克儿"</span>&gt; </div><div class="line">    &lt;jsp:param name=<span class="string">"age"</span> value=<span class="string">"28"</span>/&gt;</div><div class="line">    &lt;jsp:param name=<span class="string">"phone"</span> value=<span class="string">"344235454231"</span>/&gt;</div><div class="line">    &lt;jsp:param name="phone" value="133322458257"/&gt;&lt;/jsp:forward&gt;</div><div class="line"></div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div><div class="line"></div><div class="line"><span class="number">1</span>.jsp:forword -- 实现request的转发，可以指定jsp文件，html文件或Servlet。</div><div class="line"><span class="number">2</span>.jsp:param --指定参数以及其对应的值，其他页面（跳转后的）可以使用request来读取这些参数的值。</div></pre></td></tr></table></figure>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></div><div class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</div><div class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span>&gt;</div><div class="line">&lt;title&gt;target&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">&lt;%</div><div class="line">request.setCharacterEncoding(<span class="string">"utf-8"</span>);</div><div class="line">response.setCharacterEncoding(<span class="string">"utf-8"</span>);</div><div class="line">String name=request.getParameter(<span class="string">"name"</span>);</div><div class="line">String password=request.getParameter(<span class="string">"password"</span>);</div><div class="line">String tips=request.getParameter(<span class="string">"tips"</span>);</div><div class="line">String age=request.getParameter(<span class="string">"age"</span>);</div><div class="line">String phones[]=request.getParameterValues(<span class="string">"phone"</span>);</div><div class="line">%&gt;</div><div class="line">&lt;font size=<span class="number">3</span> color=green&gt;</div><div class="line">用户名：&lt;%=name %&gt;&lt;br&gt;</div><div class="line">密码：&lt;%=password %&gt;&lt;br&gt;</div><div class="line">宣言：&lt;%=tips %&gt;&lt;br&gt;</div><div class="line">年龄：&lt;%=age %&gt;&lt;br&gt;</div><div class="line">&lt;%<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;phones.length;i++)&#123; %&gt;</div><div class="line">电话：&lt;%=phones[i] %&gt;&lt;br&gt;</div><div class="line">&lt;%&#125; %&gt;</div><div class="line">&lt;/font&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div><div class="line"></div><div class="line"><span class="number">1</span>.使用request来接受参数值；</div><div class="line"><span class="number">2</span>.String[]数组可以接受所有同一参数名的不同数值；</div><div class="line"><span class="number">3</span>.对request进行编码设置（utf-<span class="number">8</span>）用以正确传递汉字；</div></pre></td></tr></table></figure>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></div><div class="line">    pageEncoding=<span class="string">"UTF-8"</span> <span class="keyword">import</span>=<span class="string">"java.util.*"</span>%&gt;</div><div class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span>&gt;</div><div class="line">&lt;title&gt;include&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">&lt;font&gt;下面是包含的页面信息：&lt;/font&gt;&lt;br&gt;</div><div class="line">&lt;jsp:include page=<span class="string">"innerPage.jsp"</span>&gt;</div><div class="line">&lt;jsp:param name=<span class="string">"age"</span> value=<span class="string">"19"</span>/&gt;</div><div class="line">&lt;jsp:param name=<span class="string">"phone"</span> value=<span class="string">"34252452452"</span>/&gt;</div><div class="line">&lt;jsp:param name=<span class="string">"phone"</span> value=<span class="string">"21423545345"</span>/&gt;</div><div class="line">&lt;/jsp:include&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div><div class="line"><span class="number">1</span>.jsp:include --将page属性指定的页面内容动态包含到当前页面；</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></div><div class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</div><div class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span>&gt;</div><div class="line">&lt;title&gt;2333&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">&lt;%String age=request.getParameter(<span class="string">"age"</span>);</div><div class="line">String phones[]=request.getParameterValues(<span class="string">"phone"</span>);%&gt;</div><div class="line">&lt;font size=<span class="number">3</span> color=red&gt;</div><div class="line">年龄：&lt;%=age %&gt;&lt;br&gt;</div><div class="line">&lt;%<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;phones.length;i++) &#123;%&gt;</div><div class="line">电话：&lt;%=phones[i] %&gt;&lt;br&gt;</div><div class="line">&lt;%&#125; %&gt;</div><div class="line">&lt;/font&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure>
<h4 id="JSP内置对象"><a href="#JSP内置对象" class="headerlink" title="JSP内置对象"></a>JSP内置对象</h4><p>内置对象又隐含对象，在JSP页面初始化是由Web容器为用户自动创建，使用JSP进行页面编程时可以不加声明和创建，直接在java脚本和表达式中使用这些对象。</p>
<p>（我一开始还以为是因为在page属性里引用了 java.util.* 的原因）</p>
<p>JSP内置对象有九个：</p>
<p>request（请求信息），response（响应信息），session（会话），application（用户间数据共享），pageContext（对JSP页面内所有对象及名字空间的访问），out（输出），config（向Servlet传递信息），page（指向当前JSP页面，类似于this），exception（出现错误时，产生此例外对象，用以输出错误信息）</p>
<h5 id="out"><a href="#out" class="headerlink" title="out"></a>out</h5><figure class="highlight jsp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></div><div class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</div><div class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span>&gt;</div><div class="line">&lt;title&gt;JSP内置对象使用&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">&lt;%</div><div class="line">out.println(<span class="string">"&lt;table border=\"1\"&gt;"</span>);</div><div class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">9</span>;i++)</div><div class="line">&#123;</div><div class="line">	out.println(<span class="string">"&lt;tr&gt;"</span>);</div><div class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=i;j++)</div><div class="line">&#123;</div><div class="line">	out.println(<span class="string">"&lt;td&gt;"</span>+i+<span class="string">"*"</span>+j+<span class="string">"="</span>+i*j+<span class="string">"&lt;/td&gt;"</span>);&#125;</div><div class="line">&#125;</div><div class="line">%&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div><div class="line"></div><div class="line"></div><div class="line"><span class="number">1</span>.out打印九九乘法表</div></pre></td></tr></table></figure>
<h5 id="request、response"><a href="#request、response" class="headerlink" title="request、response"></a>request、response</h5><figure class="highlight jsp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line">&lt;!DOCTYPE html&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta charset=<span class="string">"UTF-8"</span>&gt;</div><div class="line">&lt;meta http-equiv=<span class="string">"content-type"</span> content=<span class="string">"text/html;charset=UTF-8"</span>&gt;</div><div class="line">&lt;title&gt;GG&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">&lt;form action=<span class="string">"resparam.jsp"</span> method=<span class="string">"post"</span>&gt;</div><div class="line">&lt;font size=3 color=green&gt;用户名：&lt;/font&gt;	&lt;input type="text" name="name"&gt;</div><div class="line">&lt;input type=<span class="string">"submit"</span> value=<span class="string">"提交"</span>&gt;</div><div class="line">&lt;/form&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></div><div class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</div><div class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span>&gt;</div><div class="line">&lt;title&gt;resparam&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">&lt;%</div><div class="line">request.setCharacterEncoding(<span class="string">"utf-8"</span>);</div><div class="line">response.setCharacterEncoding(<span class="string">"utf-8"</span>);</div><div class="line">String name=request.getParameter(<span class="string">"name"</span>);</div><div class="line">%&gt;</div><div class="line">&lt;font size=3 color=red&gt;欢迎回来，&lt;%=name%&gt;&lt;/font&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div><div class="line"></div><div class="line"></div><div class="line"><span class="number">1</span>.html页面form表单发送信息，jsp中request与response接收参数</div></pre></td></tr></table></figure>
<h5 id="session、application"><a href="#session、application" class="headerlink" title="session、application"></a>session、application</h5><figure class="highlight jsp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div></pre></td><td class="code"><pre><div class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></div><div class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</div><div class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span>&gt;</div><div class="line">&lt;title&gt;JSP内置对象的使用&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">&lt;%       </div><div class="line">request.setCharacterEncoding(<span class="string">"utf-8"</span>);</div><div class="line">request.setAttribute(<span class="string">"name"</span>,<span class="string">"lisa"</span>);</div><div class="line">session.setAttribute(<span class="string">"name"</span>,<span class="string">"程嘉"</span>);</div><div class="line">application.setAttribute(<span class="string">"name"</span>,<span class="string">"子衿"</span>);</div><div class="line">request.getRequestDispatcher(<span class="string">"requestPage.jsp"</span>).forward(request, response);</div><div class="line">%&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></div><div class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</div><div class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span>&gt;</div><div class="line">&lt;title&gt;JSP内置对象的使用&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">&lt;font size=3 color=green&gt;request中name：&lt;/font&gt;&lt;%=request.getAttribute("name")%&gt;&lt;br&gt;</div><div class="line">&lt;font size=3 color=blue&gt;session中的name：&lt;/font&gt;&lt;%=session.getAttribute("name") %&gt;&lt;br&gt;</div><div class="line">&lt;font size=3 color=pink&gt;application中的name：&lt;/font&gt;&lt;%=application.getAttribute("name") %&gt;&lt;br&gt;</div><div class="line">&lt;br&gt;</div><div class="line">&lt;a href="session1Page.jsp"&gt;链接1&lt;/a&gt;&lt;br&gt;</div><div class="line">&lt;a href="session2Page.jsp"&gt;链接2&lt;/a&gt;&lt;br&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div><div class="line"></div><div class="line"></div><div class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></div><div class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</div><div class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span>&gt;</div><div class="line">&lt;title&gt;sessionPage1&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">&lt;font size=3 color=green&gt;request中name：&lt;/font&gt;&lt;%=request.getAttribute("name")%&gt;&lt;br&gt;</div><div class="line">&lt;font size=3 color=blue&gt;session中的name：&lt;/font&gt;&lt;%=session.getAttribute("name") %&gt;&lt;br&gt;</div><div class="line">&lt;font size=3 color=pink&gt;application中的name：&lt;/font&gt;&lt;%=application.getAttribute("name") %&gt;&lt;br&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div><div class="line"></div><div class="line">(session2Page.jsp 的代码跟session1相同)</div><div class="line"></div><div class="line"><span class="number">1</span>.分别使用request、session、application发送信息，然后接收并显示；</div><div class="line"><span class="number">2</span>.这些对象的作用区间比较在之前作用域对象一节里面讲过了，application &gt; session &gt;request;</div></pre></td></tr></table></figure>
<h4 id="JSP注释"><a href="#JSP注释" class="headerlink" title="JSP注释"></a>JSP注释</h4><figure class="highlight jsp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">html注释：&lt;!--*******--&gt;</div><div class="line">java注释：<span class="comment">//**********</span></div><div class="line">jsp注释：&lt;%--********--%&gt;</div></pre></td></tr></table></figure>
<h4 id="JSP路径问题"><a href="#JSP路径问题" class="headerlink" title="JSP路径问题"></a>JSP路径问题</h4><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></div><div class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</div><div class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span>&gt;</div><div class="line">&lt;title&gt;路径相关函数&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">&lt;font color=green&gt;Web应用的相对路径：&lt;/font&gt;&lt;br&gt;</div><div class="line">getContextPath():&lt;%=request.getContextPath() %&gt;&lt;br&gt;</div><div class="line">&lt;font color=green&gt;request相对于web应用的相对路径：&lt;/font&gt;&lt;br&gt;</div><div class="line">getServletPath():&lt;%=request.getServletPath()%&gt;&lt;br&gt;</div><div class="line">&lt;font color=green&gt;request相对于web服务器的相对路径：&lt;/font&gt;&lt;br&gt;</div><div class="line">getRequestURL():&lt;%=request.getRequestURL()%&gt;&lt;br&gt;</div><div class="line">&lt;font color=green&gt;request绝对路径：&lt;/font&gt;&lt;br&gt;</div><div class="line">getRequestURI():&lt;%=request.getRequestURI()%&gt;&lt;br&gt;</div><div class="line">&lt;font color=green&gt;“/”相对于本地磁盘的绝对路径，即当前应用的物理地址：&lt;/font&gt;&lt;br&gt;</div><div class="line">getRealPath():&lt;%=application.getRealPath(<span class="string">"/"</span>)%&gt;&lt;br&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure>
<p>运行结果：</p>
<p><img src="/Users/zhangxuan/Pictures/截图/屏幕快照 2017-10-06 下午4.23.01.png" alt="屏幕快照 2017-10-06 下午4.23.01"></p>
<h3 id="5-过滤器与监听器"><a href="#5-过滤器与监听器" class="headerlink" title="5.过滤器与监听器"></a>5.过滤器与监听器</h3><h4 id="过滤器"><a href="#过滤器" class="headerlink" title="过滤器"></a>过滤器</h4><h5 id="（1）开发步骤"><a href="#（1）开发步骤" class="headerlink" title="（1）开发步骤"></a>（1）开发步骤</h5><p>1.创建一个实现了javax.servlet.Filter接口的类。</p>
<p>2.重写类中的init（FilterConfig filterConfig）方法，该方法内一般编写初始化Filter需要执行的代码。</p>
<p>3.重写类中的doFilter方法，该方法中编写实现过滤操作的代码。</p>
<p>4.重写类中的destroy方法，提供一个空实现，或者编写实现资源释放的代码，来完成关闭过滤器使用的文件或数据连接池等清除任务。</p>
<p>5.针对被访问的目标web组件注册过滤器（在web.xml文件中指定需要过滤的web组件的URL）</p>
<h5 id="（2）应用举例"><a href="#（2）应用举例" class="headerlink" title="（2）应用举例"></a>（2）应用举例</h5><p>使用过滤器设置所有web组件的编码方式。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> listen;</div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> javax.servlet.Filter;</div><div class="line"><span class="keyword">import</span> javax.servlet.FilterChain;</div><div class="line"><span class="keyword">import</span> javax.servlet.FilterConfig;</div><div class="line"><span class="keyword">import</span> javax.servlet.ServletException;</div><div class="line"><span class="keyword">import</span> javax.servlet.ServletRequest;</div><div class="line"><span class="keyword">import</span> javax.servlet.ServletResponse;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EncodeFilter</span> <span class="keyword">implements</span> <span class="title">Filter</span></span>&#123;</div><div class="line">  <span class="comment">//FilterConfig可以获取过滤器在web.xml中设置的参数值	</span></div><div class="line">  <span class="keyword">private</span> FilterConfig config;</div><div class="line">  <span class="comment">//初始化函数参数（init_param_encode并不是什么特别的东西，仅仅是一个字符串的名字）</span></div><div class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String INIT_PARAM_ENCODE=<span class="string">"encode"</span>;</div><div class="line">  <span class="comment">//初始化方法</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(FilterConfig config)</span><span class="keyword">throws</span> ServletException</span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		<span class="keyword">this</span>.config=config;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest request,ServletResponse response,FilterChain chain)</span></span></div><div class="line"><span class="function">	<span class="keyword">throws</span> IOException,ServletException</span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		HttpServletRequest req=(HttpServletRequest)request;</div><div class="line">		HttpServletResponse res=(HttpServletResponse)response;</div><div class="line">      <span class="comment">//encode获取的是编码方式（从web.xml中&lt;init-param&gt;中获取名为“encode”的参数的值）</span></div><div class="line">		String encode=config.getInitParameter(INIT_PARAM_ENCODE);</div><div class="line">		<span class="keyword">if</span>(encode!=<span class="keyword">null</span>&amp;&amp;!encode.isEmpty())</div><div class="line">		&#123;</div><div class="line">          <span class="comment">//设置request的编码方式</span></div><div class="line">			req.setCharacterEncoding(encode);</div><div class="line">		&#125;</div><div class="line">      <span class="comment">//转发请求，（request -&gt; filter1 -&gt; filter2 -&gt;filter3 -&gt; .... -&gt; request resource.）</span></div><div class="line">      <span class="comment">//转发给下一个过滤器（如果有），或者请求的资源（如果没有下一个过滤器）</span></div><div class="line">		chain.doFilter(request, response);</div><div class="line">      </div><div class="line">		<span class="keyword">if</span>(encode!=<span class="keyword">null</span>&amp;&amp;!encode.isEmpty())</div><div class="line">		&#123;</div><div class="line">          <span class="comment">//设置response的编码方式</span></div><div class="line">			res.setCharacterEncoding(encode);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destory</span><span class="params">()</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>web.xml文件配置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>EncodeFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span><span class="comment">&lt;!-- 过滤器名称 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>listen.EncodeFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span><span class="comment">&lt;!-- 过滤器所在路径（packge名+class名） --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">init-param</span>&gt;</span><span class="comment">&lt;!-- 数据存放（类似request里的Parameter），一个param-name对应一个param-value --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encode<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">param-value</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span><span class="comment">&lt;!-- 过滤器过滤对象的设置 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>EncodeFilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span><span class="comment">&lt;!-- 过滤器名称 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span><span class="comment">&lt;!-- 过滤器过滤对象的路径（这里设置的是全部web应用调用此过滤器） --&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></div></pre></td></tr></table></figure>
<p>测试：</p>
<p>（由于上面例子过滤器是将所有web应用编码方式设置为“utf-8”，效果并不直观，于是我将编码方式设置为“ASCII”，然后新建一个html页面尝试输出中文，结果一目了然）</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>中文测试<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span><span class="comment">&lt;!-- html页面本身的charset设置在过滤器老大哥面前还是要往后稍一稍 --&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">align</span>=<span class="string">"center"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">font</span> <span class="attr">size</span>=<span class="string">3</span> <span class="attr">color</span>=<span class="string">green</span> &gt;</span></div><div class="line">此情可待成追忆；<span class="tag">&lt;<span class="name">br</span>&gt;</span></div><div class="line">只是当时已惘然。</div><div class="line"><span class="tag">&lt;/<span class="name">font</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p><img src="/Users/zhangxuan/Pictures/截图/utf-8.png" style="zoom:50%"></p>
<p><img src="/Users/zhangxuan/Pictures/截图/ASCII.png" style="zoom:50%"></p>
<h4 id="监听器"><a href="#监听器" class="headerlink" title="监听器"></a>监听器</h4><h5 id="监听器接口"><a href="#监听器接口" class="headerlink" title="监听器接口"></a>监听器接口</h5><p>1.SercletContext对象监听器接口</p>
<p>1）ServletContextListener：web应用程序启动和结束时</p>
<p>2）ServletContextAttributeListener：ServletContext对象中属性变动时</p>
<p>2.HttpSession对象监听器接口</p>
<p>1）HttpSessionListener</p>
<p>2）HttpSessionAttribute</p>
<p>3）HttpSessionBindingListener</p>
<p>4）HttpSessionActivationListener</p>
<p>3.ServletRequest对象监听器接口</p>
<p>1）ServletRequestListener</p>
<p>2）ServletRequestAttributeListener</p>
<h5 id="实例演示"><a href="#实例演示" class="headerlink" title="实例演示"></a>实例演示</h5><p>使用监听器来统计在线人数</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> listen;</div><div class="line"><span class="keyword">import</span> java.util.HashSet;</div><div class="line"><span class="keyword">import</span> javax.servlet.ServletContext;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpSession;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpSessionEvent;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpSessionListener;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CountOnLineListener</span> <span class="keyword">implements</span> <span class="title">HttpSessionListener</span></span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sessionCreated</span><span class="params">(HttpSessionEvent event)</span></span></div><div class="line"><span class="function">      <span class="comment">//当有新的HttpSession对象创建，执行此方法（HttpSessionListener自带的方法）</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		HttpSession session=event.getSession();</div><div class="line">      <span class="comment">//构建session</span></div><div class="line">		ServletContext application=session.getServletContext();</div><div class="line">      <span class="comment">//获取ServletContext</span></div><div class="line">		HashSet sessions=(HashSet)application.getAttribute(<span class="string">"sessions"</span>);</div><div class="line">      <span class="comment">//在application范围内由一个HashSet集保存所有的session（“sessions”是ServletContext中存放session的参数）</span></div><div class="line">		<span class="keyword">if</span>(sessions==<span class="keyword">null</span>)</div><div class="line">         <span class="comment">//如果HashSet为空则定义为空的Hashset表,（这个初始化方法真滴奇特，或许这就是标准写法吧）</span></div><div class="line">		&#123;</div><div class="line">			sessions=<span class="keyword">new</span> HashSet();</div><div class="line">			application.setAttribute(<span class="string">"sessions"</span>,sessions);</div><div class="line">		&#125;</div><div class="line">		sessions.add(session);<span class="comment">//创建的新的session就添加到HashSet集合中</span></div><div class="line">		application.setAttribute(<span class="string">"sessions"</span>, sessions);</div><div class="line">	&#125;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sessionDestoryed</span><span class="params">(HttpSessionEvent event)</span></span></div><div class="line"><span class="function">          <span class="comment">//当有HttpSession对象被销毁，执行此方法（HttpSessionListener中自带的方法）</span></span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			HttpSession session=event.getSession();</div><div class="line">			ServletContext application=session.getServletContext();</div><div class="line">			HashSet sessions=(HashSet)application.getAttribute(<span class="string">"sessions"</span>);</div><div class="line">			<span class="keyword">if</span>(session!=<span class="keyword">null</span>)<span class="comment">//session不为空则将session从HashSet集合中移除</span></div><div class="line">			&#123;</div><div class="line">				sessions.remove(session);</div><div class="line">			&#125;</div><div class="line">			application.setAttribute(<span class="string">"sessions"</span>, sessions);</div><div class="line">		&#125;</div><div class="line">	&#125;</div></pre></td></tr></table></figure>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></div><div class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</div><div class="line">    &lt;%<span class="meta">@page</span> <span class="keyword">import</span>=<span class="string">"java.util.*,listen.*"</span> %&gt;</div><div class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span>&gt;</div><div class="line">&lt;title&gt;同在线人数&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">&lt;%</div><div class="line">HashSet hs=(HashSet)application.getAttribute(<span class="string">"sessions"</span>);</div><div class="line">  <span class="comment">//创建一个HashSet集合对象来读取application中的“sessions”信息（此application中所有的session信息）；</span></div><div class="line">%&gt;</div><div class="line">&lt;center&gt;&lt;font color=green size=<span class="number">4</span>&gt;系统当前的在线人数为：</div><div class="line">  <span class="comment">//访问人数即为HashSet中的size（）方法传递的参数；</span></div><div class="line">&lt;%=hs.size()%&gt;</div><div class="line">&lt;/font&gt;&lt;/center&gt;</div><div class="line">&lt;br&gt;</div><div class="line">&lt;br&gt;</div><div class="line">&lt;br&gt;</div><div class="line">&lt;center&gt;&lt;font size=4 color=blue&gt;&lt;b&gt;信息系统主页&lt;/b&gt;&lt;/font&gt;&lt;/center&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure>
<p>web.xml配置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">listener</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>listen.CountOnLineListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span><span class="comment">&lt;!-- 给出java类路径就行了 --&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">listener</span>&gt;</span></div></pre></td></tr></table></figure>
<p><img src="/Users/zhangxuan/Pictures/截图/在线人数.png" style="zoom:40%"></p>
<h5 id="监听器实例2"><a href="#监听器实例2" class="headerlink" title="监听器实例2"></a>监听器实例2</h5><p>通过HttpSessionBindingEvent接口实现对session中对象set和remove操作的监听</p>
<p>（此监听器不需要设置web.xml文件即可运行）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> listen;</div><div class="line"></div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpSessionBindingEvent;</div><div class="line"><span class="keyword">import</span> javax.servlet.http.HttpSessionBindingListener;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span>  <span class="keyword">implements</span> <span class="title">HttpSessionBindingListener</span></span>&#123;</div><div class="line">  <span class="comment">//通过HttpSessionBindingListener接口实现；</span></div><div class="line">	<span class="keyword">private</span> String name;</div><div class="line">	<span class="keyword">private</span> String data;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">(String name)</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">      <span class="comment">//将参数name的值赋给本函数中定义的name变量；</span></div><div class="line">		<span class="keyword">this</span>.name=name;</div><div class="line">	&#125;</div><div class="line">  <span class="comment">//session中添加对象时调用（session.setAttribute("user",user)）</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">valueBound</span><span class="params">(HttpSessionBindingEvent arg0)</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		<span class="keyword">this</span>.data=name+<span class="string">"被绑定在HttpSession对象中"</span>;</div><div class="line">	&#125;</div><div class="line">  <span class="comment">//session中移除对象时调用（session.removeAttribute("user")）</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">valueUnbound</span><span class="params">(HttpSessionBindingEvent arg0)</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		<span class="keyword">this</span>.data=name+<span class="string">"被移除出HttpSession对象"</span>;</div><div class="line">	&#125;</div><div class="line">  <span class="comment">//获取data参数值；</span></div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getData</span><span class="params">()</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.data;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></div><div class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</div><div class="line">    &lt;%<span class="meta">@page</span> <span class="keyword">import</span>=<span class="string">"listen.User"</span> %&gt;</div><div class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</div><div class="line">&lt;html&gt;</div><div class="line">&lt;head&gt;</div><div class="line">&lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span>&gt;</div><div class="line">&lt;title&gt;对象绑定监听&lt;/title&gt;</div><div class="line">&lt;/head&gt;</div><div class="line">&lt;body&gt;</div><div class="line">&lt;%</div><div class="line">User user=<span class="keyword">new</span> User(<span class="string">"张三"</span>);<span class="comment">//初始化User方法（继承自listen.User.class）</span></div><div class="line">session.setAttribute(<span class="string">"user"</span>, user);<span class="comment">//设定session对象，下面输出对应信息（data值）</span></div><div class="line">%&gt;</div><div class="line">&lt;center&gt;&lt;font size=3 color=green&gt;&lt;%=user.getData() %&gt;&lt;/font&gt;&lt;/center&gt;</div><div class="line">&lt;br&gt;</div><div class="line">&lt;%</div><div class="line">session.removeAttribute(<span class="string">"user"</span>);<span class="comment">//移除session对象，下面输出对应信息（data值）</span></div><div class="line">%&gt;</div><div class="line">&lt;center&gt;&lt;font size=3 color=red&gt;&lt;%=user.getData()%&gt;&lt;/font&gt;&lt;/center&gt;</div><div class="line">&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure>
<p><img src="/Users/zhangxuan/pictures/截图/user.png" style="zoom:50%"></p>
</p.这里有一个问题，用户名输入为汉字时无法正确读取，有可能是编码问题；>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/08/05/Java Web/" data-id="cjefnd25u0003rt76lonagvvm" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2017/08/10/JAVA WEB（2）/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          java web(2)
        
      </div>
    </a>
  
  
    <a href="/2017/06/05/java SE/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">java se</div>
    </a>
  
</nav>

  
    
    
    
        <section class="youyan" id="comments">
  <div id="uyan_frame"></div>
  <script src="http://v2.uyan.cc/code/uyan.js?uid=2146648"></script>
</section>
    

</article>
</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/01/10/spring/">Spring学习笔记</a>
          </li>
        
          <li>
            <a href="/2018/01/10/Java web项目/">传统java web项目</a>
          </li>
        
          <li>
            <a href="/2017/11/28/Python/">python笔记</a>
          </li>
        
          <li>
            <a href="/2017/11/15/你想当程序员么？/">你想当程序员吗？</a>
          </li>
        
          <li>
            <a href="/2017/11/05/技术帖之贪心算法1/">技术帖之贪心算法</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 老zhang  Q:1583707135<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="https://lao-zhang.github.io" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>