<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>java se | 老zhang Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="javaSE笔记">
<meta property="og:type" content="article">
<meta property="og:title" content="java se">
<meta property="og:url" content="http://yoursite.com/2017/06/05/java SE/index.html">
<meta property="og:site_name" content="老zhang Blog">
<meta property="og:description" content="javaSE笔记">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://yoursite.com/Users/zhangxuan/Pictures/截图/屏幕快照%202017-09-20%20下午4.59.23.png">
<meta property="og:image" content="http://yoursite.com/Users/zhangxuan/Pictures/截图/屏幕快照%202017-09-20%20下午5.12.41.png">
<meta property="og:image" content="http://yoursite.com/Users/zhangxuan/Pictures/截图/屏幕快照%202017-09-20%20下午6.58.49.png">
<meta property="og:image" content="http://yoursite.com/Users/zhangxuan/Pictures/截图/屏幕快照%202017-09-20%20下午7.47.50.png">
<meta property="og:updated_time" content="2018-03-06T12:46:45.999Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="java se">
<meta name="twitter:description" content="javaSE笔记">
<meta name="twitter:image" content="http://yoursite.com/Users/zhangxuan/Pictures/截图/屏幕快照%202017-09-20%20下午4.59.23.png">
  
    <link rel="alternate" href="/atom.xml" title="老zhang Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">老zhang Blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="https://lao-zhang.github.io">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-java SE" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/06/05/java SE/" class="article-date">
  <time datetime="2017-06-04T16:00:00.000Z" itemprop="datePublished">2017-06-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      java se
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="javaSE笔记"><a href="#javaSE笔记" class="headerlink" title="javaSE笔记"></a>javaSE笔记</h1><a id="more"></a>
<p>（写在前面：java学习阶段一也就是前端方面的知识现在告一段落了，当然短短的时间内也只能做到过一遍，日后还是要再深入学习的。根据计划现在进入第二阶段的学习（其实称之为复习更贴切），javaSE的相关知识。虽然之前上过学校开设的java专业课，但是说实话也就掌握了百分之六十吧：-），希望经过第二阶段的学习能掌握百分之九十吧，有句话说得好：javaSE反复学个几遍不丢人，哈哈哈。另外从现在开始换用markdown做笔记，边学边用。）</p>
<p>目前已经完成：</p>
<h4 id="1-使用终端运行java文件；"><a href="#1-使用终端运行java文件；" class="headerlink" title="1.使用终端运行java文件；"></a>1.使用终端运行java文件；</h4><p>javac  xxxx.java</p>
<p>java  Packagename.xxxx</p>
<h4 id="2-java控制语句"><a href="#2-java控制语句" class="headerlink" title="2.java控制语句"></a>2.java控制语句</h4><p>九九乘法表、打印1000以内质数、阶乘函数</p>
<h4 id="3-面对对象编程"><a href="#3-面对对象编程" class="headerlink" title="3.面对对象编程"></a>3.面对对象编程</h4><p>重写与重载、多态、static关键字、内部类、集合与泛型</p>
<p>明天从List及其实现类开始。</p>
<h4 id="4-常用类"><a href="#4-常用类" class="headerlink" title="4.常用类"></a>4.常用类</h4><h5 id="List接口及其实现类（ArrayList类）"><a href="#List接口及其实现类（ArrayList类）" class="headerlink" title="List接口及其实现类（ArrayList类）"></a>List接口及其实现类（ArrayList类）</h5><p>我照着书上的代码打了一遍，其具备的方法非常全面，而且还能很好的解决多种数据混合以及数组动态长度的问题，完全可以代替数组来使用了，在此决定今后能用一维数组的地方全部用ArrayList类代替。</p>
<h5 id="set及其实现类（HashSet类）"><a href="#set及其实现类（HashSet类）" class="headerlink" title="set及其实现类（HashSet类）"></a>set及其实现类（HashSet类）</h5><p>HashSet类按照哈希算法来存取对象，其存储的是无序的非重复数据。（我觉得搞随机性之类的东西可以用这个啊）</p>
<h5 id="map接口及其实现类（HashMap）"><a href="#map接口及其实现类（HashMap）" class="headerlink" title="map接口及其实现类（HashMap）"></a>map接口及其实现类（HashMap）</h5><p>Map用于存储键值对（一开始我也没有明白，后来知道什么叫键值对：例如输入1—3，那么1为键，3为值，通过查找键1可以得到其值3，其原理很像数据结构中的链表），根据键得到值，因此键不允许重复，值可以重复。</p>
<p> HashMap是一个最常用的Map，它根据键的hashCode值存储数据，根据键可以直接获取它的值，具有很快的访问速度。HashMap的键和值都可以为空，HashMap最多只允许一条记录的键为null。HashMap不支持线程的同步，即任一时刻可以有多个线程同时写HashMap，可能会导致数据的不一致。如果需要同步，可以用Collections.synchronizedMap(HashMap map)方法使HashMap具有同步的能力。（我在操作实例时使用的是LinkedHashMap，可以保留输入数据原本的顺序）</p>
<h5 id="泛型"><a href="#泛型" class="headerlink" title="泛型"></a>泛型</h5><p><em>为什么要使用泛型</em>：当存在多种类，它们具备的方法都相同，但是数据类型却不同，这时如果针对每一种数据类型都去单独编写类实在过于繁琐，使用泛型就能够很好的解决这个问题。</p>
<p><em>泛型的案例</em>：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> flags;</div><div class="line"><span class="keyword">import</span> java.util.Date;</div><div class="line"></div><div class="line"><span class="comment">//泛型实例</span></div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">twelve</span> </span>&#123;</div><div class="line">	<span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt;<span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">(T t)</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		System.out.println(t);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		print(<span class="string">"apple"</span>);</div><div class="line">		print(<span class="number">123</span>);</div><div class="line">		print(<span class="number">33.33</span>);</div><div class="line">		print(<span class="keyword">new</span> Date());</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>(上述案例是一个很简单的输出方法，但是也很好体现了泛型“不同数据，相同方法”的内核。ps.其实是我实在想不起来有啥代表性的关于泛型的实例，在这方面我就是个弟弟😆)</p>
<p><em>更新于17/9/13</em></p>
<h5 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h5><p>在编译的过程中难免会出现错误，仅仅依靠编译器本身的错误提示是不够的，异常处理机制可以让我们主动出击，去排查那些可能出现异常的代码段，并且根据异常的种类不同抛出不同的错误提示（需要编写）。</p>
<p>实例：try-catch-finally</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.util.InputMismatchException;</div><div class="line"><span class="keyword">import</span> java.util.Scanner;</div><div class="line"></div><div class="line"><span class="comment">//异常处理：try-catch-finally</span></div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">thirteen</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		Scanner scanner=<span class="keyword">new</span> Scanner(System.in);</div><div class="line">		System.out.println(<span class="string">"输入两个整数完成除法运算："</span>);</div><div class="line">		<span class="keyword">try</span></div><div class="line">		&#123;</div><div class="line">			<span class="keyword">int</span> a=scanner.nextInt();</div><div class="line">			<span class="keyword">int</span> b=scanner.nextInt();</div><div class="line">			System.out.println(<span class="string">"a/b的值是:"</span>+a/b);</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		<span class="keyword">catch</span>(ArithmeticException e)</div><div class="line">		&#123;</div><div class="line">			System.out.println(<span class="string">"程序出现异常，除数b不能为0。"</span>);</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">catch</span>(InputMismatchException e)</div><div class="line">		&#123;</div><div class="line">			System.out.println(<span class="string">"输入数据类型错误，请输入整形数据！"</span>);</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		System.out.println(<span class="string">"程序结束！"</span>);</div><div class="line">		scanner.close();</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>try：用来存放那些可能存在异常的代码段，可以捕捉异常；</p>
<p>catch：处理try抛出的异常，可以根据程序员编写的情况来显示出异常的具体情况；</p>
<p>finally：可以让程序员在数据处理或数据异常处理后做一些清理工作。（可以没有）</p>
<h4 id="5-文件流"><a href="#5-文件流" class="headerlink" title="5.文件流"></a>5.文件流</h4><p>以我以往的见识来看，IO大概就是用来操作文件、读写数据的吧。</p>
<h5 id="创建文件"><a href="#创建文件" class="headerlink" title="创建文件"></a>创建文件</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.io.File;</div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> java.util.Scanner;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">fourteen</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		Scanner scanner=<span class="keyword">new</span> Scanner(System.in);</div><div class="line">		System.out.println(<span class="string">"请输入文件名："</span>);</div><div class="line">		String s=scanner.nextLine();</div><div class="line">		File file=<span class="keyword">new</span> File(s);     <span class="comment">//定义文件类对象（真滴是简单粗暴）</span></div><div class="line">		System.out.println(<span class="string">"文件名："</span>+file.getName()+<span class="string">"\n文件大小为："</span>+file.length()+<span class="string">"\n文件所在路径为："</span>+file.getAbsolutePath());</div><div class="line">		<span class="comment">//关于获取文件信息的一些方法</span></div><div class="line">		<span class="keyword">if</span>(file.isHidden())  <span class="comment">//判断文件的隐藏性</span></div><div class="line">			System.out.println(<span class="string">"该文件是一个隐藏文件"</span>);</div><div class="line">		<span class="keyword">else</span></div><div class="line">			System.out.println(<span class="string">"该文件不是一个隐藏文件"</span>);</div><div class="line">		</div><div class="line">		<span class="keyword">if</span>(!file.exists())    <span class="comment">//判断文件是否存在</span></div><div class="line">		&#123;</div><div class="line">			System.out.println(<span class="string">"该文件不存在，我们现在来创建它"</span>);</div><div class="line">			<span class="keyword">try</span> &#123;</div><div class="line">				file.createNewFile();    </div><div class="line">				System.out.println(<span class="string">"新文件创建成功！"</span>);</div><div class="line">			&#125;</div><div class="line">          <span class="keyword">catch</span>(IOException e)&#123;</div><div class="line">              </div><div class="line">          &#125;</div><div class="line"><span class="comment">/*来看上面创建文件的操作，首先是熟悉的try——catch组合（好吧，还有个finally），其次file.createNewFile()操作的参数（文件路径和文件名）是继承的上面定义file时的参数了，不能在括号里面添加（没错我已经试过错了）*/</span></div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>话说回来，创建文件的操作没有想象中那么复杂（我就是个弟弟）。</p>
<h5 id="文件目录"><a href="#文件目录" class="headerlink" title="文件目录"></a>文件目录</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> java.io.File;</div><div class="line"><span class="keyword">import</span> java.io.FilenameFilter;</div><div class="line"><span class="keyword">import</span> java.util.Scanner;</div><div class="line"></div><div class="line"><span class="comment">//IO流系列</span></div><div class="line"><span class="comment">//目录</span></div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">fifteen</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		Scanner scanner=<span class="keyword">new</span> Scanner(System.in);</div><div class="line">		System.out.println(<span class="string">"请输入想要访问的目录："</span>);</div><div class="line">		String s=scanner.nextLine();</div><div class="line">		File dirFile=<span class="keyword">new</span> File(s);</div><div class="line">		String []allresults=dirFile.list();  </div><div class="line">      <span class="comment">//将访问目录下的文件以字符串数组的形式存放</span></div><div class="line">		<span class="keyword">for</span>(String name : allresults) <span class="comment">//增强型循环，主要用来数组的遍历</span></div><div class="line">                                     <span class="comment">//（原型：for(T t: array_name)）</span></div><div class="line">			System.out.println(name);</div><div class="line">		</div><div class="line">		System.out.println(<span class="string">"请输入要列出的文件扩展名，例如：.java"</span>);</div><div class="line">		s=scanner.nextLine();</div><div class="line">		Filter_Name fileAccept=<span class="keyword">new</span> Filter_Name();</div><div class="line">		fileAccept.setExtendName(s);</div><div class="line">		String result[]=dirFile.list(fileAccept);</div><div class="line">		<span class="keyword">int</span> num=<span class="number">0</span>;</div><div class="line">		<span class="keyword">for</span>(String name : result)</div><div class="line">		&#123;</div><div class="line">			System.out.println(name);</div><div class="line">			num++;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">if</span>(num==<span class="number">0</span>)</div><div class="line">			System.out.println(<span class="string">"哦，当前目录没有符合您输入拓展名的文件"</span>);</div><div class="line">	</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Filter_Name</span> <span class="keyword">implements</span> <span class="title">FilenameFilter</span></span></div><div class="line"><span class="class"></span>&#123;</div><div class="line">	String extendName;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setExtendName</span><span class="params">(String s)</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">	extendName=s;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">accept</span><span class="params">(File dir,String name)</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		<span class="keyword">return</span> name.endsWith(extendName);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="文件删除"><a href="#文件删除" class="headerlink" title="文件删除"></a>文件删除</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> flags;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.io.File;</div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"></div><div class="line"><span class="comment">//IO流系列</span></div><div class="line"><span class="comment">//文件操作（删除、添加）</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">sixteen</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> <span class="keyword">throws</span> IOException</span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		File file=<span class="keyword">new</span> File(<span class="string">"/Users/zhangxuan/Desktop/one.txt"</span>);</div><div class="line">		file.delete();</div><div class="line">		<span class="keyword">if</span>(!file.exists())</div><div class="line">			System.out.println(<span class="string">"文件删除成功！"</span>);</div><div class="line">		File files=<span class="keyword">new</span> File(<span class="string">"/Users/zhangxuan/Desktop/小橡皮.txt"</span>);</div><div class="line">		<span class="keyword">if</span>(!files.exists())</div><div class="line">			files.createNewFile();</div><div class="line">		<span class="keyword">if</span>(files.exists())</div><div class="line">			System.out.println(<span class="string">"文件创建成功！"</span>);</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line"><span class="comment">//删除和添加操作，使用File类自带的方法即可，需要注意的是，创建文件操作需要IO接口来实现，所以创建main方法时不要忘了 “throws IOException”</span></div></pre></td></tr></table></figure>
<h5 id="读取文件内容"><a href="#读取文件内容" class="headerlink" title="读取文件内容"></a>读取文件内容</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> flags;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.io.FileInputStream;</div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> java.util.Scanner;</div><div class="line"></div><div class="line"><span class="comment">//IO流系列</span></div><div class="line"><span class="comment">//读取文件内容到缓冲区</span></div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">eigjteen</span> </span>&#123;     </div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		<span class="keyword">byte</span>[] b=<span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];  <span class="comment">//byte型数组，据说是文件操作必不可少的数据类型； </span></div><div class="line">		<span class="keyword">int</span> n=-<span class="number">1</span>;                <span class="comment">//这里n的初始数值定为多少都无妨</span></div><div class="line">		System.out.println(<span class="string">"请输入要读取的文件名："</span>);</div><div class="line">		Scanner scanner=<span class="keyword">new</span> Scanner(System.in);</div><div class="line">		String str=scanner.nextLine();     <span class="comment">//获得文件名的流程</span></div><div class="line">		</div><div class="line">		<span class="keyword">try</span> &#123;</div><div class="line">			FileInputStream in=<span class="keyword">new</span> FileInputStream(str);</div><div class="line"><span class="comment">//FileInputStream是Java语言中抽象类InputStream用来具体实现类的创建对象。</span></div><div class="line"><span class="comment">//FileInputStream可以从文件系统中的某个文件中获得输入字节，获取的文件可用性取决于主机环境。</span></div><div class="line">			<span class="keyword">while</span>((n=in.read(b,<span class="number">0</span>,<span class="number">1024</span>))!=-<span class="number">1</span>)  </div><div class="line">              <span class="comment">//一句话就是：读文件内容一直到结尾</span></div><div class="line">          <span class="comment">//仔细讲就是：以-1作为文件内容结尾的标志（试过-2，-3也会输出文件内容但是会抛出字符串长度超出的错误，看来这里用-1是铁律了，另外去掉“n=”没法读取文件），然后（b，0，1024）就是从字节数组的0字节读到1024字节；</span></div><div class="line">					&#123;</div><div class="line">				        String s=<span class="keyword">new</span> String(b,<span class="number">0</span>,n); </div><div class="line">              <span class="comment">//将b数组的从b[0]到b[n]的所有元素的内容集合到字符串s内；</span></div><div class="line">				        System.out.println(s);</div><div class="line">				</div><div class="line">					&#125;</div><div class="line">			in.close();</div><div class="line">			</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">catch</span>(IOException e)</div><div class="line">		&#123;</div><div class="line">			System.out.println(<span class="string">"文件读取失败"</span>);</div><div class="line">          </div><div class="line">          <span class="comment">//如果try板块没有正常输出，那么这里将输入文件读取失败的信息</span></div><div class="line">          <span class="comment">//p.我现在整明白了：当try板块内的执行出现错误时，catch板块内的代码将会执行；</span></div><div class="line">		&#125;</div><div class="line">		</div><div class="line">				</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="向文件内写内容"><a href="#向文件内写内容" class="headerlink" title="向文件内写内容"></a>向文件内写内容</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> flags;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.io.File;</div><div class="line"><span class="keyword">import</span> java.io.FileInputStream;</div><div class="line"><span class="keyword">import</span> java.io.FileOutputStream;</div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> java.util.Scanner;</div><div class="line"></div><div class="line"><span class="comment">//IO流系列</span></div><div class="line"><span class="comment">//向磁盘文件写入数据</span></div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">eighteen</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		String content;</div><div class="line">		<span class="keyword">int</span> n=-<span class="number">1</span>;</div><div class="line">		<span class="keyword">byte</span>[] b;     <span class="comment">//写文件用数组</span></div><div class="line">		<span class="keyword">byte</span>[] a=<span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];     	<span class="comment">//读文件用数组</span></div><div class="line">		FileOutputStream out;            <span class="comment">//读取为Input 那么写入就是Output了</span></div><div class="line">		Scanner scanner=<span class="keyword">new</span> Scanner(System.in);</div><div class="line">		System.out.println(<span class="string">"请输入文件名："</span>);</div><div class="line">		String name=scanner.nextLine();</div><div class="line">		File file=<span class="keyword">new</span> File(name);</div><div class="line">		<span class="keyword">if</span>(!file.exists())</div><div class="line">		&#123;</div><div class="line">			System.out.println(<span class="string">"文件不存在，是否创建？（Y／N）"</span>); </div><div class="line">            <span class="comment">//这种交互方式不错，学习了</span></div><div class="line">			String f=scanner.nextLine();</div><div class="line">			<span class="keyword">if</span>(f.equals(<span class="string">"N"</span>))</div><div class="line">			&#123;</div><div class="line">				System.out.println(<span class="string">"选择了不创建，三秒后退出系统"</span>);</div><div class="line">				System.exit(<span class="number">3</span>);</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">else</span></div><div class="line">			&#123;</div><div class="line">				<span class="keyword">try</span></div><div class="line">				&#123;</div><div class="line">					file.createNewFile();</div><div class="line">				&#125;</div><div class="line">				<span class="keyword">catch</span>(IOException e)</div><div class="line">				&#123;</div><div class="line">					System.out.println(<span class="string">"创建失败"</span>);</div><div class="line">					System.exit(<span class="number">0</span>);</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">try</span></div><div class="line">		&#123;</div><div class="line">			content=<span class="string">"Hello"</span>;  <span class="comment">//content是上面定义的一个空字符串</span></div><div class="line">			b=content.getBytes(); <span class="comment">//将字符串内容转化为byte型数组，便于下面写入文件；  </span></div><div class="line">			out=<span class="keyword">new</span> FileOutputStream(file); <span class="comment">//开启一个写入通道；</span></div><div class="line">			out.write(b);</div><div class="line">			out.close();</div><div class="line">			System.out.println(<span class="string">"文件写操作成功！"</span>);</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">catch</span>(IOException e)</div><div class="line">		&#123;</div><div class="line">			e.getMessage();</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		<span class="keyword">try</span></div><div class="line">		&#123;</div><div class="line">			System.out.println(<span class="string">"请输入追加的内容："</span>);</div><div class="line">			content=scanner.nextLine();</div><div class="line">			b=content.getBytes();</div><div class="line">			out=<span class="keyword">new</span> FileOutputStream(file,<span class="keyword">true</span>);  <span class="comment">//加入true变量使得写入方式变为追加，否则就是覆盖方式写入了；</span></div><div class="line">			out.write(b);</div><div class="line">			out.close();</div><div class="line">			System.out.println(<span class="string">"文件追加写操作成功！"</span>);</div><div class="line">			scanner.close();</div><div class="line">			</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">catch</span>(IOException e)</div><div class="line">		&#123;</div><div class="line">			e.getMessage();<span class="comment">//获取错误信息</span></div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		<span class="keyword">try</span> &#123;</div><div class="line">			FileInputStream in=<span class="keyword">new</span> FileInputStream(name);</div><div class="line">          <span class="comment">//我给加了一个文件内容读取；</span></div><div class="line">			System.out.println(<span class="string">"此时文件内容如下："</span>);</div><div class="line">			<span class="keyword">while</span>((n=in.read(a,<span class="number">0</span>,<span class="number">1024</span>))!=-<span class="number">1</span>)</div><div class="line">			&#123;</div><div class="line">				String s=<span class="keyword">new</span> String(a,<span class="number">0</span>,n);</div><div class="line">				System.out.println(s);</div><div class="line">			&#125;</div><div class="line">			in.close();</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">catch</span>(IOException e)</div><div class="line">		&#123;</div><div class="line">			System.out.println(<span class="string">"文件内容读取失败！"</span>);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="复制文件内容到另一文件"><a href="#复制文件内容到另一文件" class="headerlink" title="复制文件内容到另一文件"></a>复制文件内容到另一文件</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> flags;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.io.File;</div><div class="line"><span class="keyword">import</span> java.io.FileInputStream;</div><div class="line"><span class="keyword">import</span> java.io.FileOutputStream;</div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> java.util.Scanner;</div><div class="line"></div><div class="line"><span class="comment">//IO流系列</span></div><div class="line"><span class="comment">//文件流操作</span></div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">nineteen</span> </span>&#123;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span> <span class="keyword">throws</span> IOException</span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			Scanner scanner=<span class="keyword">new</span> Scanner(System.in);</div><div class="line">			System.out.println(<span class="string">"请输入源文件名和目的文件名，中间用回车分隔"</span>);</div><div class="line">			String s=scanner.nextLine();</div><div class="line">			String d=scanner.nextLine();</div><div class="line">			File file1=<span class="keyword">new</span> File(s);</div><div class="line">			File file2=<span class="keyword">new</span> File(d);</div><div class="line">			</div><div class="line">			<span class="keyword">if</span>(!file1.exists())</div><div class="line">			&#123;</div><div class="line">				System.out.println(<span class="string">"被复制的文件不存在"</span>);</div><div class="line">				System.exit(<span class="number">1</span>);</div><div class="line">			&#125;</div><div class="line">			FileInputStream input=<span class="keyword">new</span> FileInputStream(file1);</div><div class="line">          <span class="comment">//f1为源文件，进行读取操作，定义一个读取操作的对象；</span></div><div class="line">			FileOutputStream output=<span class="keyword">new</span> FileOutputStream(file2);</div><div class="line">          <span class="comment">//f2为目标文件，进行写入操作，定义一个写入操作的对象；</span></div><div class="line">			<span class="keyword">if</span>((input!=<span class="keyword">null</span>)&amp;&amp;(output!=<span class="keyword">null</span>))、</div><div class="line">              <span class="comment">//取保俩对象都存在后进行后续操作</span></div><div class="line">			&#123;</div><div class="line">				<span class="keyword">int</span> temp=<span class="number">0</span>;</div><div class="line">				<span class="keyword">while</span>((temp=input.read())!=(-<span class="number">1</span>))  </div><div class="line">                  <span class="comment">//这里读文件直接抛开了byte数组一环，直接全部照搬，可以的可以的；</span></div><div class="line">  <span class="comment">//p.如果要读文件内容到缓冲区是不能像上面那样抛开byte这一环的，否则输出的是十进制的ASCⅡ码</span></div><div class="line">					output.write(temp);</div><div class="line">			&#125;</div><div class="line">			input.close();</div><div class="line">			output.close();</div><div class="line">			System.out.println(<span class="string">"文件复制成功！"</span>);</div><div class="line">		&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><u>今天搞了一会儿html按钮函数，之前觉得简单的东西一旦到了稍微复杂点的实例就出问题，说明掌握还是有问题，晚些时候给它安排上。</u></p>
<h5 id="缓冲流"><a href="#缓冲流" class="headerlink" title="缓冲流"></a>缓冲流</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> flags;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.io.BufferedReader;</div><div class="line"><span class="keyword">import</span> java.io.BufferedWriter;</div><div class="line"><span class="keyword">import</span> java.io.File;</div><div class="line"><span class="keyword">import</span> java.io.FileReader;</div><div class="line"><span class="keyword">import</span> java.io.FileWriter;</div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> java.util.Scanner;</div><div class="line"></div><div class="line"><span class="comment">//IO流系列</span></div><div class="line"><span class="comment">//缓冲流</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">//定义文件 -&gt; 定义输入／输出流 -&gt; 定义缓冲输入／输出流</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">twentyone</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		File file;     <span class="comment">//初始文件变量</span></div><div class="line">		FileReader fin;    <span class="comment">//初始文件输入流</span></div><div class="line">		FileWriter fout;      <span class="comment">//初始文件输出流</span></div><div class="line">		BufferedReader bin;   <span class="comment">//初始缓冲输入流</span></div><div class="line">		BufferedWriter bout;  <span class="comment">//初始缓冲输出流</span></div><div class="line">		Scanner scanner=<span class="keyword">new</span> Scanner(System.in);</div><div class="line">		System.out.println(<span class="string">"请输入文件名："</span>);</div><div class="line">		String filename=scanner.nextLine();</div><div class="line">      <span class="comment">//国际惯例，文件名安排上</span></div><div class="line">		</div><div class="line">		<span class="keyword">try</span> &#123;</div><div class="line">			file=<span class="keyword">new</span> File(filename);     </div><div class="line">			<span class="keyword">if</span>(!file.exists())</div><div class="line">			&#123;</div><div class="line">				file.createNewFile();   <span class="comment">//文件不存在就创建</span></div><div class="line">			fout=<span class="keyword">new</span> FileWriter(file);   <span class="comment">//创建文件输出流</span></div><div class="line">			&#125;</div><div class="line">		<span class="keyword">else</span>     </div><div class="line">			fout=<span class="keyword">new</span> FileWriter(file,<span class="keyword">true</span>);   <span class="comment">//文件存在则创建追加型文件输出流</span></div><div class="line">			fin=<span class="keyword">new</span> FileReader(file);        <span class="comment">//文件读取</span></div><div class="line">			bin=<span class="keyword">new</span> BufferedReader(fin);     <span class="comment">//缓冲读取</span></div><div class="line">			bout=<span class="keyword">new</span> BufferedWriter(fout);    <span class="comment">//缓冲写入</span></div><div class="line">			</div><div class="line">			System.out.println(<span class="string">"请输入数据，最后一行为字符‘0’结束。"</span>);</div><div class="line">			String str=scanner.nextLine();</div><div class="line">			<span class="keyword">while</span>(!str.equals(<span class="string">"0"</span>))    <span class="comment">//写入字符串为0时，结束</span></div><div class="line">			&#123;</div><div class="line">				bout.write(str);        <span class="comment">//写入字符串内容</span></div><div class="line">				bout.newLine();         <span class="comment">//换行</span></div><div class="line">				str=scanner.nextLine();    <span class="comment">//从键盘读入新的字符串</span></div><div class="line">			&#125;</div><div class="line">			bout.flush();        <span class="comment">//刷新缓冲输出（写入）流</span></div><div class="line">			bout.close();       <span class="comment">//关闭缓冲输出（写入）流</span></div><div class="line">			fout.close();      <span class="comment">//关闭文件输出流（写入）流</span></div><div class="line">			System.out.println(<span class="string">"文件写入完毕！"</span>);</div><div class="line">			System.out.println(<span class="string">"文件"</span>+filename+<span class="string">"的内容是："</span>);</div><div class="line">			<span class="keyword">while</span>((str=bin.readLine())!=<span class="keyword">null</span>)   </div><div class="line">               <span class="comment">//从缓冲输入（读取）流中获取文件内容并输出</span></div><div class="line">				System.out.println(str);</div><div class="line">			</div><div class="line">			bin.close();</div><div class="line">			fin.close();   <span class="comment">//关闭文件读取和缓冲读取</span></div><div class="line">		</div><div class="line">	&#125;</div><div class="line">		<span class="keyword">catch</span>(IOException e)</div><div class="line">		&#123;</div><div class="line">			e.printStackTrace();    <span class="comment">//打印错误信息</span></div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="随机流"><a href="#随机流" class="headerlink" title="随机流"></a>随机流</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">package</span> flags;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> java.io.RandomAccessFile;</div><div class="line"></div><div class="line"><span class="comment">//IO流系列</span></div><div class="line"><span class="comment">//随机流</span></div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">twentytwo</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">        <span class="comment">//随机流直接上来给你来个try</span></div><div class="line">		<span class="keyword">try</span></div><div class="line">		&#123;</div><div class="line">			RandomAccessFile file=<span class="keyword">new</span>   RandomAccessFile(<span class="string">"file"</span>,<span class="string">"rw"</span>);</div><div class="line">          </div><div class="line">          <span class="comment">//随机流的创建，一开始我还以为随机流强调的是一个“随机”，后来看书上写随机流可以用单独一个流进行输入和输出</span></div><div class="line">          <span class="comment">//p. “file”处如果填具体的某个文件名，则进行操作之后文件将会无法正常打开，原因是：编码混乱，见下图：</span></div><div class="line">			file.writeInt(<span class="number">10</span>);     </div><div class="line">			file.writeDouble(<span class="number">3.141592653</span>);</div><div class="line">			file.writeUTF(<span class="string">"UTF字符串"</span>);</div><div class="line">			file.writeBoolean(<span class="keyword">true</span>);</div><div class="line">			file.writeShort(<span class="number">100</span>);</div><div class="line">			file.writeLong(<span class="number">12345678</span>);</div><div class="line">			file.writeUTF(<span class="string">"有一个UTF字符串"</span>);</div><div class="line">			file.writeFloat(<span class="number">3.14f</span>);</div><div class="line">			file.writeChar(<span class="string">'a'</span>);</div><div class="line">			file.seek(<span class="number">0</span>);          <span class="comment">//把文件指针位置设置到文件起始处</span></div><div class="line">			System.out.println(<span class="string">"——从file文件起始位置开始读数据——"</span>);</div><div class="line">			System.out.println(file.readInt());</div><div class="line">			System.out.println(file.readDouble());</div><div class="line">			System.out.println(file.readUTF());</div><div class="line">			</div><div class="line">			file.skipBytes(<span class="number">3</span>); <span class="comment">//跳过3个字节，即跳过boolean值和short值</span></div><div class="line">			System.out.println(file.readLong());</div><div class="line">			file.skipBytes(file.readShort()); <span class="comment">//继续跳过剩下的几个字节</span></div><div class="line">			file.close();</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">catch</span>(IOException e)</div><div class="line">		&#123;</div><div class="line">			System.out.println(<span class="string">"文件读写错误！"</span>);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="对象流"><a href="#对象流" class="headerlink" title="对象流"></a>对象流</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> flags;</div><div class="line"></div><div class="line"><span class="keyword">import</span> java.io.File;</div><div class="line"><span class="keyword">import</span> java.io.FileInputStream;</div><div class="line"><span class="keyword">import</span> java.io.FileOutputStream;</div><div class="line"><span class="keyword">import</span> java.io.IOException;</div><div class="line"><span class="keyword">import</span> java.io.ObjectInputStream;</div><div class="line"><span class="keyword">import</span> java.io.ObjectOutputStream;</div><div class="line"><span class="keyword">import</span> java.io.Serializable;</div><div class="line"><span class="keyword">import</span> java.util.Scanner;</div><div class="line"></div><div class="line"><span class="comment">//IO流系列</span></div><div class="line"><span class="comment">//对象流</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">twentythree</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		<span class="keyword">try</span> &#123;</div><div class="line">			File file;</div><div class="line">			FileInputStream fin;   <span class="comment">//文件读取（输入）流</span></div><div class="line">			FileOutputStream fout;  <span class="comment">//文件写入（输出）流</span></div><div class="line">			ObjectInputStream oin;   <span class="comment">//对象读取流</span></div><div class="line">			ObjectOutputStream oout;   <span class="comment">//对象写入流</span></div><div class="line">			Scanner scanner=<span class="keyword">new</span> Scanner(System.in);</div><div class="line">			</div><div class="line">			System.out.println(<span class="string">"请输入文件名："</span>);</div><div class="line">			String filename=scanner.nextLine();</div><div class="line">			file=<span class="keyword">new</span> File(filename);</div><div class="line">			<span class="keyword">if</span>(!file.exists())</div><div class="line">				file.createNewFile();</div><div class="line">			fout=<span class="keyword">new</span> FileOutputStream(file);</div><div class="line">			oout=<span class="keyword">new</span> ObjectOutputStream(fout);</div><div class="line">          <span class="comment">//文件 ——&gt; 文件输出流 -&gt; 对象输出流</span></div><div class="line">          <span class="comment">//p. 这里文件名使用一个原先能自由打开的txt文件，进行对象流操作之后也无法正常打开</span></div><div class="line">			</div><div class="line">			Person person=<span class="keyword">new</span> Person(<span class="string">"张三"</span>,<span class="number">20</span>);</div><div class="line">          <span class="comment">//初始化Person对象</span></div><div class="line">			oout.writeObject(person);    <span class="comment">//将对象信息写入文件</span></div><div class="line">			oout.close();</div><div class="line">			fout.close();    <span class="comment">//关闭相关端口（注意顺序）</span></div><div class="line">			System.out.println(<span class="string">"对象写入完毕！"</span>);</div><div class="line">			System.out.println(<span class="string">"文件"</span>+filename+<span class="string">"的内容："</span>);</div><div class="line">			</div><div class="line">			Person object;</div><div class="line">			fin=<span class="keyword">new</span> FileInputStream(file); </div><div class="line">			oin=<span class="keyword">new</span> ObjectInputStream(fin);</div><div class="line">          <span class="comment">//文件 -&gt; 文件输入流 -&gt; 对象输入流</span></div><div class="line">			<span class="keyword">try</span> &#123;</div><div class="line">				object=(Person)oin.readObject();</div><div class="line">              <span class="comment">//将文件中信息存入一新对象中以待输出</span></div><div class="line">				System.out.println(<span class="string">"读取的对象信息："</span>);</div><div class="line">				System.out.println(<span class="string">"用户名："</span>+object.getName());</div><div class="line">				System.out.println(<span class="string">"年龄："</span>+object.getAge());</div><div class="line">              <span class="comment">//输出信息</span></div><div class="line">				</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">catch</span>(ClassNotFoundException e)</div><div class="line">			&#123;</div><div class="line">				System.out.println(<span class="string">"读取对象失败！"</span>);</div><div class="line">			&#125;</div><div class="line">			oin.close();</div><div class="line">			fin.close();</div><div class="line">			</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">catch</span>(IOException e)</div><div class="line">		&#123;</div><div class="line">			e.printStackTrace();</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">&#125;</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> <span class="keyword">implements</span> <span class="title">Serializable</span> //定义对象方法的时候进行序列化（为文件操作做铺垫）</span></div><div class="line"><span class="class">  </span></div><div class="line"><span class="class">  </span></div><div class="line"><span class="class">  </span></div><div class="line">  //java序列化: 以特定的方式对类实例的瞬时状态进行编码保存的一种操作.(可能不是很精确,咱不是搞学术的,看懂即可).从此定义可以看出,序列化作用的对象是类的实例.对实例进行序列化,就是保存实例当前在内存中的状态.包括实例的每一个属性的值和引用等.</div><div class="line">  </div><div class="line">&#123;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID=<span class="number">1234567890L</span>; </div><div class="line">	<span class="comment">//UID相当于序列化的一种标示</span></div><div class="line">	<span class="comment">//序列化的作用是能转化成Byte流，然后又能反序列化成原始的类。能在网络进行传输，也可以保存在磁盘中，有了SUID之后，那么如果序列化的类已经保存了在本地中，中途你更改了类后，SUID变了，那么反序列化的时候就不会变成原始的类了，还会抛异常，主要就是用于版本控制。</span></div><div class="line">	String name;</div><div class="line">	<span class="keyword">int</span> age;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String name, <span class="keyword">int</span> age)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.name = name;</div><div class="line">		<span class="keyword">this</span>.age = age;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> name;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.name = name;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;</div><div class="line">		<span class="keyword">return</span> age;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;</div><div class="line">		<span class="keyword">this</span>.age = age;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>####6.多线程</p>
<p>因为最近的硬件课程比较多，总是听到老师讲如何如何提高电脑的运行速度、cpu并行技术什么的，这让我很自然的联想到了java里的多线程技术。之前多线程我也只是从实验书上抄了一个GUI的多线程程序，好像是三个框框同时而独立得蹦随机数，但是让我写，我是万万写不出来的。</p>
<p>所以，今儿就开始搞多线程。</p>
<h5 id="扩展Thread类"><a href="#扩展Thread类" class="headerlink" title="扩展Thread类"></a>扩展Thread类</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> 多线程;</div><div class="line"></div><div class="line"><span class="comment">//拓展Thread类</span></div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">one</span> </span>&#123;</div><div class="line">	<span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">ExtThread</span> <span class="keyword">extends</span> <span class="title">Thread</span></span></div><div class="line"><span class="class">      //继承<span class="title">Thread</span>类</span></div><div class="line"><span class="class">	</span>&#123;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="title">ExtThread</span><span class="params">(String name)</span></span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			<span class="keyword">super</span>(name);</div><div class="line">          <span class="comment">//参数为线程名字的构造方法，方法继承自父类Thread</span></div><div class="line">		&#125;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span></div><div class="line"><span class="function">         <span class="comment">//Thread中的主要方法，这里是根据例子进行了重写</span></span></div><div class="line"><span class="function">      <span class="comment">//run()是线程体，其内部的内容定义了线程的实际操作</span></span></div><div class="line"><span class="function">     <span class="comment">//此例线程操作是输出线程名和从0到4的累加</span></span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=<span class="number">4</span>;i++)</div><div class="line">			&#123;</div><div class="line">					System.out.println(<span class="keyword">this</span>.getName()+<span class="string">" :"</span>+i);</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		Thread t1=<span class="keyword">new</span> ExtThread(<span class="string">"A"</span>);</div><div class="line">		Thread t2=<span class="keyword">new</span> ExtThread(<span class="string">"B"</span>);</div><div class="line">      <span class="comment">//定义线程</span></div><div class="line">		t1.start();</div><div class="line">		t2.start();</div><div class="line">      <span class="comment">//启动线程</span></div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这里发现一个现象：每次启动线程A和B输出的顺序都会有变化，难道说线程对内存的调用时随机的？关于这一点书上是这么说的：“相同优先级的多个线程，它们的执行顺序不是按照先来先服务原则的（线程启动的先后，也就是start（）方法），即不是先启动先执行，而是随机地执行序列。”</p>
<p>这里补充一个关于设置线程优先度的方法。</p>
<p>以线程“t4”为例：t4.setPriority(<strong>Thread</strong>.<strong>MAX_PRIORITY</strong>);</p>
<p>括号里的是int类型，上面例子是设定为最高优先级，你也可以给不同的线程设置不同的int值，值越大优先级越高。</p>
<p>当然，这样并没有什么卵用，去网上查阅了一下资料，发现老哥们是这么说的：</p>
<p><em>多线程的执行本身就是多个线程的交换执行，并非同时执行，执行的优先级只是他执行的概率。例如原本优先级一样，那么两个线程的执行的概率都为50%。现在我们提高其中一个，那么一个为60%的概率抢到进入CPU执行的机会，另一个是依旧是40%。执行完一次之后又要重新抢占CPU。但是40%概率进入的线程也有可能抢到，虽然概率低了点，但总会有他执行的机会，万一次次都抽中40%的概率呢？所以你要正确理解线程和线程之间的优先级</em></p>
<p>结合上面我发现的线程随机运行的现象，我好像明白了什么。</p>
<h5 id="实现接口Runnable"><a href="#实现接口Runnable" class="headerlink" title="实现接口Runnable"></a>实现接口Runnable</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> 多线程;</div><div class="line"></div><div class="line"><span class="comment">//实现接口Runnable</span></div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">two</span> </span>&#123;</div><div class="line">	<span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">ImpRunnable</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span></div><div class="line"><span class="class">      //使用<span class="title">Runnable</span>接口来构建类</span></div><div class="line"><span class="class">	</span>&#123;</div><div class="line">		<span class="keyword">private</span> String name;</div><div class="line"></div><div class="line">		<span class="function"><span class="keyword">private</span> <span class="title">ImpRunnable</span><span class="params">(String name)</span> </span>&#123;</div><div class="line">			<span class="keyword">super</span>();</div><div class="line">			<span class="keyword">this</span>.name = name;</div><div class="line">		&#125;</div><div class="line">      <span class="comment">//构造方法</span></div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">5</span>;i++)</div><div class="line">			&#123;</div><div class="line">				System.out.println(name+<span class="string">" :"</span>+i);</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">      <span class="comment">//线程的操作内容</span></div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		ImpRunnable ds1=<span class="keyword">new</span> ImpRunnable(<span class="string">"A"</span>);</div><div class="line">		ImpRunnable ds2=<span class="keyword">new</span> ImpRunnable(<span class="string">"B"</span>);</div><div class="line">		</div><div class="line">		Thread t1=<span class="keyword">new</span> Thread(ds1);</div><div class="line">		Thread t2=<span class="keyword">new</span> Thread(ds2);</div><div class="line">      <span class="comment">//线程名 -&gt; Runnable接口实现类（ImpRunnable） -&gt;Thread类实例</span></div><div class="line">		t1.start();</div><div class="line">		t2.start();</div><div class="line">      <span class="comment">//线程开始</span></div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>使用Runnable接口来实现多线程，实际上最后还是绕回Thread类上，但是好处是使得线程的构造过程变得明了（三步走），便于理解（嚯嚯嚯）。</p>
<h5 id="线程操作的基本方法"><a href="#线程操作的基本方法" class="headerlink" title="线程操作的基本方法"></a>线程操作的基本方法</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> 多线程;</div><div class="line"></div><div class="line"><span class="comment">//线程基本操作实例</span></div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">three</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		MyThread thread=<span class="keyword">new</span> MyThread();</div><div class="line">      <span class="comment">//MyThread是继承自Thread的子类</span></div><div class="line">		thread.setName(<span class="string">"测试线程"</span>);</div><div class="line">      <span class="comment">//调用父类Thread的setName方法定义线程名</span></div><div class="line">		thread.start();</div><div class="line">      <span class="comment">//调用父类Thread的start方法开启线程</span></div><div class="line">		</div><div class="line">	<span class="comment">//try内部是线程实施的内容	</span></div><div class="line">      <span class="keyword">try</span> &#123;</div><div class="line">			System.out.println(Thread.currentThread().getName()+<span class="string">"进入睡眠"</span>);</div><div class="line">			Thread.currentThread().sleep(<span class="number">2000</span>);</div><div class="line">			System.out.println(Thread.currentThread().getName()+<span class="string">"睡眠完毕"</span>);a</div><div class="line">		&#125;</div><div class="line">		<span class="keyword">catch</span>(InterruptedException e)</div><div class="line">		&#123;</div><div class="line">			e.printStackTrace();</div><div class="line">		&#125;</div><div class="line">		thread.interrupt();</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MyThread</span> <span class="keyword">extends</span> <span class="title">Thread</span></span></div><div class="line"><span class="class">	</span>&#123;</div><div class="line">      </div><div class="line">      <span class="comment">//线程字类MyThread内部也定义了线程的操作</span></div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			<span class="keyword">try</span></div><div class="line">			&#123;</div><div class="line">				System.out.println(Thread.currentThread().getName()+<span class="string">"进入睡眠"</span>);</div><div class="line">				Thread.currentThread().sleep(<span class="number">10000</span>);</div><div class="line">				System.out.println(Thread.currentThread().getName()+<span class="string">"睡眠完毕"</span>);</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">catch</span>	(InterruptedException e)</div><div class="line">			&#123;</div><div class="line">				System.out.println(<span class="string">"中断异常！"</span>);</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">finally</span></div><div class="line">			&#123;</div><div class="line">				System.out.println(<span class="string">"run方法执行完毕"</span>);</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line"><span class="comment">/*总结得讲使用了下列方法：</span></div><div class="line"><span class="comment">setName()方法：设定线程名；</span></div><div class="line"><span class="comment">getName()方法：获取线程名；</span></div><div class="line"><span class="comment">currentThread()方法：返回当下正在执行的线程；</span></div><div class="line"><span class="comment">interrupt()：中断线程；</span></div><div class="line"><span class="comment">*/</span></div></pre></td></tr></table></figure>
<p>执行结果：<img src="/Users/zhangxuan/Pictures/截图/屏幕快照 2017-09-20 下午4.59.23.png" alt="屏幕快照 2017-09-20 下午4.59.23"></p>
<p>这样看有点给我搞混了，不太清楚线程执行的先后顺序（睡眠两秒和睡眠十秒），于是我加上标示后重新运行了一次：</p>
<p><img src="/Users/zhangxuan/Pictures/截图/屏幕快照 2017-09-20 下午5.12.41.png" alt="屏幕快照 2017-09-20 下午5.12.41"></p>
<p>这样以来操作的先后顺序就变得明了了。上面的程序简单来讲就是，先调用MyThread类内部的run方法（线程操作），然后内部嵌套了main方法内定义的线程操作，两秒睡眠结束后，使用一个线程中断指令中断了十秒睡眠的操作，进而触发了其catch方法。</p>
<h5 id="线程让步"><a href="#线程让步" class="headerlink" title="线程让步"></a>线程让步</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> 多线程;</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">//线程让步</span></div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">four</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		Thread t1=<span class="keyword">new</span> MyThread1();</div><div class="line">      <span class="comment">//继承Thread类的线程构建方法</span></div><div class="line">		Thread t2=<span class="keyword">new</span> Thread(<span class="keyword">new</span> MyRunnable1());</div><div class="line">      <span class="comment">//实现Runnable接口的线程构建方法</span></div><div class="line">		t2.start();</div><div class="line">		t1.start();</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MyThread1</span> <span class="keyword">extends</span> <span class="title">Thread</span></span></div><div class="line"><span class="class">	</span>&#123;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">10</span>;i++)</div><div class="line">				System.out.println(<span class="string">"线程1第"</span>+i+<span class="string">"次执行！"</span>);</div><div class="line"></div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">MyRunnable1</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span></div><div class="line"><span class="class">	</span>&#123;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">10</span>;i++)</div><div class="line">			&#123;</div><div class="line">			System.out.println(<span class="string">"线程2第"</span>+i+<span class="string">"次执行！"</span>);</div><div class="line">			Thread.yield();</div><div class="line">            <span class="comment">//线程让步</span></div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>上面程序给二线程加了一个让步语句，也就是说当线程二执行一次后，马上中止并让步给线程一（挺残忍的，不是嘛），如果我们给线程一加上一个让步语句那么将会呈现出线程1和线程2交替运行的一个局面：</p>
<p><img src="/Users/zhangxuan/Pictures/截图/屏幕快照 2017-09-20 下午6.58.49.png" alt="屏幕快照 2017-09-20 下午6.58.49"></p>
<h5 id="线程联合"><a href="#线程联合" class="headerlink" title="线程联合"></a>线程联合</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">package</span> 多线程;</div><div class="line"></div><div class="line"><span class="comment">//线程联合</span></div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">five</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		Thread sub=<span class="keyword">new</span> SubThread();</div><div class="line">		sub.setName(<span class="string">"子线程"</span>);</div><div class="line">		System.out.println(<span class="string">"主线程main开始执行："</span>);</div><div class="line">		sub.start();</div><div class="line">		System.out.println(<span class="string">"主线程main等带线程sub执行....."</span>);</div><div class="line">		<span class="keyword">try</span></div><div class="line">		&#123;</div><div class="line">			sub.join();</div><div class="line">          <span class="comment">//使用join方法让sub插入正在运行的主线程之中；</span></div><div class="line">		&#125;</div><div class="line">		<span class="keyword">catch</span>(InterruptedException e)</div><div class="line">		&#123;&#125;</div><div class="line">		System.out.println(<span class="string">"主线程main结束执行"</span>);</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">SubThread</span> <span class="keyword">extends</span> <span class="title">Thread</span></span></div><div class="line"><span class="class">      //继承于<span class="title">Thread</span>的线程类</span></div><div class="line"><span class="class">	</span>&#123;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span></div><div class="line"><span class="function">          <span class="comment">//线程sub的执行内容</span></span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			System.out.println(<span class="keyword">this</span>.getName()+<span class="string">"开始执行: "</span>);</div><div class="line">			System.out.println(<span class="keyword">this</span>.getName()+<span class="string">"正在执行... ..."</span>);</div><div class="line">			<span class="keyword">try</span> &#123;</div><div class="line">				sleep(<span class="number">3000</span>);</div><div class="line">              <span class="comment">//使得sub延迟三秒，增强演示效果</span></div><div class="line">				</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">catch</span>(InterruptedException e)</div><div class="line">			&#123;</div><div class="line">				System.out.println(<span class="string">"interrupted!(中断)"</span>);</div><div class="line">			&#125;</div><div class="line">			System.out.println(<span class="keyword">this</span>.getName()+<span class="string">"结束执行。"</span>);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>所谓线程的联合是指让一个线程（B）接到另一个正在运行的线程（A）后面，在A运行完之后，B才开始运行，这就实现了线程的有序性。</p>
<p>实际上上面给的让自线程联合main线程并不具备说服性，因为无论如何，主线程一定会让位给子线程的（不然主线程结束了，子线程就没法玩了）。</p>
<p>我后来写了一个让一号子线程跟二号子线程联合的例子，就能很好的体现有序性。</p>
<p>运行结果：<img src="/Users/zhangxuan/Pictures/截图/屏幕快照 2017-09-20 下午7.47.50.png" alt="屏幕快照 2017-09-20 下午7.47.50"></p>
<p>p.线程的系统默认命名是从0开始的（Thread-0、Thread-1 … …）。</p>
<h5 id="守护线程"><a href="#守护线程" class="headerlink" title="守护线程"></a>守护线程</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> 多线程;</div><div class="line"></div><div class="line"><span class="keyword">import</span> 多线程.six.DamonThread;</div><div class="line"></div><div class="line"><span class="comment">//守护线程</span></div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">seven</span> </span>&#123;</div><div class="line">	<span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">DamonThread</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span></div><div class="line"><span class="class">      //通过实现<span class="title">Runnable</span>接口来定义守护线程</span></div><div class="line"><span class="class">	</span>&#123;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			<span class="keyword">while</span>(<span class="keyword">true</span>)</div><div class="line">              <span class="comment">//从逻辑条件来讲守护线程可以无限运行，但是由于守护线程的特性，当一般线程全部运行完毕之后守护线程也会停止，一次体现出守护线程的特性；</span></div><div class="line">			&#123;</div><div class="line">			</div><div class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">3</span>;i++)</div><div class="line">			&#123;</div><div class="line">				System.out.println(Thread.currentThread().getName()+i);</div><div class="line">       <span class="comment">//输出语句可以一次性输出两个线程的情况（普通线程及其守护线程）</span></div><div class="line">				<span class="keyword">try</span> &#123;</div><div class="line">					Thread.sleep(<span class="number">1000</span>);&#125;</div><div class="line">				<span class="keyword">catch</span>(InterruptedException e)</div><div class="line">				&#123;</div><div class="line">					e.printStackTrace();&#125;</div><div class="line">			&#125;</div><div class="line">			</div><div class="line">				<span class="keyword">if</span>(Thread.currentThread().getName().equals(<span class="string">"非守护线程"</span>))</div><div class="line">					<span class="keyword">break</span>;</div><div class="line">				&#125;</div><div class="line">		&#125;</div><div class="line">	</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		Thread daemonThread=<span class="keyword">new</span> Thread(<span class="keyword">new</span> DamonThread());</div><div class="line">		daemonThread.setName(<span class="string">"守护线程"</span>);</div><div class="line">      <span class="comment">//守护线程定义。</span></div><div class="line">      <span class="comment">//p.之前我自己写线程代码的时候吧setName这一步给忘了，导致线程名是系统默认的Thread-x;</span></div><div class="line">		</div><div class="line">		daemonThread.setDaemon(<span class="keyword">true</span>);</div><div class="line">      <span class="comment">//是此线程变为后台进程（保持守护线程的特性）</span></div><div class="line">		daemonThread.start();</div><div class="line">		Thread t=<span class="keyword">new</span> Thread(<span class="keyword">new</span> DamonThread());</div><div class="line">		t.setName(<span class="string">"非守护线程"</span>);</div><div class="line">		t.start();</div><div class="line">	&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="线程同步"><a href="#线程同步" class="headerlink" title="线程同步"></a>线程同步</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> 多线程;</div><div class="line"></div><div class="line"><span class="comment">//线程同步（非同步实例）</span></div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">eight</span> </span>&#123;</div><div class="line">	<span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Bank</span></span></div><div class="line"><span class="class">	</span>&#123;</div><div class="line">		<span class="keyword">private</span> <span class="keyword">int</span> x=<span class="number">100</span>;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getX</span><span class="params">()</span></span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			<span class="keyword">return</span> x;</div><div class="line">		&#125;</div><div class="line">      <span class="comment">//x元素的获取方法</span></div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">fix</span><span class="params">(<span class="keyword">int</span> y)</span></span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			x=x-y;</div><div class="line">			<span class="keyword">return</span> x;</div><div class="line">		&#125;</div><div class="line">      <span class="comment">//输入参数y，返回x减去y的剩余值</span></div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="keyword">static</span> <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">emm</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span></div><div class="line"><span class="class">	</span>&#123;</div><div class="line">		<span class="keyword">private</span> Bank bank=<span class="keyword">new</span> Bank();</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			emm r=<span class="keyword">new</span> emm();</div><div class="line">          <span class="comment">//初始化本实例中的基石线程</span></div><div class="line">			Thread ta=<span class="keyword">new</span> Thread(r,<span class="string">"Thread-A"</span>);</div><div class="line">			Thread tb=<span class="keyword">new</span> Thread(r,<span class="string">"Thread-B"</span>);</div><div class="line">          <span class="comment">//基于基石线程添加两个内容相同的子线程（为了表现出线程非同步的运行状况）</span></div><div class="line">			ta.start();</div><div class="line">			tb.start();</div><div class="line">          <span class="comment">//两子线程开始运作</span></div><div class="line">		&#125;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span></div><div class="line"><span class="function">         <span class="comment">//线程的操作内容：重复调用三次fix函数，参数为y=30。（x连续减去三次30并返回结果）</span></span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)</div><div class="line">			&#123;</div><div class="line">			<span class="keyword">this</span>.fix(<span class="number">30</span>);</div><div class="line">			<span class="keyword">try</span> &#123;</div><div class="line">				Thread.sleep(<span class="number">1000</span>);</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">catch</span>(InterruptedException e)</div><div class="line">			&#123;</div><div class="line">				e.printStackTrace();</div><div class="line">			&#125;</div><div class="line">			System.out.println(Thread.currentThread().getName()+<span class="string">":当前bank对象的x值="</span>+bank.getX());</div><div class="line">             <span class="comment">//输出运作中的线程名和线程的运作结果</span></div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">			<span class="comment">//将bank类中的fix方法应用到此类中，便于线程的调用；</span></div><div class="line">			<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">fix</span><span class="params">(<span class="keyword">int</span> y)</span></span></div><div class="line"><span class="function">			</span>&#123;</div><div class="line">				<span class="keyword">return</span> bank.fix(y);</div><div class="line">			&#125;</div><div class="line">		</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>上面程序的运行结果为：40、40、-20、-20、-80、-80</p>
<p>显然出现了线程的交叉与混乱</p>
<p>如果要实现正常的结果（70、40、10、-20、-50、-80）则需要对A、B两线程进行同步。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> 多线程;</div><div class="line"></div><div class="line"><span class="comment">//线程同步</span></div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">eightPlus</span></span>&#123;</div><div class="line">	<span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Bank</span></span></div><div class="line"><span class="class">	</span>&#123;</div><div class="line">		<span class="keyword">private</span> <span class="keyword">int</span> x=<span class="number">100</span>;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getX</span><span class="params">()</span></span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			<span class="keyword">return</span> x;</div><div class="line">		&#125;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">fix</span><span class="params">(<span class="keyword">int</span> y)</span></span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">   &lt;&lt;&lt;&lt;&lt;	  <span class="keyword">synchronized</span>(<span class="keyword">this</span>)</div><div class="line">			&#123;</div><div class="line">			x=x-y</div><div class="line">		System.out.println(Thread.currentThread().getName()+<span class="string">":当前bank对象的x值="</span>+getX());</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">return</span> x;    &gt;&gt;&gt;&gt;&gt;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="keyword">static</span> <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">emm</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span></div><div class="line"><span class="class">	</span>&#123;</div><div class="line">		<span class="keyword">private</span> Bank bank=<span class="keyword">new</span> Bank();</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			emm r=<span class="keyword">new</span> emm();</div><div class="line">			Thread ta=<span class="keyword">new</span> Thread(r,<span class="string">"Thread-A"</span>);</div><div class="line">			Thread tb=<span class="keyword">new</span> Thread(r,<span class="string">"Thread-B"</span>);</div><div class="line">			ta.start();</div><div class="line">			tb.start();</div><div class="line">		&#125;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">3</span>;i++)</div><div class="line">			&#123;</div><div class="line">			<span class="keyword">this</span>.fix(<span class="number">30</span>);</div><div class="line">			<span class="keyword">try</span> &#123;</div><div class="line">				Thread.sleep(<span class="number">1000</span>);</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">catch</span>(InterruptedException e)</div><div class="line">			&#123;</div><div class="line">				e.printStackTrace();</div><div class="line">			&#125;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">			</div><div class="line">			<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">fix</span><span class="params">(<span class="keyword">int</span> y)</span></span></div><div class="line"><span class="function">			</span>&#123;</div><div class="line">				&#123;</div><div class="line">					<span class="keyword">return</span> bank.fix(y);</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">		</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>对线程调用的Bank类中的fix（）方法进行改写（加入synchroized（this）语句并将需要限制的内容放入sy内），然后去掉main方法中的输出语句，完成上述操作后实现了线程的同步。</p>
<h5 id="线程同步二"><a href="#线程同步二" class="headerlink" title="线程同步二"></a>线程同步二</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> 多线程;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">eightPlus2</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		User user=<span class="keyword">new</span> User(<span class="string">"张三"</span>,<span class="number">100</span>);</div><div class="line">      <span class="comment">//初始化User类，用来存储用户名的初始金额；</span></div><div class="line">      <span class="comment">//六线程定义、起飞；</span></div><div class="line">		UserThread t1=<span class="keyword">new</span> UserThread(<span class="string">"线程A"</span>,user,<span class="number">20</span>);</div><div class="line">		UserThread t2=<span class="keyword">new</span> UserThread(<span class="string">"线程B"</span>,user,-<span class="number">60</span>);</div><div class="line">		UserThread t3=<span class="keyword">new</span> UserThread(<span class="string">"线程C"</span>,user,-<span class="number">80</span>);</div><div class="line">		UserThread t4=<span class="keyword">new</span> UserThread(<span class="string">"线程D"</span>,user,-<span class="number">30</span>);</div><div class="line">		UserThread t5=<span class="keyword">new</span> UserThread(<span class="string">"线程E"</span>,user,<span class="number">32</span>);</div><div class="line">		UserThread t6=<span class="keyword">new</span> UserThread(<span class="string">"线程F"</span>,user,<span class="number">21</span>);</div><div class="line">		t1.start();</div><div class="line">		t2.start();</div><div class="line">		t3.start();</div><div class="line">		t4.start();</div><div class="line">		t5.start();</div><div class="line">		t6.start();</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">UserThread</span> <span class="keyword">extends</span> <span class="title">Thread</span></span></div><div class="line"><span class="class">	</span>&#123;</div><div class="line">		<span class="keyword">private</span> User user;</div><div class="line">		<span class="keyword">private</span> <span class="keyword">int</span> y=<span class="number">0</span>;</div><div class="line">		UserThread(String name,User user,<span class="keyword">int</span> y)</div><div class="line">		&#123;</div><div class="line">			<span class="keyword">super</span>(name);</div><div class="line">			<span class="keyword">this</span>.user=user;</div><div class="line">			<span class="keyword">this</span>.y=y;</div><div class="line">		&#125;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			user.operate(y);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span></span></div><div class="line"><span class="class">      //<span class="title">User</span>类的定义；</span></div><div class="line"><span class="class">      //内含用户名的<span class="title">get</span>和<span class="title">set</span>方法、施加了线程锁（达到同步效果）的更改账户余额的方法；</span></div><div class="line"><span class="class">	</span>&#123;</div><div class="line">		<span class="keyword">private</span> String code;</div><div class="line">		<span class="keyword">private</span> <span class="keyword">int</span> cash;</div><div class="line">		User(String code,<span class="keyword">int</span> cash)</div><div class="line">		&#123;</div><div class="line">			<span class="keyword">this</span>.code=code;</div><div class="line">			<span class="keyword">this</span>.cash=cash;</div><div class="line">		&#125;</div><div class="line">		<span class="function"><span class="keyword">public</span> String <span class="title">getCode</span><span class="params">()</span></span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			<span class="keyword">return</span> code;</div><div class="line">		&#125;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">SetCode</span><span class="params">(String code)</span></span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			<span class="keyword">this</span>.code=code;</div><div class="line">		&#125;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">operate</span><span class="params">(<span class="keyword">int</span> x)</span></span></div><div class="line"><span class="function">          <span class="comment">//更改余额的方法</span></span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			<span class="keyword">try</span> &#123;</div><div class="line">				Thread.sleep(<span class="number">10</span>);</div><div class="line">				<span class="keyword">this</span>.cash+=x;</div><div class="line">				String threadName=Thread.currentThread().getName();</div><div class="line">				System.out.println(threadName+<span class="string">"结束，增加"</span>+x+<span class="string">",账户余额为："</span>+cash);</div><div class="line">				Thread.sleep(<span class="number">10</span>);</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">catch</span>(InterruptedException e)</div><div class="line">			&#123;</div><div class="line">				e.printStackTrace();</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		<span class="meta">@Override</span></div><div class="line">      <span class="comment">//伪代码标示，内容是输出账户信息（账户名、金额），但是为啥写这我也不懂；</span></div><div class="line">		<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span></span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			<span class="keyword">return</span> <span class="string">"User&#123;"</span>+<span class="string">"code='"</span>+code+<span class="string">'\''</span>+<span class="string">",cash="</span>+cash+<span class="string">'&#125;'</span>;</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>上面虽然是个多线程同步的代码，但是通俗地讲，它作为一个多函数传递参数的代码，能够在结构上和参数传递给我以启发。</p>
<p>#####线程的死锁</p>
<p>死锁：两线程相互调用、发生死锁。</p>
<p>死锁四条件：</p>
<p>（1）互斥：线程使用的资源必须至少有一个是不能共享的；</p>
<p>（2）请求与保持：至少有一个线程必须持有另一个资源并且正在等待第一个线程；</p>
<p> （3）：非剥夺：分配资源不能从相应的线程中被强制剥夺；</p>
<p> （4）：循环等待：第一个线程等待其他线程，后者又在等待第一个线程；</p>
<p>上述条件全部出现则会发生线程死锁，反之，只需令上面任意一个条件不成立则可防止死锁。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> 多线程;</div><div class="line"></div><div class="line"><span class="comment">//线程死锁</span></div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">nine</span> </span>&#123;</div><div class="line">	<span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">A</span></span></div><div class="line"><span class="class">	</span>&#123;</div><div class="line">		<span class="function"><span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">first</span><span class="params">(B b)</span></span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			String name=Thread.currentThread().getName();</div><div class="line">			System.out.println(name+<span class="string">" entered A.first() "</span>);</div><div class="line">			<span class="keyword">try</span></div><div class="line">			&#123;</div><div class="line">				Thread.sleep(<span class="number">1000</span>);</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">catch</span>(Exception e)</div><div class="line">			&#123;</div><div class="line">				System.out.println(e.getMessage());</div><div class="line">			&#125;</div><div class="line">			System.out.println(name+<span class="string">" trying to call B.last()"</span>);</div><div class="line">			b.last();</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		<span class="function"><span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">last</span><span class="params">()</span></span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			System.out.println(<span class="string">"inside A.last"</span>);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	<span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">B</span></span></div><div class="line"><span class="class">	</span>&#123;</div><div class="line">		<span class="function"><span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">first</span><span class="params">(A a)</span></span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			String name=Thread.currentThread().getName();</div><div class="line">			System.out.println(name+<span class="string">" entered B.first()"</span>);</div><div class="line">			<span class="keyword">try</span></div><div class="line">			&#123;</div><div class="line">				Thread.sleep(<span class="number">1000</span>);</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">catch</span>(Exception e)</div><div class="line">			&#123;</div><div class="line">				System.out.println(e.getMessage());</div><div class="line">			&#125;</div><div class="line">			System.out.println(name+<span class="string">" trying to call A.last()"</span>);</div><div class="line">			a.last();</div><div class="line">		&#125;</div><div class="line">		</div><div class="line">		<span class="function"><span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">last</span><span class="params">()</span></span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			System.out.println(<span class="string">"inside B.last"</span>);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">ling9</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span></div><div class="line"><span class="class">	</span>&#123;</div><div class="line">		A a=<span class="keyword">new</span> A();</div><div class="line">		B b=<span class="keyword">new</span> B();</div><div class="line">		ling9()</div><div class="line">		&#123;</div><div class="line">			Thread.currentThread().setName(<span class="string">"main_thread"</span>);</div><div class="line">			<span class="keyword">new</span> Thread(<span class="keyword">this</span>).start();</div><div class="line">			a.first(b);</div><div class="line">			System.out.println(<span class="string">"back in main_thread"</span>);</div><div class="line">		&#125;</div><div class="line">      <span class="comment">//ling9的构建方法里里创建main_thread线程使a调用b；</span></div><div class="line">		</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			Thread.currentThread().setName(<span class="string">"user_thread"</span>);</div><div class="line">			b.first(a);</div><div class="line">			System.out.println(<span class="string">"back in user_thread"</span>);</div><div class="line">		&#125;</div><div class="line">      <span class="comment">//run内创建user_thread线程使b调用a</span></div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			<span class="keyword">new</span> ling9();</div><div class="line">		&#125;</div><div class="line">      <span class="comment">//main里调用整个ling9类，使两个线程运行；</span></div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line"><span class="comment">//A于B相互调用，发生死锁；</span></div></pre></td></tr></table></figure>
<p>结果为：</p>
<p>main_thread entered A.first()  </p>
<p>user_thread entered B.first()</p>
<p>user_thread trying to call A.last()</p>
<p>main_thread trying to call B.last()</p>
<p>从结果分析的话就是：main（A调用B）先跑起来调用了本身的 A.first()；接着user（B调用A）跑起来调用了本身的B.first（）；然后user调用了call A.last()；接着main调用了call B.last();至此也就是出现了所谓相互调用的情况，于是发生了死锁，导致两线程后续的操作都无法进行了。</p>
<p>#####线程交互</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> 多线程;</div><div class="line"></div><div class="line"><span class="comment">//	线程交互</span></div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ten</span> </span>&#123;</div><div class="line">	<span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">ThreadB</span> <span class="keyword">extends</span> <span class="title">Thread</span></span></div><div class="line"><span class="class">      //对<span class="title">Thread</span>类进行重写</span></div><div class="line"><span class="class">	</span>&#123;</div><div class="line">		<span class="keyword">int</span> total=<span class="number">0</span>;</div><div class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span></div><div class="line"><span class="function">          <span class="comment">//线程内容：从1累加到101</span></span></div><div class="line"><span class="function">		</span>&#123;</div><div class="line">			<span class="keyword">synchronized</span>(<span class="keyword">this</span>)</div><div class="line">			&#123;</div><div class="line">				<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;<span class="number">101</span>;i++)</div><div class="line">					total+=i;</div><div class="line">				</div><div class="line">				notify();</div><div class="line">                System.out.println(<span class="string">"线程b运行结束！"</span>);</div><div class="line">              <span class="comment">//唤醒在此对象监视器上等待的某个线程；（这个方法在此例中是没什么用的）</span></div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span></div><div class="line"><span class="function">	</span>&#123;</div><div class="line">		ThreadB b=<span class="keyword">new</span> ThreadB();</div><div class="line">		b.start();</div><div class="line">		<span class="keyword">synchronized</span>(b)<span class="comment">//在main线程内给b加上线程锁，使得b线程阻塞，只允许main方法运行，作用范围是此方法大括号里的代码段；</span></div><div class="line">		&#123;</div><div class="line">			<span class="keyword">try</span> &#123;</div><div class="line">              <span class="comment">//这里try的内容是main线程的内容；</span></div><div class="line">				String name=Thread.currentThread().getName();</div><div class="line">				System.out.println(name+<span class="string">" 等待对象b完成计算... ..."</span>);</div><div class="line">				b.wait();<span class="comment">//main线程进行等待；如果将此句去掉，则main线程不会中止，输出计算结果为0；</span></div><div class="line">				System.out.println(<span class="string">"对象b计算完成，结果="</span>+b.total);</div><div class="line">              <span class="comment">//计算完成后调用notify方法唤醒main线程；</span></div><div class="line">				System.out.println(name+<span class="string">"继续运行！"</span>);</div><div class="line">			&#125;</div><div class="line">			<span class="keyword">catch</span>(InterruptedException e)</div><div class="line">			&#123;</div><div class="line">				e.printStackTrace();</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这个例子给的不是很直观，我在b的计算方法末尾加入了输出语句便于观察：</p>
<p><em>(1)main线程等待：</em></p>
<p>「main 等待对象b完成计算… …</p>
<p>线程b运行结束！</p>
<p>对象b计算完成，结果=5050</p>
<p>main继续运行！」</p>
<p><em>(2)main线程不等待：</em></p>
<p>「main 等待对象b完成计算… …</p>
<p>对象b计算完成，结果=0</p>
<p>main继续运行！</p>
<p>线程b运行结束！」</p>
<p>（这样一比较输出结果跟“线程b运行结束”这句话的位置，就能弄清程序里两线程的运行顺序了）</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/06/05/java SE/" data-id="cjefngbzt0006sm769a851muk" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2017/08/05/Java Web/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          java web(1)
        
      </div>
    </a>
  
  
</nav>

  
    
    
    
        <section class="youyan" id="comments">
  <div id="uyan_frame"></div>
  <script src="http://v2.uyan.cc/code/uyan.js?uid=2146648"></script>
</section>
    

</article>
</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/01/10/spring/">Spring学习笔记</a>
          </li>
        
          <li>
            <a href="/2018/01/10/Java web项目/">传统java web项目</a>
          </li>
        
          <li>
            <a href="/2017/11/28/Python/">python笔记</a>
          </li>
        
          <li>
            <a href="/2017/11/15/你想当程序员么？/">你想当程序员吗？</a>
          </li>
        
          <li>
            <a href="/2017/11/05/技术帖之贪心算法1/">技术帖之贪心算法</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 老zhang  Q:1583707135<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="https://lao-zhang.github.io" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>